import{j as e,O as V,R as L,r as i,V as I,y as D,z as F,E as R,G as _,H as z,I as B,J as H,K as J,Q as q,B as G,L as C,N as Q}from"./select-DIUtHlG1.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&u(n)}).observe(document,{childList:!0,subtree:!0});function a(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(s){if(s.ep)return;s.ep=!0;const r=a(s);fetch(s.href,r)}})();const U="/assets/leetcode-D0VPESVK.png",W=({show:t,children:c})=>t?c:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(V,{})}),Y=()=>{const[t,c]=L.useState(""),[a,u]=L.useState(null),[s,r]=L.useState(!1),[n,v]=i.useState(!1),[x,b]=i.useState(null),h=I.find(l=>l.name===a),f=async l=>{l.preventDefault();try{v(!0);const{setKeyModel:o}=C();if(!a)throw new Error("Please select a model");if(!t)throw new Error("Please enter an API key");await o(t,a),b({state:"success",message:"Configuration saved successfully"});const{validateConfiguration:g}=C();await g()}catch(o){b({state:"error",message:o.message||"Failed to save configuration"})}finally{v(!1)}};i.useEffect(()=>{(async()=>{try{const{initializeStorage:o,getKeyModel:g}=C(),{selectedModel:S}=await o();u(S);const y=await g(S);c(y.apiKey||""),r(!0)}catch(o){console.error("Failed to load configuration:",o),r(!0)}})()},[]);const p=async l=>{try{const{setSelectModel:o,getKeyModel:g}=C();await o(l),u(l);const S=await g(l);c(S.apiKey||"")}catch(o){console.error("Failed to change model:",o)}};return e.jsx("div",{className:"relative p-4 w-[350px] bg-background",children:e.jsx(W,{show:s,children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"w-full h-20 overflow-hidden",children:e.jsx("img",{className:"mx-auto h-20 w-auto",src:U,width:150,height:150,alt:"LeetCode Whisper Logo"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"font-bold text-3xl text-white",children:["CodeSmart ",e.jsx("span",{className:"text-whisperOrange",children:"Bot"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your AI Companion for LeetCode!"})]}),e.jsxs("form",{onSubmit:f,className:"mt-10 flex flex-col gap-2 w-full",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"model",className:"text-xs text-muted-foreground",children:"Select AI Model"}),e.jsxs(D,{value:a||void 0,onValueChange:l=>p(l),children:[e.jsx(F,{className:"w-full",children:e.jsx(R,{placeholder:"Select a model"})}),e.jsx(_,{children:e.jsxs(z,{children:[e.jsx(B,{children:"Available Models"}),e.jsx(H,{}),I.map(l=>e.jsx(J,{value:l.name,children:l.display},l.name))]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"apikey",className:"text-xs text-muted-foreground",children:["API Key ",h?`for ${h.display}`:""]}),e.jsx(q,{id:"apikey",value:t,onChange:l=>c(l.target.value),placeholder:(h==null?void 0:h.placeholder)||"Select a model first",disabled:!a,required:!0}),h&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:h.placeholder})]}),e.jsx(G,{disabled:n||!a,type:"submit",className:"w-full mt-2",children:n?"Saving...":"Save Configuration"})]}),x&&e.jsx("div",{className:`mt-2 text-center text-sm p-2 rounded-sm ${x.state==="error"?"text-red-500 border border-red-500 bg-red-50":"text-green-500 border border-green-500 bg-green-50"}`,children:x.message}),e.jsx("div",{className:"mt-7 flex items-center justify-center",children:e.jsxs("p",{className:"text-sm",children:["Need help?Â ",e.jsx("a",{href:"https://github.com/piyushgarg-dev/leetcode-whisper-chrome-extension/issues/new",className:"text-blue-500 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Report an issue"})]})})]})})})};var E=["light","dark"],T="(prefers-color-scheme: dark)",X=typeof window>"u",K=i.createContext(void 0),Z=t=>i.useContext(K)?t.children:i.createElement(te,{...t}),ee=["light","dark"],te=({forcedTheme:t,disableTransitionOnChange:c=!1,enableSystem:a=!0,enableColorScheme:u=!0,storageKey:s="theme",themes:r=ee,defaultTheme:n=a?"system":"light",attribute:v="data-theme",value:x,children:b,nonce:h})=>{let[f,p]=i.useState(()=>M(s,n)),[l,o]=i.useState(()=>M(s)),g=x?Object.values(x):r,S=i.useCallback(d=>{let m=d;if(!m)return;d==="system"&&a&&(m=A());let $=x?x[m]:m,k=c?re():null,N=document.documentElement;if(v==="class"?(N.classList.remove(...g),$&&N.classList.add($)):$?N.setAttribute(v,$):N.removeAttribute(v),u){let O=E.includes(n)?n:null,P=E.includes(m)?m:O;N.style.colorScheme=P}k==null||k()},[]),y=i.useCallback(d=>{let m=typeof d=="function"?d(d):d;p(m);try{localStorage.setItem(s,m)}catch{}},[t]),j=i.useCallback(d=>{let m=A(d);o(m),f==="system"&&a&&!t&&S("system")},[f,t]);i.useEffect(()=>{let d=window.matchMedia(T);return d.addListener(j),j(d),()=>d.removeListener(j)},[j]),i.useEffect(()=>{let d=m=>{if(m.key!==s)return;let $=m.newValue||n;y($)};return window.addEventListener("storage",d),()=>window.removeEventListener("storage",d)},[y]),i.useEffect(()=>{S(t??f)},[t,f]);let w=i.useMemo(()=>({theme:f,setTheme:y,forcedTheme:t,resolvedTheme:f==="system"?l:f,themes:a?[...r,"system"]:r,systemTheme:a?l:void 0}),[f,y,t,l,a,r]);return i.createElement(K.Provider,{value:w},i.createElement(se,{forcedTheme:t,disableTransitionOnChange:c,enableSystem:a,enableColorScheme:u,storageKey:s,themes:r,defaultTheme:n,attribute:v,value:x,children:b,attrs:g,nonce:h}),b)},se=i.memo(({forcedTheme:t,storageKey:c,attribute:a,enableSystem:u,enableColorScheme:s,defaultTheme:r,value:n,attrs:v,nonce:x})=>{let b=r==="system",h=a==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${v.map(o=>`'${o}'`).join(",")})`};`:`var d=document.documentElement,n='${a}',s='setAttribute';`,f=s?E.includes(r)&&r?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${r}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(o,g=!1,S=!0)=>{let y=n?n[o]:o,j=g?o+"|| ''":`'${y}'`,w="";return s&&S&&!g&&E.includes(o)&&(w+=`d.style.colorScheme = '${o}';`),a==="class"?g||y?w+=`c.add(${j})`:w+="null":y&&(w+=`d[s](n,${j})`),w},l=t?`!function(){${h}${p(t)}}()`:u?`!function(){try{${h}var e=localStorage.getItem('${c}');if('system'===e||(!e&&${b})){var t='${T}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${n?`var x=${JSON.stringify(n)};`:""}${p(n?"x[e]":"e",!0)}}${b?"":"else{"+p(r,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${c}');if(e){${n?`var x=${JSON.stringify(n)};`:""}${p(n?"x[e]":"e",!0)}}else{${p(r,!1,!1)};}${f}}catch(t){}}();`;return i.createElement("script",{nonce:x,dangerouslySetInnerHTML:{__html:l}})}),M=(t,c)=>{if(X)return;let a;try{a=localStorage.getItem(t)||void 0}catch{}return a||c},re=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},A=t=>(t||(t=window.matchMedia(T)),t.matches?"dark":"light");const ae=({children:t,attribute:c="class",defaultTheme:a="dark",enableSystem:u=!0,disableTransitionOnChange:s=!0})=>e.jsx(Z,{attribute:c,defaultTheme:a,enableSystem:u,disableTransitionOnChange:s,children:e.jsx("div",{children:t})});Q(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(ae,{children:e.jsx(Y,{})})}));
