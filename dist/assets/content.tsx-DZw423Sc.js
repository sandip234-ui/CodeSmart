var pc=Object.defineProperty;var fc=(e,t,n)=>t in e?pc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var We=(e,t,n)=>fc(e,typeof t!="symbol"?t+"":t,n);import{r as v,c as $o,u as xe,a as An,b as Ct,d as At,j as p,e as lt,P as he,f as U,R as ae,g as ca,h as Qn,i as fe,k as mc,V as ct,l as Re,m as gc,n as Lo,o as Bo,p as hc,A as yc,q as vc,s as bc,S as _c,F as wc,D as xc,C as kc,t as Sc,v as Ec,w as Uo,x as Cc,B as bt,y as Ac,z as Tc,E as Ic,G as Rc,H as Nc,I as jc,J as Pc,K as Oc,L as Ya,M as Mc,N as Dc}from"./select-DIUtHlG1.js";/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Zo=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:o,iconNode:s,...i},l)=>v.createElement("svg",{ref:l,...$c,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Zo("lucide",a),...i},[...s.map(([c,u])=>v.createElement(c,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(e,t)=>{const n=v.forwardRef(({className:r,...a},o)=>v.createElement(Lc,{ref:o,iconNode:t,className:Zo(`lucide-${Fc(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=Be("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=Be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=Be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=Be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=Be("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=Be("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=Be("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=Be("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=Be("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=Be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var Wc=Object.create,er=Object.defineProperty,Kc=Object.defineProperties,Yc=Object.getOwnPropertyDescriptor,Jc=Object.getOwnPropertyDescriptors,zo=Object.getOwnPropertyNames,Rn=Object.getOwnPropertySymbols,Xc=Object.getPrototypeOf,ua=Object.prototype.hasOwnProperty,Vo=Object.prototype.propertyIsEnumerable,Ja=(e,t,n)=>t in e?er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fe=(e,t)=>{for(var n in t||(t={}))ua.call(t,n)&&Ja(e,n,t[n]);if(Rn)for(var n of Rn(t))Vo.call(t,n)&&Ja(e,n,t[n]);return e},tr=(e,t)=>Kc(e,Jc(t)),Go=(e,t)=>{var n={};for(var r in e)ua.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Rn)for(var r of Rn(e))t.indexOf(r)<0&&Vo.call(e,r)&&(n[r]=e[r]);return n},Qc=(e,t)=>function(){return t||(0,e[zo(e)[0]])((t={exports:{}}).exports,t),t.exports},eu=(e,t)=>{for(var n in t)er(e,n,{get:t[n],enumerable:!0})},tu=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of zo(t))!ua.call(e,a)&&a!==n&&er(e,a,{get:()=>t[a],enumerable:!(r=Yc(t,a))||r.enumerable});return e},nu=(e,t,n)=>(n=e!=null?Wc(Xc(e)):{},tu(!e||!e.__esModule?er(n,"default",{value:e,enumerable:!0}):n,e)),ru=Qc({"../../node_modules/.pnpm/prismjs@1.29.0_patch_hash=vrxx3pzkik6jpmgpayxfjunetu/node_modules/prismjs/prism.js"(e,t){var n=function(){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,o={},s={util:{encode:function f(g){return g instanceof i?new i(g.type,f(g.content),g.alias):Array.isArray(g)?g.map(f):g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(f){return Object.prototype.toString.call(f).slice(8,-1)},objId:function(f){return f.__id||Object.defineProperty(f,"__id",{value:++a}),f.__id},clone:function f(g,y){y=y||{};var w,_;switch(s.util.type(g)){case"Object":if(_=s.util.objId(g),y[_])return y[_];w={},y[_]=w;for(var x in g)g.hasOwnProperty(x)&&(w[x]=f(g[x],y));return w;case"Array":return _=s.util.objId(g),y[_]?y[_]:(w=[],y[_]=w,g.forEach(function(T,j){w[j]=f(T,y)}),w);default:return g}},getLanguage:function(f){for(;f;){var g=r.exec(f.className);if(g)return g[1].toLowerCase();f=f.parentElement}return"none"},setLanguage:function(f,g){f.className=f.className.replace(RegExp(r,"gi"),""),f.classList.add("language-"+g)},isActive:function(f,g,y){for(var w="no-"+g;f;){var _=f.classList;if(_.contains(g))return!0;if(_.contains(w))return!1;f=f.parentElement}return!!y}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(f,g){var y=s.util.clone(s.languages[f]);for(var w in g)y[w]=g[w];return y},insertBefore:function(f,g,y,w){w=w||s.languages;var _=w[f],x={};for(var T in _)if(_.hasOwnProperty(T)){if(T==g)for(var j in y)y.hasOwnProperty(j)&&(x[j]=y[j]);y.hasOwnProperty(T)||(x[T]=_[T])}var N=w[f];return w[f]=x,s.languages.DFS(s.languages,function(M,O){O===N&&M!=f&&(this[M]=x)}),x},DFS:function f(g,y,w,_){_=_||{};var x=s.util.objId;for(var T in g)if(g.hasOwnProperty(T)){y.call(g,T,g[T],w||T);var j=g[T],N=s.util.type(j);N==="Object"&&!_[x(j)]?(_[x(j)]=!0,f(j,y,null,_)):N==="Array"&&!_[x(j)]&&(_[x(j)]=!0,f(j,y,T,_))}}},plugins:{},highlight:function(f,g,y){var w={code:f,grammar:g,language:y};if(s.hooks.run("before-tokenize",w),!w.grammar)throw new Error('The language "'+w.language+'" has no grammar.');return w.tokens=s.tokenize(w.code,w.grammar),s.hooks.run("after-tokenize",w),i.stringify(s.util.encode(w.tokens),w.language)},tokenize:function(f,g){var y=g.rest;if(y){for(var w in y)g[w]=y[w];delete g.rest}var _=new u;return d(_,_.head,f),c(f,_,g,_.head,0),b(_)},hooks:{all:{},add:function(f,g){var y=s.hooks.all;y[f]=y[f]||[],y[f].push(g)},run:function(f,g){var y=s.hooks.all[f];if(!(!y||!y.length))for(var w=0,_;_=y[w++];)_(g)}},Token:i};function i(f,g,y,w){this.type=f,this.content=g,this.alias=y,this.length=(w||"").length|0}i.stringify=function f(g,y){if(typeof g=="string")return g;if(Array.isArray(g)){var w="";return g.forEach(function(N){w+=f(N,y)}),w}var _={type:g.type,content:f(g.content,y),tag:"span",classes:["token",g.type],attributes:{},language:y},x=g.alias;x&&(Array.isArray(x)?Array.prototype.push.apply(_.classes,x):_.classes.push(x)),s.hooks.run("wrap",_);var T="";for(var j in _.attributes)T+=" "+j+'="'+(_.attributes[j]||"").replace(/"/g,"&quot;")+'"';return"<"+_.tag+' class="'+_.classes.join(" ")+'"'+T+">"+_.content+"</"+_.tag+">"};function l(f,g,y,w){f.lastIndex=g;var _=f.exec(y);if(_&&w&&_[1]){var x=_[1].length;_.index+=x,_[0]=_[0].slice(x)}return _}function c(f,g,y,w,_,x){for(var T in y)if(!(!y.hasOwnProperty(T)||!y[T])){var j=y[T];j=Array.isArray(j)?j:[j];for(var N=0;N<j.length;++N){if(x&&x.cause==T+","+N)return;var M=j[N],O=M.inside,I=!!M.lookbehind,F=!!M.greedy,z=M.alias;if(F&&!M.pattern.global){var K=M.pattern.toString().match(/[imsuy]*$/)[0];M.pattern=RegExp(M.pattern.source,K+"g")}for(var me=M.pattern||M,Y=w.next,se=_;Y!==g.tail&&!(x&&se>=x.reach);se+=Y.value.length,Y=Y.next){var ne=Y.value;if(g.length>f.length)return;if(!(ne instanceof i)){var ce=1,G;if(F){if(G=l(me,se,f,I),!G||G.index>=f.length)break;var L=G.index,S=G.index+G[0].length,D=se;for(D+=Y.value.length;L>=D;)Y=Y.next,D+=Y.value.length;if(D-=Y.value.length,se=D,Y.value instanceof i)continue;for(var V=Y;V!==g.tail&&(D<S||typeof V.value=="string");V=V.next)ce++,D+=V.value.length;ce--,ne=f.slice(se,D),G.index-=se}else if(G=l(me,0,ne,I),!G)continue;var L=G.index,J=G[0],ee=ne.slice(0,L),te=ne.slice(L+J.length),ue=se+ne.length;x&&ue>x.reach&&(x.reach=ue);var ie=Y.prev;ee&&(ie=d(g,ie,ee),se+=ee.length),h(g,ie,ce);var de=new i(T,O?s.tokenize(J,O):J,z,J);if(Y=d(g,ie,de),te&&d(g,Y,te),ce>1){var oe={cause:T+","+N,reach:ue};c(f,g,y,Y.prev,se,oe),x&&oe.reach>x.reach&&(x.reach=oe.reach)}}}}}}function u(){var f={value:null,prev:null,next:null},g={value:null,prev:f,next:null};f.next=g,this.head=f,this.tail=g,this.length=0}function d(f,g,y){var w=g.next,_={value:y,prev:g,next:w};return g.next=_,w.prev=_,f.length++,_}function h(f,g,y){for(var w=g.next,_=0;_<y&&w!==f.tail;_++)w=w.next;g.next=w,w.prev=g,f.length-=_}function b(f){for(var g=[],y=f.head.next;y!==f.tail;)g.push(y.value),y=y.next;return g}return s}();t.exports=n,n.default=n}}),k=nu(ru());k.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},k.languages.markup.tag.inside["attr-value"].inside.entity=k.languages.markup.entity,k.languages.markup.doctype.inside["internal-subset"].inside=k.languages.markup,k.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Object.defineProperty(k.languages.markup.tag,"addInlined",{value:function(e,r){var n={},n=(n["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:k.languages[r]},n.cdata=/^<!\[CDATA\[|\]\]>$/i,{"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}}),r=(n["language-"+r]={pattern:/[\s\S]+/,inside:k.languages[r]},{});r[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:n},k.languages.insertBefore("markup","cdata",r)}}),Object.defineProperty(k.languages.markup.tag,"addAttribute",{value:function(e,t){k.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:k.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),k.languages.html=k.languages.markup,k.languages.mathml=k.languages.markup,k.languages.svg=k.languages.markup,k.languages.xml=k.languages.extend("markup",{}),k.languages.ssml=k.languages.xml,k.languages.atom=k.languages.xml,k.languages.rss=k.languages.xml,function(e){var t={pattern:/\\[\\(){}[\]^$+*?|.]/,alias:"escape"},n=/\\(?:x[\da-fA-F]{2}|u[\da-fA-F]{4}|u\{[\da-fA-F]+\}|0[0-7]{0,2}|[123][0-7]{2}|c[a-zA-Z]|.)/,r="(?:[^\\\\-]|"+n.source+")",r=RegExp(r+"-"+r),a={pattern:/(<|')[^<>']+(?=[>']$)/,lookbehind:!0,alias:"variable"};e.languages.regex={"char-class":{pattern:/((?:^|[^\\])(?:\\\\)*)\[(?:[^\\\]]|\\[\s\S])*\]/,lookbehind:!0,inside:{"char-class-negation":{pattern:/(^\[)\^/,lookbehind:!0,alias:"operator"},"char-class-punctuation":{pattern:/^\[|\]$/,alias:"punctuation"},range:{pattern:r,inside:{escape:n,"range-punctuation":{pattern:/-/,alias:"operator"}}},"special-escape":t,"char-set":{pattern:/\\[wsd]|\\p\{[^{}]+\}/i,alias:"class-name"},escape:n}},"special-escape":t,"char-set":{pattern:/\.|\\[wsd]|\\p\{[^{}]+\}/i,alias:"class-name"},backreference:[{pattern:/\\(?![123][0-7]{2})[1-9]/,alias:"keyword"},{pattern:/\\k<[^<>']+>/,alias:"keyword",inside:{"group-name":a}}],anchor:{pattern:/[$^]|\\[ABbGZz]/,alias:"function"},escape:n,group:[{pattern:/\((?:\?(?:<[^<>']+>|'[^<>']+'|[>:]|<?[=!]|[idmnsuxU]+(?:-[idmnsuxU]+)?:?))?/,alias:"punctuation",inside:{"group-name":a}},{pattern:/\)/,alias:"punctuation"}],quantifier:{pattern:/(?:[+*?]|\{\d+(?:,\d*)?\})[?+]?/,alias:"number"},alternation:{pattern:/\|/,alias:"keyword"}}}(k),k.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},k.languages.javascript=k.languages.extend("clike",{"class-name":[k.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),k.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,k.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:k.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:k.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:k.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:k.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:k.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),k.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:k.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),k.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),k.languages.markup&&(k.languages.markup.tag.addInlined("script","javascript"),k.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),k.languages.js=k.languages.javascript,k.languages.actionscript=k.languages.extend("javascript",{keyword:/\b(?:as|break|case|catch|class|const|default|delete|do|dynamic|each|else|extends|final|finally|for|function|get|if|implements|import|in|include|instanceof|interface|internal|is|namespace|native|new|null|override|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|use|var|void|while|with)\b/,operator:/\+\+|--|(?:[+\-*\/%^]|&&?|\|\|?|<<?|>>?>?|[!=]=?)=?|[~?@]/}),k.languages.actionscript["class-name"].alias="function",delete k.languages.actionscript.parameter,delete k.languages.actionscript["literal-property"],k.languages.markup&&k.languages.insertBefore("actionscript","string",{xml:{pattern:/(^|[^.])<\/?\w+(?:\s+[^\s>\/=]+=("|')(?:\\[\s\S]|(?!\2)[^\\])*\2)*\s*\/?>/,lookbehind:!0,inside:k.languages.markup}}),function(e){var t=/#(?!\{).+/,n={pattern:/#\{[^}]+\}/,alias:"variable"};e.languages.coffeescript=e.languages.extend("javascript",{comment:t,string:[{pattern:/'(?:\\[\s\S]|[^\\'])*'/,greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,greedy:!0,inside:{interpolation:n}}],keyword:/\b(?:and|break|by|catch|class|continue|debugger|delete|do|each|else|extend|extends|false|finally|for|if|in|instanceof|is|isnt|let|loop|namespace|new|no|not|null|of|off|on|or|own|return|super|switch|then|this|throw|true|try|typeof|undefined|unless|until|when|while|window|with|yes|yield)\b/,"class-member":{pattern:/@(?!\d)\w+/,alias:"variable"}}),e.languages.insertBefore("coffeescript","comment",{"multiline-comment":{pattern:/###[\s\S]+?###/,alias:"comment"},"block-regex":{pattern:/\/{3}[\s\S]*?\/{3}/,alias:"regex",inside:{comment:t,interpolation:n}}}),e.languages.insertBefore("coffeescript","string",{"inline-javascript":{pattern:/`(?:\\[\s\S]|[^\\`])*`/,inside:{delimiter:{pattern:/^`|`$/,alias:"punctuation"},script:{pattern:/[\s\S]+/,alias:"language-javascript",inside:e.languages.javascript}}},"multiline-string":[{pattern:/'''[\s\S]*?'''/,greedy:!0,alias:"string"},{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string",inside:{interpolation:n}}]}),e.languages.insertBefore("coffeescript","keyword",{property:/(?!\d)\w+(?=\s*:(?!:))/}),delete e.languages.coffeescript["template-string"],e.languages.coffee=e.languages.coffeescript}(k),function(e){var t=e.languages.javadoclike={parameter:{pattern:/(^[\t ]*(?:\/{3}|\*|\/\*\*)\s*@(?:arg|arguments|param)\s+)\w+/m,lookbehind:!0},keyword:{pattern:/(^[\t ]*(?:\/{3}|\*|\/\*\*)\s*|\{)@[a-z][a-zA-Z-]+\b/m,lookbehind:!0},punctuation:/[{}]/};Object.defineProperty(t,"addSupport",{value:function(n,r){(n=typeof n=="string"?[n]:n).forEach(function(a){var o=function(d){d.inside||(d.inside={}),d.inside.rest=r},s="doc-comment";if(i=e.languages[a]){var i,l=i[s];if((l=l||(i=e.languages.insertBefore(a,"comment",{"doc-comment":{pattern:/(^|[^\\])\/\*\*[^/][\s\S]*?(?:\*\/|$)/,lookbehind:!0,alias:"comment"}}))[s])instanceof RegExp&&(l=i[s]={pattern:l}),Array.isArray(l))for(var c=0,u=l.length;c<u;c++)l[c]instanceof RegExp&&(l[c]={pattern:l[c]}),o(l[c]);else o(l)}})}}),t.addSupport(["java","javascript","php"],t)}(k),function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/,t=(e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css,e.languages.markup);t&&(t.tag.addInlined("style","css"),t.tag.addAttribute("style","css"))}(k),function(e){var t=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,t=(e.languages.css.selector={pattern:e.languages.css.selector.pattern,lookbehind:!0,inside:t={"pseudo-element":/:(?:after|before|first-letter|first-line|selection)|::[-\w]+/,"pseudo-class":/:[-\w]+/,class:/\.[-\w]+/,id:/#[-\w]+/,attribute:{pattern:RegExp(`\\[(?:[^[\\]"']|`+t.source+")*\\]"),greedy:!0,inside:{punctuation:/^\[|\]$/,"case-sensitivity":{pattern:/(\s)[si]$/i,lookbehind:!0,alias:"keyword"},namespace:{pattern:/^(\s*)(?:(?!\s)[-*\w\xA0-\uFFFF])*\|(?!=)/,lookbehind:!0,inside:{punctuation:/\|$/}},"attr-name":{pattern:/^(\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+/,lookbehind:!0},"attr-value":[t,{pattern:/(=\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+(?=\s*$)/,lookbehind:!0}],operator:/[|~*^$]?=/}},"n-th":[{pattern:/(\(\s*)[+-]?\d*[\dn](?:\s*[+-]\s*\d+)?(?=\s*\))/,lookbehind:!0,inside:{number:/[\dn]+/,operator:/[+-]/}},{pattern:/(\(\s*)(?:even|odd)(?=\s*\))/i,lookbehind:!0}],combinator:/>|\+|~|\|\|/,punctuation:/[(),]/}},e.languages.css.atrule.inside["selector-function-argument"].inside=t,e.languages.insertBefore("css","property",{variable:{pattern:/(^|[^-\w\xA0-\uFFFF])--(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*/i,lookbehind:!0}}),{pattern:/(\b\d+)(?:%|[a-z]+(?![\w-]))/,lookbehind:!0}),n={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0};e.languages.insertBefore("css","function",{operator:{pattern:/(\s)[+\-*\/](?=\s)/,lookbehind:!0},hexcode:{pattern:/\B#[\da-f]{3,8}\b/i,alias:"color"},color:[{pattern:/(^|[^\w-])(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|RebeccaPurple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)(?![\w-])/i,lookbehind:!0},{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:t,number:n,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:t,number:n})}(k),function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),o=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function s(i,l){l=(l||"").replace(/m/g,"")+"m";var c=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return i});return RegExp(c,l)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+o+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:s(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:s(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:s(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:s(o),lookbehind:!0,greedy:!0},number:{pattern:s(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml}(k),function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(c){return c=c.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+c+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),o=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source,s=(e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+o+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+o+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+o+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(c){["url","bold","italic","strike","code-snippet"].forEach(function(u){c!==u&&(e.languages.markdown[c].inside.content.inside[u]=e.languages.markdown[u])})}),e.hooks.add("after-tokenize",function(c){c.language!=="markdown"&&c.language!=="md"||function u(d){if(d&&typeof d!="string")for(var h=0,b=d.length;h<b;h++){var f,g=d[h];g.type!=="code"?u(g.content):(f=g.content[1],g=g.content[3],f&&g&&f.type==="code-language"&&g.type==="code-block"&&typeof f.content=="string"&&(f=f.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp"),f="language-"+(f=(/[a-z][\w-]*/i.exec(f)||[""])[0].toLowerCase()),g.alias?typeof g.alias=="string"?g.alias=[g.alias,f]:g.alias.push(f):g.alias=[f]))}}(c.tokens)}),e.hooks.add("wrap",function(c){if(c.type==="code-block"){for(var u="",d=0,h=c.classes.length;d<h;d++){var b=c.classes[d],b=/language-(.+)/.exec(b);if(b){u=b[1];break}}var f,g=e.languages[u];g?c.content=e.highlight(function(y){return y=y.replace(s,""),y=y.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(w,_){var x;return(_=_.toLowerCase())[0]==="#"?(x=_[1]==="x"?parseInt(_.slice(2),16):Number(_.slice(1)),l(x)):i[_]||w})}(c.content),g,u):u&&u!=="none"&&e.plugins.autoloader&&(f="md-"+new Date().valueOf()+"-"+Math.floor(1e16*Math.random()),c.attributes.id=f,e.plugins.autoloader.loadLanguages(u,function(){var y=document.getElementById(f);y&&(y.innerHTML=e.highlight(y.textContent,e.languages[u],u))}))}}),RegExp(e.languages.markup.tag.pattern.source,"gi")),i={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;e.languages.md=e.languages.markdown}(k),k.languages.graphql={comment:/#.*/,description:{pattern:/(?:"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*")(?=\s*[a-z_])/i,greedy:!0,alias:"string",inside:{"language-markdown":{pattern:/(^"(?:"")?)(?!\1)[\s\S]+(?=\1$)/,lookbehind:!0,inside:k.languages.markdown}}},string:{pattern:/"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*"/,greedy:!0},number:/(?:\B-|\b)\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,boolean:/\b(?:false|true)\b/,variable:/\$[a-z_]\w*/i,directive:{pattern:/@[a-z_]\w*/i,alias:"function"},"attr-name":{pattern:/\b[a-z_]\w*(?=\s*(?:\((?:[^()"]|"(?:\\.|[^\\"\r\n])*")*\))?:)/i,greedy:!0},"atom-input":{pattern:/\b[A-Z]\w*Input\b/,alias:"class-name"},scalar:/\b(?:Boolean|Float|ID|Int|String)\b/,constant:/\b[A-Z][A-Z_\d]*\b/,"class-name":{pattern:/(\b(?:enum|implements|interface|on|scalar|type|union)\s+|&\s*|:\s*|\[)[A-Z_]\w*/,lookbehind:!0},fragment:{pattern:/(\bfragment\s+|\.{3}\s*(?!on\b))[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-mutation":{pattern:/(\bmutation\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-query":{pattern:/(\bquery\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},keyword:/\b(?:directive|enum|extend|fragment|implements|input|interface|mutation|on|query|repeatable|scalar|schema|subscription|type|union)\b/,operator:/[!=|&]|\.{3}/,"property-query":/\w+(?=\s*\()/,object:/\w+(?=\s*\{)/,punctuation:/[!(){}\[\]:=,]/,property:/\w+/},k.hooks.add("after-tokenize",function(e){if(e.language==="graphql")for(var t=e.tokens.filter(function(f){return typeof f!="string"&&f.type!=="comment"&&f.type!=="scalar"}),n=0;n<t.length;){var r=t[n++];if(r.type==="keyword"&&r.content==="mutation"){var a=[];if(d(["definition-mutation","punctuation"])&&u(1).content==="("){n+=2;var o=h(/^\($/,/^\)$/);if(o===-1)continue;for(;n<o;n++){var s=u(0);s.type==="variable"&&(b(s,"variable-input"),a.push(s.content))}n=o+1}if(d(["punctuation","property-query"])&&u(0).content==="{"&&(n++,b(u(0),"property-mutation"),0<a.length)){var i=h(/^\{$/,/^\}$/);if(i!==-1)for(var l=n;l<i;l++){var c=t[l];c.type==="variable"&&0<=a.indexOf(c.content)&&b(c,"variable-input")}}}}function u(f){return t[n+f]}function d(f,g){g=g||0;for(var y=0;y<f.length;y++){var w=u(y+g);if(!w||w.type!==f[y])return}return 1}function h(f,g){for(var y=1,w=n;w<t.length;w++){var _=t[w],x=_.content;if(_.type==="punctuation"&&typeof x=="string"){if(f.test(x))y++;else if(g.test(x)&&--y===0)return w}}return-1}function b(f,g){var y=f.alias;y?Array.isArray(y)||(f.alias=y=[y]):f.alias=y=[],y.push(g)}}),k.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/},function(e){var t=e.languages.javascript["template-string"],n=t.pattern.source,r=t.inside.interpolation,a=r.inside["interpolation-punctuation"],o=r.pattern.source;function s(d,h){if(e.languages[d])return{pattern:RegExp("((?:"+h+")\\s*)"+n),lookbehind:!0,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},"embedded-code":{pattern:/[\s\S]+/,alias:d}}}}function i(d,h,b){return d={code:d,grammar:h,language:b},e.hooks.run("before-tokenize",d),d.tokens=e.tokenize(d.code,d.grammar),e.hooks.run("after-tokenize",d),d.tokens}function l(d,h,b){var y=e.tokenize(d,{interpolation:{pattern:RegExp(o),lookbehind:!0}}),f=0,g={},y=i(y.map(function(_){if(typeof _=="string")return _;for(var x,T,_=_.content;d.indexOf((T=f++,x="___"+b.toUpperCase()+"_"+T+"___"))!==-1;);return g[x]=_,x}).join(""),h,b),w=Object.keys(g);return f=0,function _(x){for(var T=0;T<x.length;T++){if(f>=w.length)return;var j,N,M,O,I,F,z,K=x[T];typeof K=="string"||typeof K.content=="string"?(j=w[f],(z=(F=typeof K=="string"?K:K.content).indexOf(j))!==-1&&(++f,N=F.substring(0,z),I=g[j],M=void 0,(O={})["interpolation-punctuation"]=a,(O=e.tokenize(I,O)).length===3&&((M=[1,1]).push.apply(M,i(O[1],e.languages.javascript,"javascript")),O.splice.apply(O,M)),M=new e.Token("interpolation",O,r.alias,I),O=F.substring(z+j.length),I=[],N&&I.push(N),I.push(M),O&&(_(F=[O]),I.push.apply(I,F)),typeof K=="string"?(x.splice.apply(x,[T,1].concat(I)),T+=I.length-1):K.content=I)):(z=K.content,Array.isArray(z)?_(z):_([z]))}}(y),new e.Token(b,y,"language-"+b,d)}e.languages.javascript["template-string"]=[s("css",/\b(?:styled(?:\([^)]*\))?(?:\s*\.\s*\w+(?:\([^)]*\))*)*|css(?:\s*\.\s*(?:global|resolve))?|createGlobalStyle|keyframes)/.source),s("html",/\bhtml|\.\s*(?:inner|outer)HTML\s*\+?=/.source),s("svg",/\bsvg/.source),s("markdown",/\b(?:markdown|md)/.source),s("graphql",/\b(?:gql|graphql(?:\s*\.\s*experimental)?)/.source),s("sql",/\bsql/.source),t].filter(Boolean);var c={javascript:!0,js:!0,typescript:!0,ts:!0,jsx:!0,tsx:!0};function u(d){return typeof d=="string"?d:Array.isArray(d)?d.map(u).join(""):u(d.content)}e.hooks.add("after-tokenize",function(d){d.language in c&&function h(b){for(var f=0,g=b.length;f<g;f++){var y,w,_,x=b[f];typeof x!="string"&&(y=x.content,Array.isArray(y)?x.type==="template-string"?(x=y[1],y.length===3&&typeof x!="string"&&x.type==="embedded-code"&&(w=u(x),x=x.alias,x=Array.isArray(x)?x[0]:x,_=e.languages[x])&&(y[1]=l(w,_,x))):h(y):typeof y!="string"&&h([y]))}}(d.tokens)})}(k),function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(k),function(e){var t=e.languages.javascript,n=/\{(?:[^{}]|\{(?:[^{}]|\{[^{}]*\})*\})+\}/.source,r="(@(?:arg|argument|param|property)\\s+(?:"+n+"\\s+)?)";e.languages.jsdoc=e.languages.extend("javadoclike",{parameter:{pattern:RegExp(r+/(?:(?!\s)[$\w\xA0-\uFFFF.])+(?=\s|$)/.source),lookbehind:!0,inside:{punctuation:/\./}}}),e.languages.insertBefore("jsdoc","keyword",{"optional-parameter":{pattern:RegExp(r+/\[(?:(?!\s)[$\w\xA0-\uFFFF.])+(?:=[^[\]]+)?\](?=\s|$)/.source),lookbehind:!0,inside:{parameter:{pattern:/(^\[)[$\w\xA0-\uFFFF\.]+/,lookbehind:!0,inside:{punctuation:/\./}},code:{pattern:/(=)[\s\S]*(?=\]$)/,lookbehind:!0,inside:t,alias:"language-javascript"},punctuation:/[=[\]]/}},"class-name":[{pattern:RegExp(/(@(?:augments|class|extends|interface|memberof!?|template|this|typedef)\s+(?:<TYPE>\s+)?)[A-Z]\w*(?:\.[A-Z]\w*)*/.source.replace(/<TYPE>/g,function(){return n})),lookbehind:!0,inside:{punctuation:/\./}},{pattern:RegExp("(@[a-z]+\\s+)"+n),lookbehind:!0,inside:{string:t.string,number:t.number,boolean:t.boolean,keyword:e.languages.typescript.keyword,operator:/=>|\.\.\.|[&|?:*]/,punctuation:/[.,;=<>{}()[\]]/}}],example:{pattern:/(@example\s+(?!\s))(?:[^@\s]|\s+(?!\s))+?(?=\s*(?:\*\s*)?(?:@\w|\*\/))/,lookbehind:!0,inside:{code:{pattern:/^([\t ]*(?:\*\s*)?)\S.*$/m,lookbehind:!0,inside:t,alias:"language-javascript"}}}}),e.languages.javadoclike.addSupport("javascript",e.languages.jsdoc)}(k),function(e){e.languages.flow=e.languages.extend("javascript",{}),e.languages.insertBefore("flow","keyword",{type:[{pattern:/\b(?:[Bb]oolean|Function|[Nn]umber|[Ss]tring|[Ss]ymbol|any|mixed|null|void)\b/,alias:"class-name"}]}),e.languages.flow["function-variable"].pattern=/(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=\s*(?:function\b|(?:\([^()]*\)(?:\s*:\s*\w+)?|(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/i,delete e.languages.flow.parameter,e.languages.insertBefore("flow","operator",{"flow-punctuation":{pattern:/\{\||\|\}/,alias:"punctuation"}}),Array.isArray(e.languages.flow.keyword)||(e.languages.flow.keyword=[e.languages.flow.keyword]),e.languages.flow.keyword.unshift({pattern:/(^|[^$]\b)(?:Class|declare|opaque|type)\b(?!\$)/,lookbehind:!0},{pattern:/(^|[^$]\B)\$(?:Diff|Enum|Exact|Keys|ObjMap|PropertyType|Record|Shape|Subtype|Supertype|await)\b(?!\$)/,lookbehind:!0})}(k),k.languages.n4js=k.languages.extend("javascript",{keyword:/\b(?:Array|any|boolean|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|module|new|null|number|package|private|protected|public|return|set|static|string|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/}),k.languages.insertBefore("n4js","constant",{annotation:{pattern:/@+\w+/,alias:"operator"}}),k.languages.n4jsd=k.languages.n4js,function(e){function t(s,i){return RegExp(s.replace(/<ID>/g,function(){return/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/.source}),i)}e.languages.insertBefore("javascript","function-variable",{"method-variable":{pattern:RegExp("(\\.\\s*)"+e.languages.javascript["function-variable"].pattern.source),lookbehind:!0,alias:["function-variable","method","function","property-access"]}}),e.languages.insertBefore("javascript","function",{method:{pattern:RegExp("(\\.\\s*)"+e.languages.javascript.function.source),lookbehind:!0,alias:["function","property-access"]}}),e.languages.insertBefore("javascript","constant",{"known-class-name":[{pattern:/\b(?:(?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)?Array|ArrayBuffer|BigInt|Boolean|DataView|Date|Error|Function|Intl|JSON|(?:Weak)?(?:Map|Set)|Math|Number|Object|Promise|Proxy|Reflect|RegExp|String|Symbol|WebAssembly)\b/,alias:"class-name"},{pattern:/\b(?:[A-Z]\w*)Error\b/,alias:"class-name"}]}),e.languages.insertBefore("javascript","keyword",{imports:{pattern:t(/(\bimport\b\s*)(?:<ID>(?:\s*,\s*(?:\*\s*as\s+<ID>|\{[^{}]*\}))?|\*\s*as\s+<ID>|\{[^{}]*\})(?=\s*\bfrom\b)/.source),lookbehind:!0,inside:e.languages.javascript},exports:{pattern:t(/(\bexport\b\s*)(?:\*(?:\s*as\s+<ID>)?(?=\s*\bfrom\b)|\{[^{}]*\})/.source),lookbehind:!0,inside:e.languages.javascript}}),e.languages.javascript.keyword.unshift({pattern:/\b(?:as|default|export|from|import)\b/,alias:"module"},{pattern:/\b(?:await|break|catch|continue|do|else|finally|for|if|return|switch|throw|try|while|yield)\b/,alias:"control-flow"},{pattern:/\bnull\b/,alias:["null","nil"]},{pattern:/\bundefined\b/,alias:"nil"}),e.languages.insertBefore("javascript","operator",{spread:{pattern:/\.{3}/,alias:"operator"},arrow:{pattern:/=>/,alias:"operator"}}),e.languages.insertBefore("javascript","punctuation",{"property-access":{pattern:t(/(\.\s*)#?<ID>/.source),lookbehind:!0},"maybe-class-name":{pattern:/(^|[^$\w\xA0-\uFFFF])[A-Z][$\w\xA0-\uFFFF]+/,lookbehind:!0},dom:{pattern:/\b(?:document|(?:local|session)Storage|location|navigator|performance|window)\b/,alias:"variable"},console:{pattern:/\bconsole(?=\s*\.)/,alias:"class-name"}});for(var n=["function","function-variable","method","method-variable","property-access"],r=0;r<n.length;r++){var o=n[r],a=e.languages.javascript[o],o=(a=e.util.type(a)==="RegExp"?e.languages.javascript[o]={pattern:a}:a).inside||{};(a.inside=o)["maybe-class-name"]=/^[A-Z][\s\S]*/}}(k),function(e){var t=e.util.clone(e.languages.javascript),n=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,r=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,a=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function o(l,c){return l=l.replace(/<S>/g,function(){return n}).replace(/<BRACES>/g,function(){return r}).replace(/<SPREAD>/g,function(){return a}),RegExp(l,c)}a=o(a).source,e.languages.jsx=e.languages.extend("markup",t),e.languages.jsx.tag.pattern=o(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),e.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,e.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,e.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,e.languages.jsx.tag.inside.comment=t.comment,e.languages.insertBefore("inside","attr-name",{spread:{pattern:o(/<SPREAD>/.source),inside:e.languages.jsx}},e.languages.jsx.tag),e.languages.insertBefore("inside","special-attr",{script:{pattern:o(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:e.languages.jsx}}},e.languages.jsx.tag);function s(l){for(var c=[],u=0;u<l.length;u++){var d=l[u],h=!1;typeof d!="string"&&(d.type==="tag"&&d.content[0]&&d.content[0].type==="tag"?d.content[0].content[0].content==="</"?0<c.length&&c[c.length-1].tagName===i(d.content[0].content[1])&&c.pop():d.content[d.content.length-1].content!=="/>"&&c.push({tagName:i(d.content[0].content[1]),openedBraces:0}):0<c.length&&d.type==="punctuation"&&d.content==="{"?c[c.length-1].openedBraces++:0<c.length&&0<c[c.length-1].openedBraces&&d.type==="punctuation"&&d.content==="}"?c[c.length-1].openedBraces--:h=!0),(h||typeof d=="string")&&0<c.length&&c[c.length-1].openedBraces===0&&(h=i(d),u<l.length-1&&(typeof l[u+1]=="string"||l[u+1].type==="plain-text")&&(h+=i(l[u+1]),l.splice(u+1,1)),0<u&&(typeof l[u-1]=="string"||l[u-1].type==="plain-text")&&(h=i(l[u-1])+h,l.splice(u-1,1),u--),l[u]=new e.Token("plain-text",h,null,h)),d.content&&typeof d.content!="string"&&s(d.content)}}var i=function(l){return l?typeof l=="string"?l:typeof l.content=="string"?l.content:l.content.map(i).join(""):""};e.hooks.add("after-tokenize",function(l){l.language!=="jsx"&&l.language!=="tsx"||s(l.tokens)})}(k),function(e){var t=e.util.clone(e.languages.typescript),t=(e.languages.tsx=e.languages.extend("jsx",t),delete e.languages.tsx.parameter,delete e.languages.tsx["literal-property"],e.languages.tsx.tag);t.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+t.pattern.source+")",t.pattern.flags),t.lookbehind=!0}(k),k.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/},k.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=k.languages.swift}),function(e){e.languages.kotlin=e.languages.extend("clike",{keyword:{pattern:/(^|[^.])\b(?:abstract|actual|annotation|as|break|by|catch|class|companion|const|constructor|continue|crossinline|data|do|dynamic|else|enum|expect|external|final|finally|for|fun|get|if|import|in|infix|init|inline|inner|interface|internal|is|lateinit|noinline|null|object|open|operator|out|override|package|private|protected|public|reified|return|sealed|set|super|suspend|tailrec|this|throw|to|try|typealias|val|var|vararg|when|where|while)\b/,lookbehind:!0},function:[{pattern:/(?:`[^\r\n`]+`|\b\w+)(?=\s*\()/,greedy:!0},{pattern:/(\.)(?:`[^\r\n`]+`|\w+)(?=\s*\{)/,lookbehind:!0,greedy:!0}],number:/\b(?:0[xX][\da-fA-F]+(?:_[\da-fA-F]+)*|0[bB][01]+(?:_[01]+)*|\d+(?:_\d+)*(?:\.\d+(?:_\d+)*)?(?:[eE][+-]?\d+(?:_\d+)*)?[fFL]?)\b/,operator:/\+[+=]?|-[-=>]?|==?=?|!(?:!|==?)?|[\/*%<>]=?|[?:]:?|\.\.|&&|\|\||\b(?:and|inv|or|shl|shr|ushr|xor)\b/}),delete e.languages.kotlin["class-name"];var t={"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:e.languages.kotlin}};e.languages.insertBefore("kotlin","string",{"string-literal":[{pattern:/"""(?:[^$]|\$(?:(?!\{)|\{[^{}]*\}))*?"""/,alias:"multiline",inside:{interpolation:{pattern:/\$(?:[a-z_]\w*|\{[^{}]*\})/i,inside:t},string:/[\s\S]+/}},{pattern:/"(?:[^"\\\r\n$]|\\.|\$(?:(?!\{)|\{[^{}]*\}))*"/,alias:"singleline",inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:[a-z_]\w*|\{[^{}]*\})/i,lookbehind:!0,inside:t},string:/[\s\S]+/}}],char:{pattern:/'(?:[^'\\\r\n]|\\(?:.|u[a-fA-F0-9]{0,4}))'/,greedy:!0}}),delete e.languages.kotlin.string,e.languages.insertBefore("kotlin","keyword",{annotation:{pattern:/\B@(?:\w+:)?(?:[A-Z]\w*|\[[^\]]+\])/,alias:"builtin"}}),e.languages.insertBefore("kotlin","function",{label:{pattern:/\b\w+@|@\w+\b/,alias:"symbol"}}),e.languages.kt=e.languages.kotlin,e.languages.kts=e.languages.kotlin}(k),k.languages.c=k.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),k.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),k.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},k.languages.c.string],char:k.languages.c.char,comment:k.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:k.languages.c}}}}),k.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete k.languages.c.boolean,k.languages.objectivec=k.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),delete k.languages.objectivec["class-name"],k.languages.objc=k.languages.objectivec,k.languages.reason=k.languages.extend("clike",{string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^\\\r\n"])*"/,greedy:!0},"class-name":/\b[A-Z]\w*/,keyword:/\b(?:and|as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|method|module|mutable|new|nonrec|object|of|open|or|private|rec|sig|struct|switch|then|to|try|type|val|virtual|when|while|with)\b/,operator:/\.{3}|:[:=]|\|>|->|=(?:==?|>)?|<=?|>=?|[|^?'#!~`]|[+\-*\/]\.?|\b(?:asr|land|lor|lsl|lsr|lxor|mod)\b/}),k.languages.insertBefore("reason","class-name",{char:{pattern:/'(?:\\x[\da-f]{2}|\\o[0-3][0-7][0-7]|\\\d{3}|\\.|[^'\\\r\n])'/,greedy:!0},constructor:/\b[A-Z]\w*\b(?!\s*\.)/,label:{pattern:/\b[a-z]\w*(?=::)/,alias:"symbol"}}),delete k.languages.reason.function,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(k),k.languages.go=k.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/}),k.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}}),delete k.languages.go["class-name"],function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return n})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(k),k.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},k.languages.python["string-interpolation"].inside.interpolation.inside.rest=k.languages.python,k.languages.py=k.languages.python,k.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},k.languages.webmanifest=k.languages.json;var Ho={};eu(Ho,{dracula:()=>ou,duotoneDark:()=>iu,duotoneLight:()=>cu,github:()=>du,gruvboxMaterialDark:()=>Bu,gruvboxMaterialLight:()=>Zu,jettwaveDark:()=>ju,jettwaveLight:()=>Ou,nightOwl:()=>fu,nightOwlLight:()=>gu,oceanicNext:()=>yu,okaidia:()=>bu,oneDark:()=>Du,oneLight:()=>$u,palenight:()=>wu,shadesOfPurple:()=>ku,synthwave84:()=>Eu,ultramin:()=>Au,vsDark:()=>qo,vsLight:()=>Ru});var au={plain:{color:"#F8F8F2",backgroundColor:"#282A36"},styles:[{types:["prolog","constant","builtin"],style:{color:"rgb(189, 147, 249)"}},{types:["inserted","function"],style:{color:"rgb(80, 250, 123)"}},{types:["deleted"],style:{color:"rgb(255, 85, 85)"}},{types:["changed"],style:{color:"rgb(255, 184, 108)"}},{types:["punctuation","symbol"],style:{color:"rgb(248, 248, 242)"}},{types:["string","char","tag","selector"],style:{color:"rgb(255, 121, 198)"}},{types:["keyword","variable"],style:{color:"rgb(189, 147, 249)",fontStyle:"italic"}},{types:["comment"],style:{color:"rgb(98, 114, 164)"}},{types:["attr-name"],style:{color:"rgb(241, 250, 140)"}}]},ou=au,su={plain:{backgroundColor:"#2a2734",color:"#9a86fd"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#6c6783"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#e09142"}},{types:["property","function"],style:{color:"#9a86fd"}},{types:["tag-id","selector","atrule-id"],style:{color:"#eeebff"}},{types:["attr-name"],style:{color:"#c4b9fe"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","atrule","placeholder","variable"],style:{color:"#ffcc99"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#c4b9fe"}}]},iu=su,lu={plain:{backgroundColor:"#faf8f5",color:"#728fcb"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#b6ad9a"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#063289"}},{types:["property","function"],style:{color:"#b29762"}},{types:["tag-id","selector","atrule-id"],style:{color:"#2d2006"}},{types:["attr-name"],style:{color:"#896724"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","atrule"],style:{color:"#728fcb"}},{types:["placeholder","variable"],style:{color:"#93abdc"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#896724"}}]},cu=lu,uu={plain:{color:"#393A34",backgroundColor:"#f6f8fa"},styles:[{types:["comment","prolog","doctype","cdata"],style:{color:"#999988",fontStyle:"italic"}},{types:["namespace"],style:{opacity:.7}},{types:["string","attr-value"],style:{color:"#e3116c"}},{types:["punctuation","operator"],style:{color:"#393A34"}},{types:["entity","url","symbol","number","boolean","variable","constant","property","regex","inserted"],style:{color:"#36acaa"}},{types:["atrule","keyword","attr-name","selector"],style:{color:"#00a4db"}},{types:["function","deleted","tag"],style:{color:"#d73a49"}},{types:["function-variable"],style:{color:"#6f42c1"}},{types:["tag","selector","keyword"],style:{color:"#00009f"}}]},du=uu,pu={plain:{color:"#d6deeb",backgroundColor:"#011627"},styles:[{types:["changed"],style:{color:"rgb(162, 191, 252)",fontStyle:"italic"}},{types:["deleted"],style:{color:"rgba(239, 83, 80, 0.56)",fontStyle:"italic"}},{types:["inserted","attr-name"],style:{color:"rgb(173, 219, 103)",fontStyle:"italic"}},{types:["comment"],style:{color:"rgb(99, 119, 119)",fontStyle:"italic"}},{types:["string","url"],style:{color:"rgb(173, 219, 103)"}},{types:["variable"],style:{color:"rgb(214, 222, 235)"}},{types:["number"],style:{color:"rgb(247, 140, 108)"}},{types:["builtin","char","constant","function"],style:{color:"rgb(130, 170, 255)"}},{types:["punctuation"],style:{color:"rgb(199, 146, 234)"}},{types:["selector","doctype"],style:{color:"rgb(199, 146, 234)",fontStyle:"italic"}},{types:["class-name"],style:{color:"rgb(255, 203, 139)"}},{types:["tag","operator","keyword"],style:{color:"rgb(127, 219, 202)"}},{types:["boolean"],style:{color:"rgb(255, 88, 116)"}},{types:["property"],style:{color:"rgb(128, 203, 196)"}},{types:["namespace"],style:{color:"rgb(178, 204, 214)"}}]},fu=pu,mu={plain:{color:"#403f53",backgroundColor:"#FBFBFB"},styles:[{types:["changed"],style:{color:"rgb(162, 191, 252)",fontStyle:"italic"}},{types:["deleted"],style:{color:"rgba(239, 83, 80, 0.56)",fontStyle:"italic"}},{types:["inserted","attr-name"],style:{color:"rgb(72, 118, 214)",fontStyle:"italic"}},{types:["comment"],style:{color:"rgb(152, 159, 177)",fontStyle:"italic"}},{types:["string","builtin","char","constant","url"],style:{color:"rgb(72, 118, 214)"}},{types:["variable"],style:{color:"rgb(201, 103, 101)"}},{types:["number"],style:{color:"rgb(170, 9, 130)"}},{types:["punctuation"],style:{color:"rgb(153, 76, 195)"}},{types:["function","selector","doctype"],style:{color:"rgb(153, 76, 195)",fontStyle:"italic"}},{types:["class-name"],style:{color:"rgb(17, 17, 17)"}},{types:["tag"],style:{color:"rgb(153, 76, 195)"}},{types:["operator","property","keyword","namespace"],style:{color:"rgb(12, 150, 155)"}},{types:["boolean"],style:{color:"rgb(188, 84, 84)"}}]},gu=mu,ke={char:"#D8DEE9",comment:"#999999",keyword:"#c5a5c5",primitive:"#5a9bcf",string:"#8dc891",variable:"#d7deea",boolean:"#ff8b50",tag:"#fc929e",function:"#79b6f2",className:"#FAC863"},hu={plain:{backgroundColor:"#282c34",color:"#ffffff"},styles:[{types:["attr-name"],style:{color:ke.keyword}},{types:["attr-value"],style:{color:ke.string}},{types:["comment","block-comment","prolog","doctype","cdata","shebang"],style:{color:ke.comment}},{types:["property","number","function-name","constant","symbol","deleted"],style:{color:ke.primitive}},{types:["boolean"],style:{color:ke.boolean}},{types:["tag"],style:{color:ke.tag}},{types:["string"],style:{color:ke.string}},{types:["punctuation"],style:{color:ke.string}},{types:["selector","char","builtin","inserted"],style:{color:ke.char}},{types:["function"],style:{color:ke.function}},{types:["operator","entity","url","variable"],style:{color:ke.variable}},{types:["keyword"],style:{color:ke.keyword}},{types:["atrule","class-name"],style:{color:ke.className}},{types:["important"],style:{fontWeight:"400"}},{types:["bold"],style:{fontWeight:"bold"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["namespace"],style:{opacity:.7}}]},yu=hu,vu={plain:{color:"#f8f8f2",backgroundColor:"#272822"},styles:[{types:["changed"],style:{color:"rgb(162, 191, 252)",fontStyle:"italic"}},{types:["deleted"],style:{color:"#f92672",fontStyle:"italic"}},{types:["inserted"],style:{color:"rgb(173, 219, 103)",fontStyle:"italic"}},{types:["comment"],style:{color:"#8292a2",fontStyle:"italic"}},{types:["string","url"],style:{color:"#a6e22e"}},{types:["variable"],style:{color:"#f8f8f2"}},{types:["number"],style:{color:"#ae81ff"}},{types:["builtin","char","constant","function","class-name"],style:{color:"#e6db74"}},{types:["punctuation"],style:{color:"#f8f8f2"}},{types:["selector","doctype"],style:{color:"#a6e22e",fontStyle:"italic"}},{types:["tag","operator","keyword"],style:{color:"#66d9ef"}},{types:["boolean"],style:{color:"#ae81ff"}},{types:["namespace"],style:{color:"rgb(178, 204, 214)",opacity:.7}},{types:["tag","property"],style:{color:"#f92672"}},{types:["attr-name"],style:{color:"#a6e22e !important"}},{types:["doctype"],style:{color:"#8292a2"}},{types:["rule"],style:{color:"#e6db74"}}]},bu=vu,_u={plain:{color:"#bfc7d5",backgroundColor:"#292d3e"},styles:[{types:["comment"],style:{color:"rgb(105, 112, 152)",fontStyle:"italic"}},{types:["string","inserted"],style:{color:"rgb(195, 232, 141)"}},{types:["number"],style:{color:"rgb(247, 140, 108)"}},{types:["builtin","char","constant","function"],style:{color:"rgb(130, 170, 255)"}},{types:["punctuation","selector"],style:{color:"rgb(199, 146, 234)"}},{types:["variable"],style:{color:"rgb(191, 199, 213)"}},{types:["class-name","attr-name"],style:{color:"rgb(255, 203, 107)"}},{types:["tag","deleted"],style:{color:"rgb(255, 85, 114)"}},{types:["operator"],style:{color:"rgb(137, 221, 255)"}},{types:["boolean"],style:{color:"rgb(255, 88, 116)"}},{types:["keyword"],style:{fontStyle:"italic"}},{types:["doctype"],style:{color:"rgb(199, 146, 234)",fontStyle:"italic"}},{types:["namespace"],style:{color:"rgb(178, 204, 214)"}},{types:["url"],style:{color:"rgb(221, 221, 221)"}}]},wu=_u,xu={plain:{color:"#9EFEFF",backgroundColor:"#2D2A55"},styles:[{types:["changed"],style:{color:"rgb(255, 238, 128)"}},{types:["deleted"],style:{color:"rgba(239, 83, 80, 0.56)"}},{types:["inserted"],style:{color:"rgb(173, 219, 103)"}},{types:["comment"],style:{color:"rgb(179, 98, 255)",fontStyle:"italic"}},{types:["punctuation"],style:{color:"rgb(255, 255, 255)"}},{types:["constant"],style:{color:"rgb(255, 98, 140)"}},{types:["string","url"],style:{color:"rgb(165, 255, 144)"}},{types:["variable"],style:{color:"rgb(255, 238, 128)"}},{types:["number","boolean"],style:{color:"rgb(255, 98, 140)"}},{types:["attr-name"],style:{color:"rgb(255, 180, 84)"}},{types:["keyword","operator","property","namespace","tag","selector","doctype"],style:{color:"rgb(255, 157, 0)"}},{types:["builtin","char","constant","function","class-name"],style:{color:"rgb(250, 208, 0)"}}]},ku=xu,Su={plain:{backgroundColor:"linear-gradient(to bottom, #2a2139 75%, #34294f)",backgroundImage:"#34294f",color:"#f92aad",textShadow:"0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3"},styles:[{types:["comment","block-comment","prolog","doctype","cdata"],style:{color:"#495495",fontStyle:"italic"}},{types:["punctuation"],style:{color:"#ccc"}},{types:["tag","attr-name","namespace","number","unit","hexcode","deleted"],style:{color:"#e2777a"}},{types:["property","selector"],style:{color:"#72f1b8",textShadow:"0 0 2px #100c0f, 0 0 10px #257c5575, 0 0 35px #21272475"}},{types:["function-name"],style:{color:"#6196cc"}},{types:["boolean","selector-id","function"],style:{color:"#fdfdfd",textShadow:"0 0 2px #001716, 0 0 3px #03edf975, 0 0 5px #03edf975, 0 0 8px #03edf975"}},{types:["class-name","maybe-class-name","builtin"],style:{color:"#fff5f6",textShadow:"0 0 2px #000, 0 0 10px #fc1f2c75, 0 0 5px #fc1f2c75, 0 0 25px #fc1f2c75"}},{types:["constant","symbol"],style:{color:"#f92aad",textShadow:"0 0 2px #100c0f, 0 0 5px #dc078e33, 0 0 10px #fff3"}},{types:["important","atrule","keyword","selector-class"],style:{color:"#f4eee4",textShadow:"0 0 2px #393a33, 0 0 8px #f39f0575, 0 0 2px #f39f0575"}},{types:["string","char","attr-value","regex","variable"],style:{color:"#f87c32"}},{types:["parameter"],style:{fontStyle:"italic"}},{types:["entity","url"],style:{color:"#67cdcc"}},{types:["operator"],style:{color:"ffffffee"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["entity"],style:{cursor:"help"}},{types:["inserted"],style:{color:"green"}}]},Eu=Su,Cu={plain:{color:"#282a2e",backgroundColor:"#ffffff"},styles:[{types:["comment"],style:{color:"rgb(197, 200, 198)"}},{types:["string","number","builtin","variable"],style:{color:"rgb(150, 152, 150)"}},{types:["class-name","function","tag","attr-name"],style:{color:"rgb(40, 42, 46)"}}]},Au=Cu,Tu={plain:{color:"#9CDCFE",backgroundColor:"#1E1E1E"},styles:[{types:["prolog"],style:{color:"rgb(0, 0, 128)"}},{types:["comment"],style:{color:"rgb(106, 153, 85)"}},{types:["builtin","changed","keyword","interpolation-punctuation"],style:{color:"rgb(86, 156, 214)"}},{types:["number","inserted"],style:{color:"rgb(181, 206, 168)"}},{types:["constant"],style:{color:"rgb(100, 102, 149)"}},{types:["attr-name","variable"],style:{color:"rgb(156, 220, 254)"}},{types:["deleted","string","attr-value","template-punctuation"],style:{color:"rgb(206, 145, 120)"}},{types:["selector"],style:{color:"rgb(215, 186, 125)"}},{types:["tag"],style:{color:"rgb(78, 201, 176)"}},{types:["tag"],languages:["markup"],style:{color:"rgb(86, 156, 214)"}},{types:["punctuation","operator"],style:{color:"rgb(212, 212, 212)"}},{types:["punctuation"],languages:["markup"],style:{color:"#808080"}},{types:["function"],style:{color:"rgb(220, 220, 170)"}},{types:["class-name"],style:{color:"rgb(78, 201, 176)"}},{types:["char"],style:{color:"rgb(209, 105, 105)"}}]},qo=Tu,Iu={plain:{color:"#000000",backgroundColor:"#ffffff"},styles:[{types:["comment"],style:{color:"rgb(0, 128, 0)"}},{types:["builtin"],style:{color:"rgb(0, 112, 193)"}},{types:["number","variable","inserted"],style:{color:"rgb(9, 134, 88)"}},{types:["operator"],style:{color:"rgb(0, 0, 0)"}},{types:["constant","char"],style:{color:"rgb(129, 31, 63)"}},{types:["tag"],style:{color:"rgb(128, 0, 0)"}},{types:["attr-name"],style:{color:"rgb(255, 0, 0)"}},{types:["deleted","string"],style:{color:"rgb(163, 21, 21)"}},{types:["changed","punctuation"],style:{color:"rgb(4, 81, 165)"}},{types:["function","keyword"],style:{color:"rgb(0, 0, 255)"}},{types:["class-name"],style:{color:"rgb(38, 127, 153)"}}]},Ru=Iu,Nu={plain:{color:"#f8fafc",backgroundColor:"#011627"},styles:[{types:["prolog"],style:{color:"#000080"}},{types:["comment"],style:{color:"#6A9955"}},{types:["builtin","changed","keyword","interpolation-punctuation"],style:{color:"#569CD6"}},{types:["number","inserted"],style:{color:"#B5CEA8"}},{types:["constant"],style:{color:"#f8fafc"}},{types:["attr-name","variable"],style:{color:"#9CDCFE"}},{types:["deleted","string","attr-value","template-punctuation"],style:{color:"#cbd5e1"}},{types:["selector"],style:{color:"#D7BA7D"}},{types:["tag"],style:{color:"#0ea5e9"}},{types:["tag"],languages:["markup"],style:{color:"#0ea5e9"}},{types:["punctuation","operator"],style:{color:"#D4D4D4"}},{types:["punctuation"],languages:["markup"],style:{color:"#808080"}},{types:["function"],style:{color:"#7dd3fc"}},{types:["class-name"],style:{color:"#0ea5e9"}},{types:["char"],style:{color:"#D16969"}}]},ju=Nu,Pu={plain:{color:"#0f172a",backgroundColor:"#f1f5f9"},styles:[{types:["prolog"],style:{color:"#000080"}},{types:["comment"],style:{color:"#6A9955"}},{types:["builtin","changed","keyword","interpolation-punctuation"],style:{color:"#0c4a6e"}},{types:["number","inserted"],style:{color:"#B5CEA8"}},{types:["constant"],style:{color:"#0f172a"}},{types:["attr-name","variable"],style:{color:"#0c4a6e"}},{types:["deleted","string","attr-value","template-punctuation"],style:{color:"#64748b"}},{types:["selector"],style:{color:"#D7BA7D"}},{types:["tag"],style:{color:"#0ea5e9"}},{types:["tag"],languages:["markup"],style:{color:"#0ea5e9"}},{types:["punctuation","operator"],style:{color:"#475569"}},{types:["punctuation"],languages:["markup"],style:{color:"#808080"}},{types:["function"],style:{color:"#0e7490"}},{types:["class-name"],style:{color:"#0ea5e9"}},{types:["char"],style:{color:"#D16969"}}]},Ou=Pu,Mu={plain:{backgroundColor:"hsl(220, 13%, 18%)",color:"hsl(220, 14%, 71%)",textShadow:"0 1px rgba(0, 0, 0, 0.3)"},styles:[{types:["comment","prolog","cdata"],style:{color:"hsl(220, 10%, 40%)"}},{types:["doctype","punctuation","entity"],style:{color:"hsl(220, 14%, 71%)"}},{types:["attr-name","class-name","maybe-class-name","boolean","constant","number","atrule"],style:{color:"hsl(29, 54%, 61%)"}},{types:["keyword"],style:{color:"hsl(286, 60%, 67%)"}},{types:["property","tag","symbol","deleted","important"],style:{color:"hsl(355, 65%, 65%)"}},{types:["selector","string","char","builtin","inserted","regex","attr-value"],style:{color:"hsl(95, 38%, 62%)"}},{types:["variable","operator","function"],style:{color:"hsl(207, 82%, 66%)"}},{types:["url"],style:{color:"hsl(187, 47%, 55%)"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"hsl(220, 14%, 71%)"}}]},Du=Mu,Fu={plain:{backgroundColor:"hsl(230, 1%, 98%)",color:"hsl(230, 8%, 24%)"},styles:[{types:["comment","prolog","cdata"],style:{color:"hsl(230, 4%, 64%)"}},{types:["doctype","punctuation","entity"],style:{color:"hsl(230, 8%, 24%)"}},{types:["attr-name","class-name","boolean","constant","number","atrule"],style:{color:"hsl(35, 99%, 36%)"}},{types:["keyword"],style:{color:"hsl(301, 63%, 40%)"}},{types:["property","tag","symbol","deleted","important"],style:{color:"hsl(5, 74%, 59%)"}},{types:["selector","string","char","builtin","inserted","regex","attr-value","punctuation"],style:{color:"hsl(119, 34%, 47%)"}},{types:["variable","operator","function"],style:{color:"hsl(221, 87%, 60%)"}},{types:["url"],style:{color:"hsl(198, 99%, 37%)"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"hsl(230, 8%, 24%)"}}]},$u=Fu,Lu={plain:{color:"#ebdbb2",backgroundColor:"#292828"},styles:[{types:["imports","class-name","maybe-class-name","constant","doctype","builtin","function"],style:{color:"#d8a657"}},{types:["property-access"],style:{color:"#7daea3"}},{types:["tag"],style:{color:"#e78a4e"}},{types:["attr-name","char","url","regex"],style:{color:"#a9b665"}},{types:["attr-value","string"],style:{color:"#89b482"}},{types:["comment","prolog","cdata","operator","inserted"],style:{color:"#a89984"}},{types:["delimiter","boolean","keyword","selector","important","atrule","property","variable","deleted"],style:{color:"#ea6962"}},{types:["entity","number","symbol"],style:{color:"#d3869b"}}]},Bu=Lu,Uu={plain:{color:"#654735",backgroundColor:"#f9f5d7"},styles:[{types:["delimiter","boolean","keyword","selector","important","atrule","property","variable","deleted"],style:{color:"#af2528"}},{types:["imports","class-name","maybe-class-name","constant","doctype","builtin"],style:{color:"#b4730e"}},{types:["string","attr-value"],style:{color:"#477a5b"}},{types:["property-access"],style:{color:"#266b79"}},{types:["function","attr-name","char","url"],style:{color:"#72761e"}},{types:["tag"],style:{color:"#b94c07"}},{types:["comment","prolog","cdata","operator","inserted"],style:{color:"#a89984"}},{types:["entity","number","symbol"],style:{color:"#924f79"}}]},Zu=Uu,zu=e=>v.useCallback(t=>{var n=t,{className:r,style:a,line:o}=n,s=Go(n,["className","style","line"]);const i=tr(Fe({},s),{className:$o("token-line",r)});return typeof e=="object"&&"plain"in e&&(i.style=e.plain),typeof a=="object"&&(i.style=Fe(Fe({},i.style||{}),a)),i},[e]),Vu=e=>{const t=v.useCallback(({types:n,empty:r})=>{if(e!=null){{if(n.length===1&&n[0]==="plain")return r!=null?{display:"inline-block"}:void 0;if(n.length===1&&r!=null)return e[n[0]]}return Object.assign(r!=null?{display:"inline-block"}:{},...n.map(a=>e[a]))}},[e]);return v.useCallback(n=>{var r=n,{token:a,className:o,style:s}=r,i=Go(r,["token","className","style"]);const l=tr(Fe({},i),{className:$o("token",...a.types,o),children:a.content,style:t(a)});return s!=null&&(l.style=Fe(Fe({},l.style||{}),s)),l},[t])},Gu=/\r\n|\r|\n/,Xa=e=>{e.length===0?e.push({types:["plain"],content:`
`,empty:!0}):e.length===1&&e[0].content===""&&(e[0].content=`
`,e[0].empty=!0)},Qa=(e,t)=>{const n=e.length;return n>0&&e[n-1]===t?e:e.concat(t)},Hu=e=>{const t=[[]],n=[e],r=[0],a=[e.length];let o=0,s=0,i=[];const l=[i];for(;s>-1;){for(;(o=r[s]++)<a[s];){let c,u=t[s];const h=n[s][o];if(typeof h=="string"?(u=s>0?u:["plain"],c=h):(u=Qa(u,h.type),h.alias&&(u=Qa(u,h.alias)),c=h.content),typeof c!="string"){s++,t.push(u),n.push(c),r.push(0),a.push(c.length);continue}const b=c.split(Gu),f=b.length;i.push({types:u,content:b[0]});for(let g=1;g<f;g++)Xa(i),l.push(i=[]),i.push({types:u,content:b[g]})}s--,t.pop(),n.pop(),r.pop(),a.pop()}return Xa(i),l},eo=Hu,qu=({prism:e,code:t,grammar:n,language:r})=>v.useMemo(()=>{if(n==null)return eo([t]);const a={code:t,grammar:n,language:r,tokens:[]};return e.hooks.run("before-tokenize",a),a.tokens=e.tokenize(t,n),e.hooks.run("after-tokenize",a),eo(a.tokens)},[t,n,r,e]),Wu=(e,t)=>{const{plain:n}=e,r=e.styles.reduce((a,o)=>{const{languages:s,style:i}=o;return s&&!s.includes(t)||o.types.forEach(l=>{const c=Fe(Fe({},a[l]),i);a[l]=c}),a},{});return r.root=n,r.plain=tr(Fe({},n),{backgroundColor:void 0}),r},Ku=Wu,Yu=({children:e,language:t,code:n,theme:r,prism:a})=>{const o=t.toLowerCase(),s=Ku(r,o),i=zu(s),l=Vu(s),c=a.languages[o],u=qu({prism:a,language:o,code:n,grammar:c});return e({tokens:u,className:`prism-code language-${o}`,style:s!=null?s.root:{},getLineProps:i,getTokenProps:l})},Ju=e=>v.createElement(Yu,tr(Fe({},e),{prism:e.prism||k,theme:e.theme||qo,code:e.code,language:e.language}));/*! Bundled license information:

prismjs/prism.js:
  (**
   * Prism: Lightweight, robust, elegant syntax highlighting
   *
   * @license MIT <https://opensource.org/licenses/MIT>
   * @author Lea Verou <https://lea.verou.me>
   * @namespace
   * @public
   *)
*/const Xu=`
You are CodeSmart Bot, a friendly and conversational AI helper for students solving LeetCode problems. Your goal is to guide students step-by-step toward a solution without giving the full answer immediately.

Input Context:

Problem Statement: {{problem_statement}}
User Code: {{user_code}}
Programming Language: {{programming_language}}

Your Tasks:

Analyze User Code:

- Spot mistakes or inefficiencies in {{user_code}}.
- Start with small feedback and ask friendly follow-up questions, like where the user needs help.
- Keep the conversation flowing naturally, like you're chatting with a friend. 😊

Provide Hints:

- Share concise, relevant hints based on {{problem_statement}}.
- Let the user lead the conversation—give hints only when necessary.
- Avoid overwhelming the user with too many hints at once.

Suggest Code Snippets:

- Share tiny, focused code snippets only when they're needed to illustrate a point.

Output Requirements:

- Keep the feedback short, friendly, and easy to understand.
- snippet should always be code only and is optional.
- Do not say hey everytime
- Keep making feedback more personal and short overrime.
- Limit the words in feedback. Only give what is really required to the user as feedback.
- Hints must be crisp, short and clear

Tone & Style:

- Be kind, supportive, and approachable.
- Use emojis like 🌟, 🙌, or ✅ to make the conversation fun and engaging.
- Avoid long, formal responses—be natural and conversational.

`;function Qu(e){return Array.from(e).map(n=>n.textContent||"").join(`
`)}function ed(e,t){return v.useReducer((n,r)=>t[n][r]??n,e)}var Ue=e=>{const{present:t,children:n}=e,r=td(t),a=typeof n=="function"?n({present:r.isPresent}):v.Children.only(n),o=xe(r.ref,nd(a));return typeof n=="function"||r.isPresent?v.cloneElement(a,{ref:o}):null};Ue.displayName="Presence";function td(e){const[t,n]=v.useState(),r=v.useRef({}),a=v.useRef(e),o=v.useRef("none"),s=e?"mounted":"unmounted",[i,l]=ed(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const c=xn(r.current);o.current=i==="mounted"?c:"none"},[i]),An(()=>{const c=r.current,u=a.current;if(u!==e){const h=o.current,b=xn(c);e?l("MOUNT"):b==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==b?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,l]),An(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,d=b=>{const g=xn(r.current).includes(b.animationName);if(b.target===t&&g&&(l("ANIMATION_END"),!a.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},h=b=>{b.target===t&&(o.current=xn(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:v.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function xn(e){return(e==null?void 0:e.animationName)||"none"}function nd(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var da="Collapsible",[rd,Wo]=Ct(da),[ad,pa]=rd(da),Ko=v.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:o,onOpenChange:s,...i}=e,[l=!1,c]=At({prop:r,defaultProp:a,onChange:s});return p.jsx(ad,{scope:n,disabled:o,contentId:lt(),open:l,onOpenToggle:v.useCallback(()=>c(u=>!u),[c]),children:p.jsx(he.div,{"data-state":ma(l),"data-disabled":o?"":void 0,...i,ref:t})})});Ko.displayName=da;var Yo="CollapsibleTrigger",Jo=v.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=pa(Yo,n);return p.jsx(he.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":ma(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:U(e.onClick,a.onOpenToggle)})});Jo.displayName=Yo;var fa="CollapsibleContent",Xo=v.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=pa(fa,e.__scopeCollapsible);return p.jsx(Ue,{present:n||a.open,children:({present:o})=>p.jsx(od,{...r,ref:t,present:o})})});Xo.displayName=fa;var od=v.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...o}=e,s=pa(fa,n),[i,l]=v.useState(r),c=v.useRef(null),u=xe(t,c),d=v.useRef(0),h=d.current,b=v.useRef(0),f=b.current,g=s.open||i,y=v.useRef(g),w=v.useRef(void 0);return v.useEffect(()=>{const _=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(_)},[]),An(()=>{const _=c.current;if(_){w.current=w.current||{transitionDuration:_.style.transitionDuration,animationName:_.style.animationName},_.style.transitionDuration="0s",_.style.animationName="none";const x=_.getBoundingClientRect();d.current=x.height,b.current=x.width,y.current||(_.style.transitionDuration=w.current.transitionDuration,_.style.animationName=w.current.animationName),l(r)}},[s.open,r]),p.jsx(he.div,{"data-state":ma(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!g,...o,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":f?`${f}px`:void 0,...e.style},children:g&&a})});function ma(e){return e?"open":"closed"}var sd=Ko,id=Jo,ld=Xo,He="Accordion",cd=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ga,ud,dd]=ca(He),[nr,Iv]=Ct(He,[dd,Wo]),ha=Wo(),Qo=ae.forwardRef((e,t)=>{const{type:n,...r}=e,a=r,o=r;return p.jsx(ga.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?p.jsx(gd,{...o,ref:t}):p.jsx(md,{...a,ref:t})})});Qo.displayName=He;var[es,pd]=nr(He),[ts,fd]=nr(He,{collapsible:!1}),md=ae.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},collapsible:o=!1,...s}=e,[i,l]=At({prop:n,defaultProp:r,onChange:a});return p.jsx(es,{scope:e.__scopeAccordion,value:i?[i]:[],onItemOpen:l,onItemClose:ae.useCallback(()=>o&&l(""),[o,l]),children:p.jsx(ts,{scope:e.__scopeAccordion,collapsible:o,children:p.jsx(ns,{...s,ref:t})})})}),gd=ae.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},...o}=e,[s=[],i]=At({prop:n,defaultProp:r,onChange:a}),l=ae.useCallback(u=>i((d=[])=>[...d,u]),[i]),c=ae.useCallback(u=>i((d=[])=>d.filter(h=>h!==u)),[i]);return p.jsx(es,{scope:e.__scopeAccordion,value:s,onItemOpen:l,onItemClose:c,children:p.jsx(ts,{scope:e.__scopeAccordion,collapsible:!0,children:p.jsx(ns,{...o,ref:t})})})}),[hd,rr]=nr(He),ns=ae.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:a,orientation:o="vertical",...s}=e,i=ae.useRef(null),l=xe(i,t),c=ud(n),d=Qn(a)==="ltr",h=U(e.onKeyDown,b=>{var O;if(!cd.includes(b.key))return;const f=b.target,g=c().filter(I=>{var F;return!((F=I.ref.current)!=null&&F.disabled)}),y=g.findIndex(I=>I.ref.current===f),w=g.length;if(y===-1)return;b.preventDefault();let _=y;const x=0,T=w-1,j=()=>{_=y+1,_>T&&(_=x)},N=()=>{_=y-1,_<x&&(_=T)};switch(b.key){case"Home":_=x;break;case"End":_=T;break;case"ArrowRight":o==="horizontal"&&(d?j():N());break;case"ArrowDown":o==="vertical"&&j();break;case"ArrowLeft":o==="horizontal"&&(d?N():j());break;case"ArrowUp":o==="vertical"&&N();break}const M=_%w;(O=g[M].ref.current)==null||O.focus()});return p.jsx(hd,{scope:n,disabled:r,direction:a,orientation:o,children:p.jsx(ga.Slot,{scope:n,children:p.jsx(he.div,{...s,"data-orientation":o,ref:l,onKeyDown:r?void 0:h})})})}),Nn="AccordionItem",[yd,ya]=nr(Nn),rs=ae.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...a}=e,o=rr(Nn,n),s=pd(Nn,n),i=ha(n),l=lt(),c=r&&s.value.includes(r)||!1,u=o.disabled||e.disabled;return p.jsx(yd,{scope:n,open:c,disabled:u,triggerId:l,children:p.jsx(sd,{"data-orientation":o.orientation,"data-state":cs(c),...i,...a,ref:t,disabled:u,open:c,onOpenChange:d=>{d?s.onItemOpen(r):s.onItemClose(r)}})})});rs.displayName=Nn;var as="AccordionHeader",os=ae.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=rr(He,n),o=ya(as,n);return p.jsx(he.h3,{"data-orientation":a.orientation,"data-state":cs(o.open),"data-disabled":o.disabled?"":void 0,...r,ref:t})});os.displayName=as;var Sr="AccordionTrigger",ss=ae.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=rr(He,n),o=ya(Sr,n),s=fd(Sr,n),i=ha(n);return p.jsx(ga.ItemSlot,{scope:n,children:p.jsx(id,{"aria-disabled":o.open&&!s.collapsible||void 0,"data-orientation":a.orientation,id:o.triggerId,...i,...r,ref:t})})});ss.displayName=Sr;var is="AccordionContent",ls=ae.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=rr(He,n),o=ya(is,n),s=ha(n);return p.jsx(ld,{role:"region","aria-labelledby":o.triggerId,"data-orientation":a.orientation,...s,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});ls.displayName=is;function cs(e){return e?"open":"closed"}var vd=Qo,bd=rs,_d=os,us=ss,ds=ls;const wd=vd,Er=v.forwardRef(({className:e,...t},n)=>p.jsx(bd,{ref:n,className:fe("border-b",e),...t}));Er.displayName="AccordionItem";const Cr=v.forwardRef(({className:e,children:t,...n},r)=>p.jsx(_d,{className:"flex",children:p.jsxs(us,{ref:r,className:fe("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,p.jsx(Uc,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));Cr.displayName=us.displayName;const Ar=v.forwardRef(({className:e,children:t,...n},r)=>p.jsx(ds,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:p.jsx("div",{className:fe("pb-4 pt-0",e),children:t})}));Ar.displayName=ds.displayName;const va=v.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:fe("rounded-xl border bg-card text-card-foreground shadow",e),...t}));va.displayName="Card";const xd=v.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:fe("flex flex-col space-y-1.5 p-6",e),...t}));xd.displayName="CardHeader";const kd=v.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:fe("font-semibold leading-none tracking-tight",e),...t}));kd.displayName="CardTitle";const Sd=v.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:fe("text-sm text-muted-foreground",e),...t}));Sd.displayName="CardDescription";const ba=v.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:fe("p-6 pt-0",e),...t}));ba.displayName="CardContent";const ps=v.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:fe("flex items-center p-6 pt-0",e),...t}));ps.displayName="CardFooter";var fs="vercel.ai.error",Ed=Symbol.for(fs),ms,Cd=class gs extends Error{constructor({name:t,message:n,cause:r}){super(n),this[ms]=!0,this.name=t,this.cause=r}static isInstance(t){return gs.hasMarker(t,fs)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}toJSON(){return{name:this.name,message:this.message}}};ms=Ed;var W=Cd,Tr="AI_APICallError",hs=`vercel.ai.error.${Tr}`,Ad=Symbol.for(hs),ys,De=class extends W{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:o,cause:s,isRetryable:i=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:Tr,message:e,cause:s}),this[ys]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=o,this.isRetryable=i,this.data=l}static isInstance(e){return W.hasMarker(e,hs)}static isAPICallError(e){return e instanceof Error&&e.name===Tr&&typeof e.url=="string"&&typeof e.requestBodyValues=="object"&&(e.statusCode==null||typeof e.statusCode=="number")&&(e.responseHeaders==null||typeof e.responseHeaders=="object")&&(e.responseBody==null||typeof e.responseBody=="string")&&(e.cause==null||typeof e.cause=="object")&&typeof e.isRetryable=="boolean"&&(e.data==null||typeof e.data=="object")}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};ys=Ad;var Ir="AI_EmptyResponseBodyError",vs=`vercel.ai.error.${Ir}`,Td=Symbol.for(vs),bs,Id=class extends W{constructor({message:e="Empty response body"}={}){super({name:Ir,message:e}),this[bs]=!0}static isInstance(e){return W.hasMarker(e,vs)}static isEmptyResponseBodyError(e){return e instanceof Error&&e.name===Ir}};bs=Td;function _s(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var ws="AI_InvalidArgumentError",xs=`vercel.ai.error.${ws}`,Rd=Symbol.for(xs),ks,Nd=class extends W{constructor({message:t,cause:n,argument:r}){super({name:ws,message:t,cause:n}),this[ks]=!0,this.argument=r}static isInstance(t){return W.hasMarker(t,xs)}};ks=Rd;var Rr="AI_InvalidPromptError",Ss=`vercel.ai.error.${Rr}`,jd=Symbol.for(Ss),Es,at=class extends W{constructor({prompt:e,message:t,cause:n}){super({name:Rr,message:`Invalid prompt: ${t}`,cause:n}),this[Es]=!0,this.prompt=e}static isInstance(e){return W.hasMarker(e,Ss)}static isInvalidPromptError(e){return e instanceof Error&&e.name===Rr&&prompt!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,prompt:this.prompt}}};Es=jd;var Nr="AI_InvalidResponseDataError",Cs=`vercel.ai.error.${Nr}`,Pd=Symbol.for(Cs),As,dr=class extends W{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:Nr,message:t}),this[As]=!0,this.data=e}static isInstance(e){return W.hasMarker(e,Cs)}static isInvalidResponseDataError(e){return e instanceof Error&&e.name===Nr&&e.data!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,data:this.data}}};As=Pd;var jr="AI_JSONParseError",Ts=`vercel.ai.error.${jr}`,Od=Symbol.for(Ts),Is,jn=class extends W{constructor({text:e,cause:t}){super({name:jr,message:`JSON parsing failed: Text: ${e}.
Error message: ${_s(t)}`,cause:t}),this[Is]=!0,this.text=e}static isInstance(e){return W.hasMarker(e,Ts)}static isJSONParseError(e){return e instanceof Error&&e.name===jr&&"text"in e&&typeof e.text=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};Is=Od;var Pr="AI_LoadAPIKeyError",Rs=`vercel.ai.error.${Pr}`,Md=Symbol.for(Rs),Ns,kn=class extends W{constructor({message:e}){super({name:Pr,message:e}),this[Ns]=!0}static isInstance(e){return W.hasMarker(e,Rs)}static isLoadAPIKeyError(e){return e instanceof Error&&e.name===Pr}};Ns=Md;var Or="AI_TooManyEmbeddingValuesForCallError",js=`vercel.ai.error.${Or}`,Dd=Symbol.for(js),Ps,Os=class extends W{constructor(e){super({name:Or,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[Ps]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return W.hasMarker(e,js)}static isTooManyEmbeddingValuesForCallError(e){return e instanceof Error&&e.name===Or&&"provider"in e&&typeof e.provider=="string"&&"modelId"in e&&typeof e.modelId=="string"&&"maxEmbeddingsPerCall"in e&&typeof e.maxEmbeddingsPerCall=="number"&&"values"in e&&Array.isArray(e.values)}toJSON(){return{name:this.name,message:this.message,stack:this.stack,provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:this.values}}};Ps=Dd;var Mr="AI_TypeValidationError",Ms=`vercel.ai.error.${Mr}`,Fd=Symbol.for(Ms),Ds,$d=class Dr extends W{constructor({value:t,cause:n}){super({name:Mr,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${_s(n)}`,cause:n}),this[Ds]=!0,this.value=t}static isInstance(t){return W.hasMarker(t,Ms)}static wrap({value:t,cause:n}){return Dr.isInstance(n)&&n.value===t?n:new Dr({value:t,cause:n})}static isTypeValidationError(t){return t instanceof Error&&t.name===Mr}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};Ds=Fd;var Ke=$d,Fr="AI_UnsupportedFunctionalityError",Fs=`vercel.ai.error.${Fr}`,Ld=Symbol.for(Fs),$s,pe=class extends W{constructor({functionality:e}){super({name:Fr,message:`'${e}' functionality not supported.`}),this[$s]=!0,this.functionality=e}static isInstance(e){return W.hasMarker(e,Fs)}static isUnsupportedFunctionalityError(e){return e instanceof Error&&e.name===Fr&&typeof e.functionality=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}};$s=Ld;function Pn(e){return e===null||typeof e=="string"||typeof e=="number"||typeof e=="boolean"?!0:Array.isArray(e)?e.every(Pn):typeof e=="object"?Object.entries(e).every(([t,n])=>typeof t=="string"&&Pn(n)):!1}function to(e){return Array.isArray(e)&&e.every(Pn)}function $r(e){return e!=null&&typeof e=="object"&&Object.entries(e).every(([t,n])=>typeof t=="string"&&Pn(n))}let Bd=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var Tt={exports:{}};const Ud=typeof Buffer<"u",no=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,ro=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function Ls(e,t,n){n==null&&t!==null&&typeof t=="object"&&(n=t,t=void 0),Ud&&Buffer.isBuffer(e)&&(e=e.toString()),e&&e.charCodeAt(0)===65279&&(e=e.slice(1));const r=JSON.parse(e,t);if(r===null||typeof r!="object")return r;const a=n&&n.protoAction||"error",o=n&&n.constructorAction||"error";if(a==="ignore"&&o==="ignore")return r;if(a!=="ignore"&&o!=="ignore"){if(no.test(e)===!1&&ro.test(e)===!1)return r}else if(a!=="ignore"&&o==="ignore"){if(no.test(e)===!1)return r}else if(ro.test(e)===!1)return r;return Bs(r,{protoAction:a,constructorAction:o,safe:n&&n.safe})}function Bs(e,{protoAction:t="error",constructorAction:n="error",safe:r}={}){let a=[e];for(;a.length;){const o=a;a=[];for(const s of o){if(t!=="ignore"&&Object.prototype.hasOwnProperty.call(s,"__proto__")){if(r===!0)return null;if(t==="error")throw new SyntaxError("Object contains forbidden prototype property");delete s.__proto__}if(n!=="ignore"&&Object.prototype.hasOwnProperty.call(s,"constructor")&&Object.prototype.hasOwnProperty.call(s.constructor,"prototype")){if(r===!0)return null;if(n==="error")throw new SyntaxError("Object contains forbidden prototype property");delete s.constructor}for(const i in s){const l=s[i];l&&typeof l=="object"&&a.push(l)}}}return e}function _a(e,t,n){const r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return Ls(e,t,n)}finally{Error.stackTraceLimit=r}}function Zd(e,t){const n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return Ls(e,t,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=n}}Tt.exports=_a;Tt.exports.default=_a;Tt.exports.parse=_a;Tt.exports.safeParse=Zd;Tt.exports.scan=Bs;var zd=Tt.exports;const wa=mc(zd);function Vd(e){let t,n,r,a,o,s,i;return l(),{feed:c,reset:l};function l(){t=!0,n="",r=0,a=-1,o=void 0,s=void 0,i=""}function c(d){n=n?n+d:d,t&&Gd(n)&&(n=n.slice(Us.length)),t=!1;const h=n.length;let b=0,f=!1;for(;b<h;){f&&(n[b]===`
`&&++b,f=!1);let g=-1,y=a,w;for(let _=r;g<0&&_<h;++_)w=n[_],w===":"&&y<0?y=_-b:w==="\r"?(f=!0,g=_-b):w===`
`&&(g=_-b);if(g<0){r=h-b,a=y;break}else r=0,a=-1;u(n,b,y,g),b+=g+1}b===h?n="":b>0&&(n=n.slice(b))}function u(d,h,b,f){if(f===0){i.length>0&&(e({type:"event",id:o,event:s||void 0,data:i.slice(0,-1)}),i="",o=void 0),s=void 0;return}const g=b<0,y=d.slice(h,h+(g?f:b));let w=0;g?w=f:d[h+b+1]===" "?w=b+2:w=b+1;const _=h+w,x=f-w,T=d.slice(_,_+x).toString();if(y==="data")i+=T?"".concat(T,`
`):`
`;else if(y==="event")s=T;else if(y==="id"&&!T.includes("\0"))o=T;else if(y==="retry"){const j=parseInt(T,10);Number.isNaN(j)||e({type:"reconnect-interval",value:j})}}}const Us=[239,187,191];function Gd(e){return Us.every((t,n)=>e.charCodeAt(n)===t)}class Hd extends TransformStream{constructor(){let t;super({start(n){t=Vd(r=>{r.type==="event"&&n.enqueue(r)})},transform(n){t.feed(n)}})}}var qd={};function Ye(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function ar(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var hn=({prefix:e,size:t=7,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Bd(n,t);if(e==null)return a;if(n.includes(r))throw new Nd({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return o=>`${e}${r}${a(o)}`},ht=hn();function Wd(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function Cn(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function Zs({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new kn({message:`${r} API key must be a string.`});if(typeof process>"u")throw new kn({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=qd[t],e==null)throw new kn({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new kn({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var On=Symbol.for("vercel.ai.validator");function Kd(e){return{[On]:!0,validate:e}}function Yd(e){return typeof e=="object"&&e!==null&&On in e&&e[On]===!0&&"validate"in e}function Jd(e){return Yd(e)?e:Xd(e)}function Xd(e){return Kd(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Qd({value:e,schema:t}){const n=wt({value:e,schema:t});if(!n.success)throw Ke.wrap({value:e,cause:n.error});return n.value}function wt({value:e,schema:t}){const n=Jd(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Ke.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Ke.wrap({value:e,cause:r})}}}function ep({text:e,schema:t}){try{const n=wa.parse(e);return t==null?n:Qd({value:n,schema:t})}catch(n){throw jn.isJSONParseError(n)||Ke.isTypeValidationError(n)?n:new jn({text:e,cause:n})}}function xa({text:e,schema:t}){try{const n=wa.parse(e);return t==null?{success:!0,value:n}:wt({value:n,schema:t})}catch(n){return{success:!1,error:jn.isJSONParseError(n)?n:new jn({text:e,cause:n})}}}function ao(e){try{return wa.parse(e),!0}catch{return!1}}function tp(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}var np=()=>globalThis.fetch,Je=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:o,fetch:s})=>rp({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:o,fetch:s}),rp=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:o,fetch:s=np()})=>{try{const i=await s(e,{method:"POST",headers:tp(t),body:n.content,signal:o}),l=ar(i);if(!i.ok){let c;try{c=await a({response:i,url:e,requestBodyValues:n.values})}catch(u){throw Cn(u)||De.isAPICallError(u)?u:new De({message:"Failed to process error response",cause:u,statusCode:i.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:i,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(Cn(c)||De.isAPICallError(c))?c:new De({message:"Failed to process successful response",cause:c,statusCode:i.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(i){if(Cn(i))throw i;if(i instanceof TypeError&&i.message==="fetch failed"){const l=i.cause;if(l!=null)throw new De({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw i}},zs=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:o})=>{const s=await r.text(),i=ar(r);if(s.trim()==="")return{responseHeaders:i,value:new De({message:r.statusText,url:a,requestBodyValues:o,statusCode:r.status,responseHeaders:i,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=ep({text:s,schema:e});return{responseHeaders:i,value:new De({message:t(l),url:a,requestBodyValues:o,statusCode:r.status,responseHeaders:i,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:i,value:new De({message:r.statusText,url:a,requestBodyValues:o,statusCode:r.status,responseHeaders:i,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},ka=e=>async({response:t})=>{const n=ar(t);if(t.body==null)throw new Id({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new Hd).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(xa({text:r,schema:e}))}}))}},yn=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),o=xa({text:a,schema:e}),s=ar(t);if(!o.success)throw new De({message:"Invalid JSON response",cause:o.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:o.value}},{btoa:ap,atob:op}=globalThis;function sp(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=op(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function Mn(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return ap(t)}function Vs(e){return e==null?void 0:e.replace(/\/$/,"")}var q;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const o={};for(const s of a)o[s]=s;return o},e.getValidEnumValues=a=>{const o=e.objectKeys(a).filter(i=>typeof a[a[i]]!="number"),s={};for(const i of o)s[i]=a[i];return e.objectValues(s)},e.objectValues=a=>e.objectKeys(a).map(function(o){return a[o]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const o=[];for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&o.push(s);return o},e.find=(a,o)=>{for(const s of a)if(o(s))return s},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,o=" | "){return a.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}e.joinValues=r,e.jsonStringifyReplacer=(a,o)=>typeof o=="bigint"?o.toString():o})(q||(q={}));var Lr;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(Lr||(Lr={}));const R=q.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ve=e=>{switch(typeof e){case"undefined":return R.undefined;case"string":return R.string;case"number":return isNaN(e)?R.nan:R.number;case"boolean":return R.boolean;case"function":return R.function;case"bigint":return R.bigint;case"symbol":return R.symbol;case"object":return Array.isArray(e)?R.array:e===null?R.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?R.promise:typeof Map<"u"&&e instanceof Map?R.map:typeof Set<"u"&&e instanceof Set?R.set:typeof Date<"u"&&e instanceof Date?R.date:R.object;default:return R.unknown}},E=q.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),ip=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Ee extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(o){return o.message},r={_errors:[]},a=o=>{for(const s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(a);else if(s.code==="invalid_return_type")a(s.returnTypeError);else if(s.code==="invalid_arguments")a(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let i=r,l=0;for(;l<s.path.length;){const c=s.path[l];l===s.path.length-1?(i[c]=i[c]||{_errors:[]},i[c]._errors.push(n(s))):i[c]=i[c]||{_errors:[]},i=i[c],l++}}};return a(this),r}static assert(t){if(!(t instanceof Ee))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,q.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ee.create=e=>new Ee(e);const xt=(e,t)=>{let n;switch(e.code){case E.invalid_type:e.received===R.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case E.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,q.jsonStringifyReplacer)}`;break;case E.unrecognized_keys:n=`Unrecognized key(s) in object: ${q.joinValues(e.keys,", ")}`;break;case E.invalid_union:n="Invalid input";break;case E.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${q.joinValues(e.options)}`;break;case E.invalid_enum_value:n=`Invalid enum value. Expected ${q.joinValues(e.options)}, received '${e.received}'`;break;case E.invalid_arguments:n="Invalid function arguments";break;case E.invalid_return_type:n="Invalid function return type";break;case E.invalid_date:n="Invalid date";break;case E.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:q.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case E.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case E.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case E.custom:n="Invalid input";break;case E.invalid_intersection_types:n="Intersection results could not be merged";break;case E.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case E.not_finite:n="Number must be finite";break;default:n=t.defaultError,q.assertNever(e)}return{message:n}};let Gs=xt;function lp(e){Gs=e}function Dn(){return Gs}const Fn=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,o=[...n,...a.path||[]],s={...a,path:o};if(a.message!==void 0)return{...a,path:o,message:a.message};let i="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)i=c(s,{data:t,defaultError:i}).message;return{...a,path:o,message:i}},cp=[];function A(e,t){const n=Dn(),r=Fn({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===xt?void 0:xt].filter(a=>!!a)});e.common.issues.push(r)}class ye{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return $;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const o=await a.key,s=await a.value;r.push({key:o,value:s})}return ye.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:o,value:s}=a;if(o.status==="aborted"||s.status==="aborted")return $;o.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||a.alwaysSet)&&(r[o.value]=s.value)}return{status:t.value,value:r}}}const $=Object.freeze({status:"aborted"}),vt=e=>({status:"dirty",value:e}),we=e=>({status:"valid",value:e}),Br=e=>e.status==="aborted",Ur=e=>e.status==="dirty",ut=e=>e.status==="valid",Mt=e=>typeof Promise<"u"&&e instanceof Promise;function $n(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function Hs(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var P;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(P||(P={}));var Nt,jt;class $e{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const oo=(e,t)=>{if(ut(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ee(e.common.issues);return this._error=n,this._error}}};function B(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(s,i)=>{var l,c;const{message:u}=e;return s.code==="invalid_enum_value"?{message:u??i.defaultError}:typeof i.data>"u"?{message:(l=u??r)!==null&&l!==void 0?l:i.defaultError}:s.code!=="invalid_type"?{message:i.defaultError}:{message:(c=u??n)!==null&&c!==void 0?c:i.defaultError}},description:a}}class Z{get description(){return this._def.description}_getType(t){return Ve(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Ve(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ye,ctx:{common:t.parent.common,data:t.data,parsedType:Ve(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Mt(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ve(t)},o=this._parseSync({data:t,path:a.path,parent:a});return oo(a,o)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ve(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:a});return ut(o)?{value:o.value}:{issues:a.common.issues}}catch(o){!((r=(n=o==null?void 0:o.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(o=>ut(o)?{value:o.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ve(t)},a=this._parse({data:t,path:r.path,parent:r}),o=await(Mt(a)?a:Promise.resolve(a));return oo(r,o)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,o)=>{const s=t(a),i=()=>o.addIssue({code:E.custom,...r(a)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(i(),!1)):s?!0:(i(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new Oe({schema:this,typeName:C.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Pe.create(this,this._def)}nullable(){return tt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return je.create(this)}promise(){return St.create(this,this._def)}or(t){return Lt.create([this,t],this._def)}and(t){return Bt.create(this,t,this._def)}transform(t){return new Oe({...B(this._def),schema:this,typeName:C.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Gt({...B(this._def),innerType:this,defaultValue:n,typeName:C.ZodDefault})}brand(){return new Sa({typeName:C.ZodBranded,type:this,...B(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Ht({...B(this._def),innerType:this,catchValue:n,typeName:C.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return vn.create(this,t)}readonly(){return qt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const up=/^c[^\s-]{8,}$/i,dp=/^[0-9a-z]+$/,pp=/^[0-9A-HJKMNP-TV-Z]{26}$/i,fp=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,mp=/^[a-z0-9_-]{21}$/i,gp=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,hp=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,yp=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,vp="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let pr;const bp=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_p=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,wp=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,xp=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,kp=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Sp=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,qs="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ep=new RegExp(`^${qs}$`);function Ws(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function Cp(e){return new RegExp(`^${Ws(e)}$`)}function Ks(e){let t=`${qs}T${Ws(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function Ap(e,t){return!!((t==="v4"||!t)&&bp.test(e)||(t==="v6"||!t)&&wp.test(e))}function Tp(e,t){if(!gp.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function Ip(e,t){return!!((t==="v4"||!t)&&_p.test(e)||(t==="v6"||!t)&&xp.test(e))}class Ne extends Z{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==R.string){const o=this._getOrReturnCtx(t);return A(o,{code:E.invalid_type,expected:R.string,received:o.parsedType}),$}const r=new ye;let a;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(a=this._getOrReturnCtx(t,a),A(a,{code:E.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")t.data.length>o.value&&(a=this._getOrReturnCtx(t,a),A(a,{code:E.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const s=t.data.length>o.value,i=t.data.length<o.value;(s||i)&&(a=this._getOrReturnCtx(t,a),s?A(a,{code:E.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):i&&A(a,{code:E.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")yp.test(t.data)||(a=this._getOrReturnCtx(t,a),A(a,{validation:"email",code:E.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")pr||(pr=new RegExp(vp,"u")),pr.test(t.data)||(a=this._getOrReturnCtx(t,a),A(a,{validation:"emoji",code:E.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")fp.test(t.data)||(a=this._getOrReturnCtx(t,a),A(a,{validation:"uuid",code:E.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")mp.test(t.data)||(a=this._getOrReturnCtx(t,a),A(a,{validation:"nanoid",code:E.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")up.test(t.data)||(a=this._getOrReturnCtx(t,a),A(a,{validation:"cuid",code:E.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")dp.test(t.data)||(a=this._getOrReturnCtx(t,a),A(a,{validation:"cuid2",code:E.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")pp.test(t.data)||(a=this._getOrReturnCtx(t,a),A(a,{validation:"ulid",code:E.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),A(a,{validation:"url",code:E.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),A(a,{validation:"regex",code:E.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(a=this._getOrReturnCtx(t,a),A(a,{code:E.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(a=this._getOrReturnCtx(t,a),A(a,{code:E.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(a=this._getOrReturnCtx(t,a),A(a,{code:E.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?Ks(o).test(t.data)||(a=this._getOrReturnCtx(t,a),A(a,{code:E.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?Ep.test(t.data)||(a=this._getOrReturnCtx(t,a),A(a,{code:E.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?Cp(o).test(t.data)||(a=this._getOrReturnCtx(t,a),A(a,{code:E.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?hp.test(t.data)||(a=this._getOrReturnCtx(t,a),A(a,{validation:"duration",code:E.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?Ap(t.data,o.version)||(a=this._getOrReturnCtx(t,a),A(a,{validation:"ip",code:E.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?Tp(t.data,o.alg)||(a=this._getOrReturnCtx(t,a),A(a,{validation:"jwt",code:E.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?Ip(t.data,o.version)||(a=this._getOrReturnCtx(t,a),A(a,{validation:"cidr",code:E.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?kp.test(t.data)||(a=this._getOrReturnCtx(t,a),A(a,{validation:"base64",code:E.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?Sp.test(t.data)||(a=this._getOrReturnCtx(t,a),A(a,{validation:"base64url",code:E.invalid_string,message:o.message}),r.dirty()):q.assertNever(o);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:E.invalid_string,...P.errToObj(r)})}_addCheck(t){return new Ne({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...P.errToObj(t)})}url(t){return this._addCheck({kind:"url",...P.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...P.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...P.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...P.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...P.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...P.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...P.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...P.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...P.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...P.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...P.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...P.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...P.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...P.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...P.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...P.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...P.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...P.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...P.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...P.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...P.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...P.errToObj(n)})}nonempty(t){return this.min(1,P.errToObj(t))}trim(){return new Ne({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ne({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ne({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ne.create=e=>{var t;return new Ne({checks:[],typeName:C.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...B(e)})};function Rp(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,o=parseInt(e.toFixed(a).replace(".","")),s=parseInt(t.toFixed(a).replace(".",""));return o%s/Math.pow(10,a)}class Xe extends Z{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==R.number){const o=this._getOrReturnCtx(t);return A(o,{code:E.invalid_type,expected:R.number,received:o.parsedType}),$}let r;const a=new ye;for(const o of this._def.checks)o.kind==="int"?q.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),A(r,{code:E.invalid_type,expected:"integer",received:"float",message:o.message}),a.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),A(r,{code:E.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),A(r,{code:E.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="multipleOf"?Rp(t.data,o.value)!==0&&(r=this._getOrReturnCtx(t,r),A(r,{code:E.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),A(r,{code:E.not_finite,message:o.message}),a.dirty()):q.assertNever(o);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,P.toString(n))}gt(t,n){return this.setLimit("min",t,!1,P.toString(n))}lte(t,n){return this.setLimit("max",t,!0,P.toString(n))}lt(t,n){return this.setLimit("max",t,!1,P.toString(n))}setLimit(t,n,r,a){return new Xe({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:P.toString(a)}]})}_addCheck(t){return new Xe({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:P.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:P.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:P.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:P.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:P.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:P.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:P.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:P.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:P.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&q.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Xe.create=e=>new Xe({checks:[],typeName:C.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...B(e)});class Qe extends Z{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==R.bigint)return this._getInvalidInput(t);let r;const a=new ye;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),A(r,{code:E.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),A(r,{code:E.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),A(r,{code:E.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):q.assertNever(o);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return A(n,{code:E.invalid_type,expected:R.bigint,received:n.parsedType}),$}gte(t,n){return this.setLimit("min",t,!0,P.toString(n))}gt(t,n){return this.setLimit("min",t,!1,P.toString(n))}lte(t,n){return this.setLimit("max",t,!0,P.toString(n))}lt(t,n){return this.setLimit("max",t,!1,P.toString(n))}setLimit(t,n,r,a){return new Qe({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:P.toString(a)}]})}_addCheck(t){return new Qe({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:P.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:P.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:P.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:P.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:P.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Qe.create=e=>{var t;return new Qe({checks:[],typeName:C.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...B(e)})};class Dt extends Z{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==R.boolean){const r=this._getOrReturnCtx(t);return A(r,{code:E.invalid_type,expected:R.boolean,received:r.parsedType}),$}return we(t.data)}}Dt.create=e=>new Dt({typeName:C.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...B(e)});class dt extends Z{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==R.date){const o=this._getOrReturnCtx(t);return A(o,{code:E.invalid_type,expected:R.date,received:o.parsedType}),$}if(isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return A(o,{code:E.invalid_date}),$}const r=new ye;let a;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(a=this._getOrReturnCtx(t,a),A(a,{code:E.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(a=this._getOrReturnCtx(t,a),A(a,{code:E.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):q.assertNever(o);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new dt({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:P.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:P.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}dt.create=e=>new dt({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:C.ZodDate,...B(e)});class Ln extends Z{_parse(t){if(this._getType(t)!==R.symbol){const r=this._getOrReturnCtx(t);return A(r,{code:E.invalid_type,expected:R.symbol,received:r.parsedType}),$}return we(t.data)}}Ln.create=e=>new Ln({typeName:C.ZodSymbol,...B(e)});class Ft extends Z{_parse(t){if(this._getType(t)!==R.undefined){const r=this._getOrReturnCtx(t);return A(r,{code:E.invalid_type,expected:R.undefined,received:r.parsedType}),$}return we(t.data)}}Ft.create=e=>new Ft({typeName:C.ZodUndefined,...B(e)});class $t extends Z{_parse(t){if(this._getType(t)!==R.null){const r=this._getOrReturnCtx(t);return A(r,{code:E.invalid_type,expected:R.null,received:r.parsedType}),$}return we(t.data)}}$t.create=e=>new $t({typeName:C.ZodNull,...B(e)});class kt extends Z{constructor(){super(...arguments),this._any=!0}_parse(t){return we(t.data)}}kt.create=e=>new kt({typeName:C.ZodAny,...B(e)});class st extends Z{constructor(){super(...arguments),this._unknown=!0}_parse(t){return we(t.data)}}st.create=e=>new st({typeName:C.ZodUnknown,...B(e)});class Ge extends Z{_parse(t){const n=this._getOrReturnCtx(t);return A(n,{code:E.invalid_type,expected:R.never,received:n.parsedType}),$}}Ge.create=e=>new Ge({typeName:C.ZodNever,...B(e)});class Bn extends Z{_parse(t){if(this._getType(t)!==R.undefined){const r=this._getOrReturnCtx(t);return A(r,{code:E.invalid_type,expected:R.void,received:r.parsedType}),$}return we(t.data)}}Bn.create=e=>new Bn({typeName:C.ZodVoid,...B(e)});class je extends Z{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==R.array)return A(n,{code:E.invalid_type,expected:R.array,received:n.parsedType}),$;if(a.exactLength!==null){const s=n.data.length>a.exactLength.value,i=n.data.length<a.exactLength.value;(s||i)&&(A(n,{code:s?E.too_big:E.too_small,minimum:i?a.exactLength.value:void 0,maximum:s?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(A(n,{code:E.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(A(n,{code:E.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,i)=>a.type._parseAsync(new $e(n,s,n.path,i)))).then(s=>ye.mergeArray(r,s));const o=[...n.data].map((s,i)=>a.type._parseSync(new $e(n,s,n.path,i)));return ye.mergeArray(r,o)}get element(){return this._def.type}min(t,n){return new je({...this._def,minLength:{value:t,message:P.toString(n)}})}max(t,n){return new je({...this._def,maxLength:{value:t,message:P.toString(n)}})}length(t,n){return new je({...this._def,exactLength:{value:t,message:P.toString(n)}})}nonempty(t){return this.min(1,t)}}je.create=(e,t)=>new je({type:e,minLength:null,maxLength:null,exactLength:null,typeName:C.ZodArray,...B(t)});function yt(e){if(e instanceof le){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Pe.create(yt(r))}return new le({...e._def,shape:()=>t})}else return e instanceof je?new je({...e._def,type:yt(e.element)}):e instanceof Pe?Pe.create(yt(e.unwrap())):e instanceof tt?tt.create(yt(e.unwrap())):e instanceof Le?Le.create(e.items.map(t=>yt(t))):e}class le extends Z{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=q.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==R.object){const c=this._getOrReturnCtx(t);return A(c,{code:E.invalid_type,expected:R.object,received:c.parsedType}),$}const{status:r,ctx:a}=this._processInputParams(t),{shape:o,keys:s}=this._getCached(),i=[];if(!(this._def.catchall instanceof Ge&&this._def.unknownKeys==="strip"))for(const c in a.data)s.includes(c)||i.push(c);const l=[];for(const c of s){const u=o[c],d=a.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new $e(a,d,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof Ge){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of i)l.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(c==="strict")i.length>0&&(A(a,{code:E.unrecognized_keys,keys:i}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of i){const d=a.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new $e(a,d,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,h=await u.value;c.push({key:d,value:h,alwaysSet:u.alwaysSet})}return c}).then(c=>ye.mergeObjectSync(r,c)):ye.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return P.errToObj,new le({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,o,s,i;const l=(s=(o=(a=this._def).errorMap)===null||o===void 0?void 0:o.call(a,n,r).message)!==null&&s!==void 0?s:r.defaultError;return n.code==="unrecognized_keys"?{message:(i=P.errToObj(t).message)!==null&&i!==void 0?i:l}:{message:l}}}:{}})}strip(){return new le({...this._def,unknownKeys:"strip"})}passthrough(){return new le({...this._def,unknownKeys:"passthrough"})}extend(t){return new le({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new le({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:C.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new le({...this._def,catchall:t})}pick(t){const n={};return q.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new le({...this._def,shape:()=>n})}omit(t){const n={};return q.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new le({...this._def,shape:()=>n})}deepPartial(){return yt(this)}partial(t){const n={};return q.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new le({...this._def,shape:()=>n})}required(t){const n={};return q.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Pe;)o=o._def.innerType;n[r]=o}}),new le({...this._def,shape:()=>n})}keyof(){return Ys(q.objectKeys(this.shape))}}le.create=(e,t)=>new le({shape:()=>e,unknownKeys:"strip",catchall:Ge.create(),typeName:C.ZodObject,...B(t)});le.strictCreate=(e,t)=>new le({shape:()=>e,unknownKeys:"strict",catchall:Ge.create(),typeName:C.ZodObject,...B(t)});le.lazycreate=(e,t)=>new le({shape:e,unknownKeys:"strip",catchall:Ge.create(),typeName:C.ZodObject,...B(t)});class Lt extends Z{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(o){for(const i of o)if(i.result.status==="valid")return i.result;for(const i of o)if(i.result.status==="dirty")return n.common.issues.push(...i.ctx.common.issues),i.result;const s=o.map(i=>new Ee(i.ctx.common.issues));return A(n,{code:E.invalid_union,unionErrors:s}),$}if(n.common.async)return Promise.all(r.map(async o=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(a);{let o;const s=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!o&&(o={result:u,ctx:c}),c.common.issues.length&&s.push(c.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const i=s.map(l=>new Ee(l));return A(n,{code:E.invalid_union,unionErrors:i}),$}}get options(){return this._def.options}}Lt.create=(e,t)=>new Lt({options:e,typeName:C.ZodUnion,...B(t)});const ze=e=>e instanceof Zt?ze(e.schema):e instanceof Oe?ze(e.innerType()):e instanceof zt?[e.value]:e instanceof et?e.options:e instanceof Vt?q.objectValues(e.enum):e instanceof Gt?ze(e._def.innerType):e instanceof Ft?[void 0]:e instanceof $t?[null]:e instanceof Pe?[void 0,...ze(e.unwrap())]:e instanceof tt?[null,...ze(e.unwrap())]:e instanceof Sa||e instanceof qt?ze(e.unwrap()):e instanceof Ht?ze(e._def.innerType):[];class or extends Z{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==R.object)return A(n,{code:E.invalid_type,expected:R.object,received:n.parsedType}),$;const r=this.discriminator,a=n.data[r],o=this.optionsMap.get(a);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(A(n,{code:E.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),$)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const o of n){const s=ze(o.shape[t]);if(!s.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const i of s){if(a.has(i))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(i)}`);a.set(i,o)}}return new or({typeName:C.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...B(r)})}}function Zr(e,t){const n=Ve(e),r=Ve(t);if(e===t)return{valid:!0,data:e};if(n===R.object&&r===R.object){const a=q.objectKeys(t),o=q.objectKeys(e).filter(i=>a.indexOf(i)!==-1),s={...e,...t};for(const i of o){const l=Zr(e[i],t[i]);if(!l.valid)return{valid:!1};s[i]=l.data}return{valid:!0,data:s}}else if(n===R.array&&r===R.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let o=0;o<e.length;o++){const s=e[o],i=t[o],l=Zr(s,i);if(!l.valid)return{valid:!1};a.push(l.data)}return{valid:!0,data:a}}else return n===R.date&&r===R.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Bt extends Z{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(o,s)=>{if(Br(o)||Br(s))return $;const i=Zr(o.value,s.value);return i.valid?((Ur(o)||Ur(s))&&n.dirty(),{status:n.value,value:i.data}):(A(r,{code:E.invalid_intersection_types}),$)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,s])=>a(o,s)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Bt.create=(e,t,n)=>new Bt({left:e,right:t,typeName:C.ZodIntersection,...B(n)});class Le extends Z{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==R.array)return A(r,{code:E.invalid_type,expected:R.array,received:r.parsedType}),$;if(r.data.length<this._def.items.length)return A(r,{code:E.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$;!this._def.rest&&r.data.length>this._def.items.length&&(A(r,{code:E.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((s,i)=>{const l=this._def.items[i]||this._def.rest;return l?l._parse(new $e(r,s,r.path,i)):null}).filter(s=>!!s);return r.common.async?Promise.all(o).then(s=>ye.mergeArray(n,s)):ye.mergeArray(n,o)}get items(){return this._def.items}rest(t){return new Le({...this._def,rest:t})}}Le.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Le({items:e,typeName:C.ZodTuple,rest:null,...B(t)})};class Ut extends Z{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==R.object)return A(r,{code:E.invalid_type,expected:R.object,received:r.parsedType}),$;const a=[],o=this._def.keyType,s=this._def.valueType;for(const i in r.data)a.push({key:o._parse(new $e(r,i,r.path,i)),value:s._parse(new $e(r,r.data[i],r.path,i)),alwaysSet:i in r.data});return r.common.async?ye.mergeObjectAsync(n,a):ye.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Z?new Ut({keyType:t,valueType:n,typeName:C.ZodRecord,...B(r)}):new Ut({keyType:Ne.create(),valueType:t,typeName:C.ZodRecord,...B(n)})}}class Un extends Z{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==R.map)return A(r,{code:E.invalid_type,expected:R.map,received:r.parsedType}),$;const a=this._def.keyType,o=this._def.valueType,s=[...r.data.entries()].map(([i,l],c)=>({key:a._parse(new $e(r,i,r.path,[c,"key"])),value:o._parse(new $e(r,l,r.path,[c,"value"]))}));if(r.common.async){const i=new Map;return Promise.resolve().then(async()=>{for(const l of s){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return $;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),i.set(c.value,u.value)}return{status:n.value,value:i}})}else{const i=new Map;for(const l of s){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return $;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),i.set(c.value,u.value)}return{status:n.value,value:i}}}}Un.create=(e,t,n)=>new Un({valueType:t,keyType:e,typeName:C.ZodMap,...B(n)});class pt extends Z{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==R.set)return A(r,{code:E.invalid_type,expected:R.set,received:r.parsedType}),$;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(A(r,{code:E.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(A(r,{code:E.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const o=this._def.valueType;function s(l){const c=new Set;for(const u of l){if(u.status==="aborted")return $;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const i=[...r.data.values()].map((l,c)=>o._parse(new $e(r,l,r.path,c)));return r.common.async?Promise.all(i).then(l=>s(l)):s(i)}min(t,n){return new pt({...this._def,minSize:{value:t,message:P.toString(n)}})}max(t,n){return new pt({...this._def,maxSize:{value:t,message:P.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}pt.create=(e,t)=>new pt({valueType:e,minSize:null,maxSize:null,typeName:C.ZodSet,...B(t)});class _t extends Z{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==R.function)return A(n,{code:E.invalid_type,expected:R.function,received:n.parsedType}),$;function r(i,l){return Fn({data:i,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Dn(),xt].filter(c=>!!c),issueData:{code:E.invalid_arguments,argumentsError:l}})}function a(i,l){return Fn({data:i,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Dn(),xt].filter(c=>!!c),issueData:{code:E.invalid_return_type,returnTypeError:l}})}const o={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof St){const i=this;return we(async function(...l){const c=new Ee([]),u=await i._def.args.parseAsync(l,o).catch(b=>{throw c.addIssue(r(l,b)),c}),d=await Reflect.apply(s,this,u);return await i._def.returns._def.type.parseAsync(d,o).catch(b=>{throw c.addIssue(a(d,b)),c})})}else{const i=this;return we(function(...l){const c=i._def.args.safeParse(l,o);if(!c.success)throw new Ee([r(l,c.error)]);const u=Reflect.apply(s,this,c.data),d=i._def.returns.safeParse(u,o);if(!d.success)throw new Ee([a(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new _t({...this._def,args:Le.create(t).rest(st.create())})}returns(t){return new _t({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new _t({args:t||Le.create([]).rest(st.create()),returns:n||st.create(),typeName:C.ZodFunction,...B(r)})}}class Zt extends Z{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Zt.create=(e,t)=>new Zt({getter:e,typeName:C.ZodLazy,...B(t)});class zt extends Z{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return A(n,{received:n.data,code:E.invalid_literal,expected:this._def.value}),$}return{status:"valid",value:t.data}}get value(){return this._def.value}}zt.create=(e,t)=>new zt({value:e,typeName:C.ZodLiteral,...B(t)});function Ys(e,t){return new et({values:e,typeName:C.ZodEnum,...B(t)})}class et extends Z{constructor(){super(...arguments),Nt.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return A(n,{expected:q.joinValues(r),received:n.parsedType,code:E.invalid_type}),$}if($n(this,Nt)||Hs(this,Nt,new Set(this._def.values)),!$n(this,Nt).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return A(n,{received:n.data,code:E.invalid_enum_value,options:r}),$}return we(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return et.create(t,{...this._def,...n})}exclude(t,n=this._def){return et.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Nt=new WeakMap;et.create=Ys;class Vt extends Z{constructor(){super(...arguments),jt.set(this,void 0)}_parse(t){const n=q.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==R.string&&r.parsedType!==R.number){const a=q.objectValues(n);return A(r,{expected:q.joinValues(a),received:r.parsedType,code:E.invalid_type}),$}if($n(this,jt)||Hs(this,jt,new Set(q.getValidEnumValues(this._def.values))),!$n(this,jt).has(t.data)){const a=q.objectValues(n);return A(r,{received:r.data,code:E.invalid_enum_value,options:a}),$}return we(t.data)}get enum(){return this._def.values}}jt=new WeakMap;Vt.create=(e,t)=>new Vt({values:e,typeName:C.ZodNativeEnum,...B(t)});class St extends Z{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==R.promise&&n.common.async===!1)return A(n,{code:E.invalid_type,expected:R.promise,received:n.parsedType}),$;const r=n.parsedType===R.promise?n.data:Promise.resolve(n.data);return we(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}St.create=(e,t)=>new St({type:e,typeName:C.ZodPromise,...B(t)});class Oe extends Z{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===C.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,o={addIssue:s=>{A(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),a.type==="preprocess"){const s=a.transform(r.data,o);if(r.common.async)return Promise.resolve(s).then(async i=>{if(n.value==="aborted")return $;const l=await this._def.schema._parseAsync({data:i,path:r.path,parent:r});return l.status==="aborted"?$:l.status==="dirty"||n.value==="dirty"?vt(l.value):l});{if(n.value==="aborted")return $;const i=this._def.schema._parseSync({data:s,path:r.path,parent:r});return i.status==="aborted"?$:i.status==="dirty"||n.value==="dirty"?vt(i.value):i}}if(a.type==="refinement"){const s=i=>{const l=a.refinement(i,o);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?$:(i.status==="dirty"&&n.dirty(),s(i.value),{status:n.value,value:i.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>i.status==="aborted"?$:(i.status==="dirty"&&n.dirty(),s(i.value).then(()=>({status:n.value,value:i.value}))))}if(a.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ut(s))return s;const i=a.transform(s.value,o);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:i}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>ut(s)?Promise.resolve(a.transform(s.value,o)).then(i=>({status:n.value,value:i})):s);q.assertNever(a)}}Oe.create=(e,t,n)=>new Oe({schema:e,typeName:C.ZodEffects,effect:t,...B(n)});Oe.createWithPreprocess=(e,t,n)=>new Oe({schema:t,effect:{type:"preprocess",transform:e},typeName:C.ZodEffects,...B(n)});class Pe extends Z{_parse(t){return this._getType(t)===R.undefined?we(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Pe.create=(e,t)=>new Pe({innerType:e,typeName:C.ZodOptional,...B(t)});class tt extends Z{_parse(t){return this._getType(t)===R.null?we(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}tt.create=(e,t)=>new tt({innerType:e,typeName:C.ZodNullable,...B(t)});class Gt extends Z{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===R.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Gt.create=(e,t)=>new Gt({innerType:e,typeName:C.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...B(t)});class Ht extends Z{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Mt(a)?a.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Ee(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ee(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ht.create=(e,t)=>new Ht({innerType:e,typeName:C.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...B(t)});class Zn extends Z{_parse(t){if(this._getType(t)!==R.nan){const r=this._getOrReturnCtx(t);return A(r,{code:E.invalid_type,expected:R.nan,received:r.parsedType}),$}return{status:"valid",value:t.data}}}Zn.create=e=>new Zn({typeName:C.ZodNaN,...B(e)});const Np=Symbol("zod_brand");class Sa extends Z{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class vn extends Z{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?$:o.status==="dirty"?(n.dirty(),vt(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?$:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new vn({in:t,out:n,typeName:C.ZodPipeline})}}class qt extends Z{_parse(t){const n=this._def.innerType._parse(t),r=a=>(ut(a)&&(a.value=Object.freeze(a.value)),a);return Mt(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}qt.create=(e,t)=>new qt({innerType:e,typeName:C.ZodReadonly,...B(t)});function so(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function Js(e,t={},n){return e?kt.create().superRefine((r,a)=>{var o,s;const i=e(r);if(i instanceof Promise)return i.then(l=>{var c,u;if(!l){const d=so(t,r),h=(u=(c=d.fatal)!==null&&c!==void 0?c:n)!==null&&u!==void 0?u:!0;a.addIssue({code:"custom",...d,fatal:h})}});if(!i){const l=so(t,r),c=(s=(o=l.fatal)!==null&&o!==void 0?o:n)!==null&&s!==void 0?s:!0;a.addIssue({code:"custom",...l,fatal:c})}}):kt.create()}const jp={object:le.lazycreate};var C;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(C||(C={}));const Pp=(e,t={message:`Input not instance of ${e.name}`})=>Js(n=>n instanceof e,t),Xs=Ne.create,Qs=Xe.create,Op=Zn.create,Mp=Qe.create,ei=Dt.create,Dp=dt.create,Fp=Ln.create,$p=Ft.create,Lp=$t.create,Bp=kt.create,Up=st.create,Zp=Ge.create,zp=Bn.create,Vp=je.create,Gp=le.create,Hp=le.strictCreate,qp=Lt.create,Wp=or.create,Kp=Bt.create,Yp=Le.create,Jp=Ut.create,Xp=Un.create,Qp=pt.create,ef=_t.create,tf=Zt.create,nf=zt.create,rf=et.create,af=Vt.create,of=St.create,io=Oe.create,sf=Pe.create,lf=tt.create,cf=Oe.createWithPreprocess,uf=vn.create,df=()=>Xs().optional(),pf=()=>Qs().optional(),ff=()=>ei().optional(),mf={string:e=>Ne.create({...e,coerce:!0}),number:e=>Xe.create({...e,coerce:!0}),boolean:e=>Dt.create({...e,coerce:!0}),bigint:e=>Qe.create({...e,coerce:!0}),date:e=>dt.create({...e,coerce:!0})},gf=$;var m=Object.freeze({__proto__:null,defaultErrorMap:xt,setErrorMap:lp,getErrorMap:Dn,makeIssue:Fn,EMPTY_PATH:cp,addIssueToContext:A,ParseStatus:ye,INVALID:$,DIRTY:vt,OK:we,isAborted:Br,isDirty:Ur,isValid:ut,isAsync:Mt,get util(){return q},get objectUtil(){return Lr},ZodParsedType:R,getParsedType:Ve,ZodType:Z,datetimeRegex:Ks,ZodString:Ne,ZodNumber:Xe,ZodBigInt:Qe,ZodBoolean:Dt,ZodDate:dt,ZodSymbol:Ln,ZodUndefined:Ft,ZodNull:$t,ZodAny:kt,ZodUnknown:st,ZodNever:Ge,ZodVoid:Bn,ZodArray:je,ZodObject:le,ZodUnion:Lt,ZodDiscriminatedUnion:or,ZodIntersection:Bt,ZodTuple:Le,ZodRecord:Ut,ZodMap:Un,ZodSet:pt,ZodFunction:_t,ZodLazy:Zt,ZodLiteral:zt,ZodEnum:et,ZodNativeEnum:Vt,ZodPromise:St,ZodEffects:Oe,ZodTransformer:Oe,ZodOptional:Pe,ZodNullable:tt,ZodDefault:Gt,ZodCatch:Ht,ZodNaN:Zn,BRAND:Np,ZodBranded:Sa,ZodPipeline:vn,ZodReadonly:qt,custom:Js,Schema:Z,ZodSchema:Z,late:jp,get ZodFirstPartyTypeKind(){return C},coerce:mf,any:Bp,array:Vp,bigint:Mp,boolean:ei,date:Dp,discriminatedUnion:Wp,effect:io,enum:rf,function:ef,instanceof:Pp,intersection:Kp,lazy:tf,literal:nf,map:Xp,nan:Op,nativeEnum:af,never:Zp,null:Lp,nullable:lf,number:Qs,object:Gp,oboolean:ff,onumber:pf,optional:sf,ostring:df,pipeline:uf,preprocess:cf,promise:of,record:Jp,set:Qp,strictObject:Hp,string:Xs,symbol:Fp,transformer:io,tuple:Yp,undefined:$p,union:qp,unknown:Up,void:zp,NEVER:gf,ZodIssueCode:E,quotelessJson:ip,ZodError:Ee});function hf({prompt:e,useLegacyFunctionCalling:t=!1}){const n=[];for(const{role:r,content:a}of e)switch(r){case"system":{n.push({role:"system",content:a});break}case"user":{if(a.length===1&&a[0].type==="text"){n.push({role:"user",content:a[0].text});break}n.push({role:"user",content:a.map(o=>{var s,i,l;switch(o.type){case"text":return{type:"text",text:o.text};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(s=o.mimeType)!=null?s:"image/jpeg"};base64,${Mn(o.image)}`,detail:(l=(i=o.providerMetadata)==null?void 0:i.openai)==null?void 0:l.imageDetail}};case"file":{if(o.data instanceof URL)throw new pe({functionality:"'File content parts with URL data' functionality not supported."});switch(o.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:o.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:o.data,format:"mp3"}};default:throw new pe({functionality:`File content part type ${o.mimeType} in user messages`})}}}})});break}case"assistant":{let o="";const s=[];for(const i of a)switch(i.type){case"text":{o+=i.text;break}case"tool-call":{s.push({id:i.toolCallId,type:"function",function:{name:i.toolName,arguments:JSON.stringify(i.args)}});break}default:{const l=i;throw new Error(`Unsupported part: ${l}`)}}if(t){if(s.length>1)throw new pe({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});n.push({role:"assistant",content:o,function_call:s.length>0?s[0].function:void 0})}else n.push({role:"assistant",content:o,tool_calls:s.length>0?s:void 0});break}case"tool":{for(const o of a)t?n.push({role:"function",name:o.toolName,content:JSON.stringify(o.result)}):n.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result)});break}default:{const o=r;throw new Error(`Unsupported role: ${o}`)}}return n}function lo(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:o})=>({token:r,logprob:a,topLogprobs:o?o.map(({token:s,logprob:i})=>({token:s,logprob:i})):[]})))!=null?n:void 0}function zn(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Ea=m.object({error:m.object({message:m.string(),type:m.string().nullish(),param:m.any().nullish(),code:m.union([m.string(),m.number()]).nullish()})}),Wt=zs({errorSchema:Ea,errorToMessage:e=>e.error.message});function Vn({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function yf({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n=!1}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,o=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:o};const s=e.toolChoice;if(t){const c=[];for(const d of a)d.type==="provider-defined"?o.push({type:"unsupported-tool",tool:d}):c.push({name:d.name,description:d.description,parameters:d.parameters});if(s==null)return{functions:c,function_call:void 0,toolWarnings:o};switch(s.type){case"auto":case"none":case void 0:return{functions:c,function_call:void 0,toolWarnings:o};case"required":throw new pe({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:c,function_call:{name:s.toolName},toolWarnings:o}}}const i=[];for(const c of a)c.type==="provider-defined"?o.push({type:"unsupported-tool",tool:c}):i.push({type:"function",function:{name:c.name,description:c.description,parameters:c.parameters,strict:n===!0?!0:void 0}});if(s==null)return{tools:i,tool_choice:void 0,toolWarnings:o};const l=s.type;switch(l){case"auto":case"none":case"required":return{tools:i,tool_choice:l,toolWarnings:o};case"tool":return{tools:i,tool_choice:{type:"function",function:{name:s.toolName}},toolWarnings:o};default:{const c=l;throw new pe({functionality:`Unsupported tool choice type: ${c}`})}}}var vf=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){return this.settings.structuredOutputs===!0}get defaultObjectGenerationMode(){return wf(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:o,frequencyPenalty:s,presencePenalty:i,stopSequences:l,responseFormat:c,seed:u,providerMetadata:d}){var h,b,f,g,y,w,_,x,T;const j=e.type,N=[];o!=null&&N.push({type:"unsupported-setting",setting:"topK"}),c!=null&&c.type==="json"&&c.schema!=null&&N.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is not supported"});const M=this.settings.useLegacyFunctionCalling;if(M&&this.settings.parallelToolCalls===!0)throw new pe({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(M&&this.settings.structuredOutputs===!0)throw new pe({functionality:"structuredOutputs with useLegacyFunctionCalling"});const O={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:s,presence_penalty:i,stop:l,seed:u,max_completion_tokens:(b=(h=d==null?void 0:d.openai)==null?void 0:h.maxCompletionTokens)!=null?b:void 0,store:(g=(f=d==null?void 0:d.openai)==null?void 0:f.store)!=null?g:void 0,metadata:(w=(y=d==null?void 0:d.openai)==null?void 0:y.metadata)!=null?w:void 0,prediction:(x=(_=d==null?void 0:d.openai)==null?void 0:_.prediction)!=null?x:void 0,response_format:(c==null?void 0:c.type)==="json"?{type:"json_object"}:void 0,messages:hf({prompt:t,useLegacyFunctionCalling:M})};switch(co(this.modelId)&&(O.temperature=void 0,O.top_p=void 0,O.frequency_penalty=void 0,O.presence_penalty=void 0),j){case"regular":{const{tools:I,tool_choice:F,functions:z,function_call:K,toolWarnings:me}=yf({mode:e,useLegacyFunctionCalling:M,structuredOutputs:this.settings.structuredOutputs});return{args:{...O,tools:I,tool_choice:F,functions:z,function_call:K},warnings:[...N,...me]}}case"object-json":return{args:{...O,response_format:this.settings.structuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(T=e.name)!=null?T:"response",description:e.description}}:{type:"json_object"}},warnings:N};case"object-tool":return{args:M?{...O,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...O,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.settings.structuredOutputs===!0?!0:void 0}}]},warnings:N};default:{const I=j;throw new Error(`Unsupported type: ${I}`)}}}async doGenerate(e){var t,n,r,a,o,s,i,l,c,u,d,h,b,f,g,y,w,_;const{args:x,warnings:T}=this.getArgs(e),{responseHeaders:j,value:N}=await Je({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ye(this.config.headers(),e.headers),body:x,failedResponseHandler:Wt,successfulResponseHandler:yn(bf),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:M,...O}=x,I=N.choices[0];let F;return(((n=(t=N.usage)==null?void 0:t.completion_tokens_details)==null?void 0:n.reasoning_tokens)!=null||((a=(r=N.usage)==null?void 0:r.prompt_tokens_details)==null?void 0:a.cached_tokens)!=null)&&(F={openai:{}},((s=(o=N.usage)==null?void 0:o.completion_tokens_details)==null?void 0:s.reasoning_tokens)!=null&&(F.openai.reasoningTokens=(l=(i=N.usage)==null?void 0:i.completion_tokens_details)==null?void 0:l.reasoning_tokens),((u=(c=N.usage)==null?void 0:c.prompt_tokens_details)==null?void 0:u.cached_tokens)!=null&&(F.openai.cachedPromptTokens=(h=(d=N.usage)==null?void 0:d.prompt_tokens_details)==null?void 0:h.cached_tokens)),{text:(b=I.message.content)!=null?b:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&I.message.function_call?[{toolCallType:"function",toolCallId:ht(),toolName:I.message.function_call.name,args:I.message.function_call.arguments}]:(f=I.message.tool_calls)==null?void 0:f.map(z=>{var K;return{toolCallType:"function",toolCallId:(K=z.id)!=null?K:ht(),toolName:z.function.name,args:z.function.arguments}}),finishReason:zn(I.finish_reason),usage:{promptTokens:(y=(g=N.usage)==null?void 0:g.prompt_tokens)!=null?y:NaN,completionTokens:(_=(w=N.usage)==null?void 0:w.completion_tokens)!=null?_:NaN},rawCall:{rawPrompt:M,rawSettings:O},rawResponse:{headers:j},request:{body:JSON.stringify(x)},response:Vn(N),warnings:T,logprobs:lo(I.logprobs),providerMetadata:F}}async doStream(e){if(co(this.modelId)){const g=await this.doGenerate(e);return{stream:new ReadableStream({start(w){if(w.enqueue({type:"response-metadata",...g.response}),g.text&&w.enqueue({type:"text-delta",textDelta:g.text}),g.toolCalls)for(const _ of g.toolCalls)w.enqueue({type:"tool-call",..._});w.enqueue({type:"finish",finishReason:g.finishReason,usage:g.usage,logprobs:g.logprobs,providerMetadata:g.providerMetadata}),w.close()}}),rawCall:g.rawCall,rawResponse:g.rawResponse,warnings:g.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:o}=await Je({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ye(this.config.headers(),e.headers),body:r,failedResponseHandler:Wt,successfulResponseHandler:ka(_f),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:s,...i}=t,l=[];let c="unknown",u={promptTokens:void 0,completionTokens:void 0},d,h=!0;const{useLegacyFunctionCalling:b}=this.settings;let f;return{stream:o.pipeThrough(new TransformStream({transform(g,y){var w,_,x,T,j,N,M,O,I,F,z,K,me,Y,se,ne;if(!g.success){c="error",y.enqueue({type:"error",error:g.error});return}const ce=g.value;if("error"in ce){c="error",y.enqueue({type:"error",error:ce.error});return}h&&(h=!1,y.enqueue({type:"response-metadata",...Vn(ce)})),ce.usage!=null&&(u={promptTokens:(w=ce.usage.prompt_tokens)!=null?w:void 0,completionTokens:(_=ce.usage.completion_tokens)!=null?_:void 0},((x=ce.usage.prompt_tokens_details)==null?void 0:x.cached_tokens)!=null&&(f={openai:{cachedPromptTokens:(T=ce.usage.prompt_tokens_details)==null?void 0:T.cached_tokens}}));const G=ce.choices[0];if((G==null?void 0:G.finish_reason)!=null&&(c=zn(G.finish_reason)),(G==null?void 0:G.delta)==null)return;const S=G.delta;S.content!=null&&y.enqueue({type:"text-delta",textDelta:S.content});const D=lo(G==null?void 0:G.logprobs);D!=null&&D.length&&(d===void 0&&(d=[]),d.push(...D));const V=b&&S.function_call!=null?[{type:"function",id:ht(),function:S.function_call,index:0}]:S.tool_calls;if(V!=null)for(const L of V){const J=L.index;if(l[J]==null){if(L.type!=="function")throw new dr({data:L,message:"Expected 'function' type."});if(L.id==null)throw new dr({data:L,message:"Expected 'id' to be a string."});if(((j=L.function)==null?void 0:j.name)==null)throw new dr({data:L,message:"Expected 'function.name' to be a string."});l[J]={id:L.id,type:"function",function:{name:L.function.name,arguments:(N=L.function.arguments)!=null?N:""}};const te=l[J];((M=te.function)==null?void 0:M.name)!=null&&((O=te.function)==null?void 0:O.arguments)!=null&&(te.function.arguments.length>0&&y.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:te.id,toolName:te.function.name,argsTextDelta:te.function.arguments}),ao(te.function.arguments)&&y.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(I=te.id)!=null?I:ht(),toolName:te.function.name,args:te.function.arguments}));continue}const ee=l[J];((F=L.function)==null?void 0:F.arguments)!=null&&(ee.function.arguments+=(K=(z=L.function)==null?void 0:z.arguments)!=null?K:""),y.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ee.id,toolName:ee.function.name,argsTextDelta:(me=L.function.arguments)!=null?me:""}),((Y=ee.function)==null?void 0:Y.name)!=null&&((se=ee.function)==null?void 0:se.arguments)!=null&&ao(ee.function.arguments)&&y.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(ne=ee.id)!=null?ne:ht(),toolName:ee.function.name,args:ee.function.arguments})}},flush(g){var y,w;g.enqueue({type:"finish",finishReason:c,logprobs:d,usage:{promptTokens:(y=u.promptTokens)!=null?y:NaN,completionTokens:(w=u.completionTokens)!=null?w:NaN},...f!=null?{providerMetadata:f}:{}})}})),rawCall:{rawPrompt:s,rawSettings:i},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},ti=m.object({prompt_tokens:m.number().nullish(),completion_tokens:m.number().nullish(),prompt_tokens_details:m.object({cached_tokens:m.number().nullish()}).nullish(),completion_tokens_details:m.object({reasoning_tokens:m.number().nullish()}).nullish()}).nullish(),bf=m.object({id:m.string().nullish(),created:m.number().nullish(),model:m.string().nullish(),choices:m.array(m.object({message:m.object({role:m.literal("assistant").nullish(),content:m.string().nullish(),function_call:m.object({arguments:m.string(),name:m.string()}).nullish(),tool_calls:m.array(m.object({id:m.string().nullish(),type:m.literal("function"),function:m.object({name:m.string(),arguments:m.string()})})).nullish()}),index:m.number(),logprobs:m.object({content:m.array(m.object({token:m.string(),logprob:m.number(),top_logprobs:m.array(m.object({token:m.string(),logprob:m.number()}))})).nullable()}).nullish(),finish_reason:m.string().nullish()})),usage:ti}),_f=m.union([m.object({id:m.string().nullish(),created:m.number().nullish(),model:m.string().nullish(),choices:m.array(m.object({delta:m.object({role:m.enum(["assistant"]).nullish(),content:m.string().nullish(),function_call:m.object({name:m.string().optional(),arguments:m.string().optional()}).nullish(),tool_calls:m.array(m.object({index:m.number(),id:m.string().nullish(),type:m.literal("function").optional(),function:m.object({name:m.string().nullish(),arguments:m.string().nullish()})})).nullish()}).nullish(),logprobs:m.object({content:m.array(m.object({token:m.string(),logprob:m.number(),top_logprobs:m.array(m.object({token:m.string(),logprob:m.number()}))})).nullable()}).nullish(),finish_reason:m.string().nullable().optional(),index:m.number()})),usage:ti}),Ea]);function co(e){return e.startsWith("o1-")}function wf(e){return e.startsWith("gpt-4o-audio-preview")}function xf({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:o,content:s}of e)switch(o){case"system":throw new at({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const i=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new pe({functionality:"images"})}}).join("");a+=`${n}:
${i}

`;break}case"assistant":{const i=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new pe({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${i}

`;break}case"tool":throw new pe({functionality:"tool messages"});default:{const i=o;throw new Error(`Unsupported role: ${i}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function uo(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var kf=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:o,topK:s,frequencyPenalty:i,presencePenalty:l,stopSequences:c,responseFormat:u,seed:d}){var h;const b=e.type,f=[];s!=null&&f.push({type:"unsupported-setting",setting:"topK"}),u!=null&&u.type!=="text"&&f.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:g,stopSequences:y}=xf({prompt:n,inputFormat:t}),w=[...y??[],...c??[]],_={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:o,frequency_penalty:i,presence_penalty:l,seed:d,prompt:g,stop:w.length>0?w:void 0};switch(b){case"regular":{if((h=e.tools)!=null&&h.length)throw new pe({functionality:"tools"});if(e.toolChoice)throw new pe({functionality:"toolChoice"});return{args:_,warnings:f}}case"object-json":throw new pe({functionality:"object-json mode"});case"object-tool":throw new pe({functionality:"object-tool mode"});default:{const x=b;throw new Error(`Unsupported type: ${x}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await Je({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ye(this.config.headers(),e.headers),body:t,failedResponseHandler:Wt,successfulResponseHandler:yn(Sf),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t,i=a.choices[0];return{text:i.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:zn(i.finish_reason),logprobs:uo(i.logprobs),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:r},response:Vn(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:o}=await Je({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ye(this.config.headers(),e.headers),body:r,failedResponseHandler:Wt,successfulResponseHandler:ka(Ef),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...i}=t;let l="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},u,d=!0;return{stream:o.pipeThrough(new TransformStream({transform(h,b){if(!h.success){l="error",b.enqueue({type:"error",error:h.error});return}const f=h.value;if("error"in f){l="error",b.enqueue({type:"error",error:f.error});return}d&&(d=!1,b.enqueue({type:"response-metadata",...Vn(f)})),f.usage!=null&&(c={promptTokens:f.usage.prompt_tokens,completionTokens:f.usage.completion_tokens});const g=f.choices[0];(g==null?void 0:g.finish_reason)!=null&&(l=zn(g.finish_reason)),(g==null?void 0:g.text)!=null&&b.enqueue({type:"text-delta",textDelta:g.text});const y=uo(g==null?void 0:g.logprobs);y!=null&&y.length&&(u===void 0&&(u=[]),u.push(...y))},flush(h){h.enqueue({type:"finish",finishReason:l,logprobs:u,usage:c})}})),rawCall:{rawPrompt:s,rawSettings:i},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},Sf=m.object({id:m.string().nullish(),created:m.number().nullish(),model:m.string().nullish(),choices:m.array(m.object({text:m.string(),finish_reason:m.string(),logprobs:m.object({tokens:m.array(m.string()),token_logprobs:m.array(m.number()),top_logprobs:m.array(m.record(m.string(),m.number())).nullable()}).nullish()})),usage:m.object({prompt_tokens:m.number(),completion_tokens:m.number()})}),Ef=m.union([m.object({id:m.string().nullish(),created:m.number().nullish(),model:m.string().nullish(),choices:m.array(m.object({text:m.string(),finish_reason:m.string().nullish(),index:m.number(),logprobs:m.object({tokens:m.array(m.string()),token_logprobs:m.array(m.number()),top_logprobs:m.array(m.record(m.string(),m.number())).nullable()}).nullish()})),usage:m.object({prompt_tokens:m.number(),completion_tokens:m.number()}).nullish()}),Ea]),Cf=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new Os({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await Je({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Ye(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Wt,successfulResponseHandler:yn(Af),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(o=>o.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},Af=m.object({data:m.array(m.object({embedding:m.array(m.number())})),usage:m.object({prompt_tokens:m.number()}).nullish()});function Ca(e={}){var t,n,r,a;const o=(n=Vs((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://api.openai.com/v1",s=(r=e.compatibility)!=null?r:"compatible",i=(a=e.name)!=null?a:"openai",l=()=>({Authorization:`Bearer ${Zs({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),c=(f,g={})=>new vf(f,g,{provider:`${i}.chat`,url:({path:y})=>`${o}${y}`,headers:l,compatibility:s,fetch:e.fetch}),u=(f,g={})=>new kf(f,g,{provider:`${i}.completion`,url:({path:y})=>`${o}${y}`,headers:l,compatibility:s,fetch:e.fetch}),d=(f,g={})=>new Cf(f,g,{provider:`${i}.embedding`,url:({path:y})=>`${o}${y}`,headers:l,fetch:e.fetch}),h=(f,g)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return f==="gpt-3.5-turbo-instruct"?u(f,g):c(f,g)},b=function(f,g){return h(f,g)};return b.languageModel=h,b.chat=c,b.completion=u,b.embedding=d,b.textEmbedding=d,b.textEmbeddingModel=d,b}Ca({compatibility:"strict"});const Tf=["c","cpp","csharp","cs","dart","elixir","erlang","go","java","javascript","jsonp","jsx","php","python","racket","rkt","ruby","rb","rust","scala","sql","Swift","typescript","tsx"],If=m.object({feedback:m.string(),hints:m.array(m.string()).max(2,"You can only provide up to 2 hints.").optional().describe("max 2 hints"),snippet:m.string().optional().describe("code snippet should be in format."),programmingLanguage:m.enum(Tf).optional().describe("Programming language code as supports by prismjs")}),Rf=Symbol("Let zodToJsonSchema decide on which parser to use"),Nf={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},jf=e=>({...Nf,...e}),Pf=e=>{const t=jf(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function ni(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function Q(e,t,n,r,a){e[t]=n,ni(e,t,r,a)}function Of(){return{}}function Mf(e,t){var r,a,o;const n={type:"array"};return(r=e.type)!=null&&r._def&&((o=(a=e.type)==null?void 0:a._def)==null?void 0:o.typeName)!==C.ZodAny&&(n.items=X(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&Q(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&Q(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(Q(n,"minItems",e.exactLength.value,e.exactLength.message,t),Q(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function Df(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?Q(n,"minimum",r.value,r.message,t):Q(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Q(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?Q(n,"maximum",r.value,r.message,t):Q(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Q(n,"maximum",r.value,r.message,t));break;case"multipleOf":Q(n,"multipleOf",r.value,r.message,t);break}return n}function Ff(){return{type:"boolean"}}function ri(e,t){return X(e.type._def,t)}const $f=(e,t)=>X(e.innerType._def,t);function ai(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,o)=>ai(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Lf(e,t)}}const Lf=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":Q(n,"minimum",r.value,r.message,t);break;case"max":Q(n,"maximum",r.value,r.message,t);break}return n};function Bf(e,t){return{...X(e.innerType._def,t),default:e.defaultValue()}}function Uf(e,t){return t.effectStrategy==="input"?X(e.schema._def,t):{}}function Zf(e){return{type:"string",enum:Array.from(e.values)}}const zf=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Vf(e,t){const n=[X(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),X(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(o=>!!o);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(o=>{if(zf(o))a.push(...o.allOf),o.unevaluatedProperties===void 0&&(r=void 0);else{let s=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:i,...l}=o;s=l}else r=void 0;a.push(s)}}),a.length?{allOf:a,...r}:void 0}function Gf(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let fr;const Te={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(fr===void 0&&(fr=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),fr),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function oi(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":Q(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":Q(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Ie(n,"email",r.message,t);break;case"format:idn-email":Ie(n,"idn-email",r.message,t);break;case"pattern:zod":_e(n,Te.email,r.message,t);break}break;case"url":Ie(n,"uri",r.message,t);break;case"uuid":Ie(n,"uuid",r.message,t);break;case"regex":_e(n,r.regex,r.message,t);break;case"cuid":_e(n,Te.cuid,r.message,t);break;case"cuid2":_e(n,Te.cuid2,r.message,t);break;case"startsWith":_e(n,RegExp(`^${mr(r.value,t)}`),r.message,t);break;case"endsWith":_e(n,RegExp(`${mr(r.value,t)}$`),r.message,t);break;case"datetime":Ie(n,"date-time",r.message,t);break;case"date":Ie(n,"date",r.message,t);break;case"time":Ie(n,"time",r.message,t);break;case"duration":Ie(n,"duration",r.message,t);break;case"length":Q(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),Q(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{_e(n,RegExp(mr(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&Ie(n,"ipv4",r.message,t),r.version!=="v4"&&Ie(n,"ipv6",r.message,t);break}case"base64url":_e(n,Te.base64url,r.message,t);break;case"jwt":_e(n,Te.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&_e(n,Te.ipv4Cidr,r.message,t),r.version!=="v4"&&_e(n,Te.ipv6Cidr,r.message,t);break}case"emoji":_e(n,Te.emoji(),r.message,t);break;case"ulid":{_e(n,Te.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Ie(n,"binary",r.message,t);break}case"contentEncoding:base64":{Q(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{_e(n,Te.base64,r.message,t);break}}break}case"nanoid":_e(n,Te.nanoid,r.message,t)}return n}function mr(e,t){return t.patternStrategy==="escape"?qf(e):e}const Hf=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function qf(e){let t="";for(let n=0;n<e.length;n++)Hf.has(e[n])||(t+="\\"),t+=e[n];return t}function Ie(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(o=>o.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Q(e,"format",t,n,r)}function _e(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(o=>o.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:po(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Q(e,"pattern",po(t,r),n,r)}function po(e,t){var l;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",o=!1,s=!1,i=!1;for(let c=0;c<r.length;c++){if(o){a+=r[c],o=!1;continue}if(n.i){if(s){if(r[c].match(/[a-z]/)){i?(a+=r[c],a+=`${r[c-2]}-${r[c]}`.toUpperCase(),i=!1):r[c+1]==="-"&&((l=r[c+2])!=null&&l.match(/[a-z]/))?(a+=r[c],i=!0):a+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){a+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){a+=s?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}a+=r[c],r[c]==="\\"?o=!0:s&&r[c]==="]"?s=!1:!s&&r[c]==="["&&(s=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function si(e,t){var r,a,o,s,i,l;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===C.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((c,u)=>({...c,[u]:X(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",u]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:X(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===C.ZodString&&((o=e.keyType._def.checks)!=null&&o.length)){const{type:c,...u}=oi(e.keyType._def,t);return{...n,propertyNames:u}}else{if(((s=e.keyType)==null?void 0:s._def.typeName)===C.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((i=e.keyType)==null?void 0:i._def.typeName)===C.ZodBranded&&e.keyType._def.type._def.typeName===C.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){const{type:c,...u}=ri(e.keyType._def,t);return{...n,propertyNames:u}}}return n}function Wf(e,t){if(t.mapStrategy==="record")return si(e,t);const n=X(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=X(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Kf(e){const t=e.values,r=Object.keys(e.values).filter(o=>typeof t[t[o]]!="number").map(o=>t[o]),a=Array.from(new Set(r.map(o=>typeof o)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function Yf(){return{not:{}}}function Jf(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Gn={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Xf(e,t){if(t.target==="openApi3")return fo(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in Gn&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,o)=>{const s=Gn[o._def.typeName];return s&&!a.includes(s)?[...a,s]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,o)=>{const s=typeof o._def.value;switch(s){case"string":case"number":case"boolean":return[...a,s];case"bigint":return[...a,"integer"];case"object":if(o._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((o,s,i)=>i.indexOf(o)===s);return{type:a.length>1?a:a[0],enum:n.reduce((o,s)=>o.includes(s._def.value)?o:[...o,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(o=>!r.includes(o))],[])};return fo(e,t)}const fo=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>X(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Qf(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:Gn[e.innerType._def.typeName],nullable:!0}:{type:[Gn[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=X(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=X(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function em(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",ni(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?Q(n,"minimum",r.value,r.message,t):Q(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Q(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?Q(n,"maximum",r.value,r.message,t):Q(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Q(n,"maximum",r.value,r.message,t));break;case"multipleOf":Q(n,"multipleOf",r.value,r.message,t);break}return n}function tm(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],o=e.shape();for(const i in o){let l=o[i];if(l===void 0||l._def===void 0)continue;let c=rm(l);c&&n&&(l instanceof Pe&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const u=X(l._def,{...t,currentPath:[...t.currentPath,"properties",i],propertyPath:[...t.currentPath,"properties",i]});u!==void 0&&(r.properties[i]=u,c||a.push(i))}a.length&&(r.required=a);const s=nm(e,t);return s!==void 0&&(r.additionalProperties=s),r}function nm(e,t){if(e.catchall._def.typeName!=="ZodNever")return X(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function rm(e){try{return e.isOptional()}catch{return!0}}const am=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return X(e.innerType._def,t);const n=X(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},om=(e,t)=>{if(t.pipeStrategy==="input")return X(e.in._def,t);if(t.pipeStrategy==="output")return X(e.out._def,t);const n=X(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=X(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function sm(e,t){return X(e.type._def,t)}function im(e,t){const r={type:"array",uniqueItems:!0,items:X(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&Q(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&Q(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function lm(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>X(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:X(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>X(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function cm(){return{not:{}}}function um(){return{}}const dm=(e,t)=>X(e.innerType._def,t),pm=(e,t,n)=>{switch(t){case C.ZodString:return oi(e,n);case C.ZodNumber:return em(e,n);case C.ZodObject:return tm(e,n);case C.ZodBigInt:return Df(e,n);case C.ZodBoolean:return Ff();case C.ZodDate:return ai(e,n);case C.ZodUndefined:return cm();case C.ZodNull:return Jf(n);case C.ZodArray:return Mf(e,n);case C.ZodUnion:case C.ZodDiscriminatedUnion:return Xf(e,n);case C.ZodIntersection:return Vf(e,n);case C.ZodTuple:return lm(e,n);case C.ZodRecord:return si(e,n);case C.ZodLiteral:return Gf(e,n);case C.ZodEnum:return Zf(e);case C.ZodNativeEnum:return Kf(e);case C.ZodNullable:return Qf(e,n);case C.ZodOptional:return am(e,n);case C.ZodMap:return Wf(e,n);case C.ZodSet:return im(e,n);case C.ZodLazy:return()=>e.getter()._def;case C.ZodPromise:return sm(e,n);case C.ZodNaN:case C.ZodNever:return Yf();case C.ZodEffects:return Uf(e,n);case C.ZodAny:return Of();case C.ZodUnknown:return um();case C.ZodDefault:return Bf(e,n);case C.ZodBranded:return ri(e,n);case C.ZodReadonly:return dm(e,n);case C.ZodCatch:return $f(e,n);case C.ZodPipeline:return om(e,n);case C.ZodFunction:case C.ZodVoid:case C.ZodSymbol:return;default:return(r=>{})()}};function X(e,t,n=!1){var i;const r=t.seen.get(e);if(t.override){const l=(i=t.override)==null?void 0:i.call(t,e,t,r,n);if(l!==Rf)return l}if(r&&!n){const l=fm(r,t);if(l!==void 0)return l}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const o=pm(e,e.typeName,t),s=typeof o=="function"?X(o(),t):o;if(s&&gm(e,t,s),t.postProcess){const l=t.postProcess(s,e,t);return a.jsonSchema=s,l}return a.jsonSchema=s,s}const fm=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:mm(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},mm=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},gm=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),hm=(e,t)=>{const n=Pf(t),r=void 0,a=t==null?void 0:t.name,o=X(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},s=a===void 0?r?{...o,[n.definitionPath]:r}:o:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:o}};return n.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};var Kt={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Yt={code:"1",name:"function_call",parse:e=>{if(e==null||typeof e!="object"||!("function_call"in e)||typeof e.function_call!="object"||e.function_call==null||!("name"in e.function_call)||!("arguments"in e.function_call)||typeof e.function_call.name!="string"||typeof e.function_call.arguments!="string")throw new Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:e}}},Jt={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},Xt={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Qt={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},en={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},tn={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},nn={code:"7",name:"tool_calls",parse:e=>{if(e==null||typeof e!="object"||!("tool_calls"in e)||typeof e.tool_calls!="object"||e.tool_calls==null||!Array.isArray(e.tool_calls)||e.tool_calls.some(t=>t==null||typeof t!="object"||!("id"in t)||typeof t.id!="string"||!("type"in t)||typeof t.type!="string"||!("function"in t)||t.function==null||typeof t.function!="object"||!("arguments"in t.function)||typeof t.function.name!="string"||typeof t.function.arguments!="string"))throw new Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:e}}},rn={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},an={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},on={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},sn={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},ln={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},cn={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},un={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},ii=[Kt,Yt,Jt,Xt,Qt,en,tn,nn,rn,an,on,sn,ln,cn,un];Kt.code+"",Yt.code+"",Jt.code+"",Xt.code+"",Qt.code+"",en.code+"",tn.code+"",nn.code+"",rn.code+"",an.code+"",on.code+"",sn.code+"",ln.code+"",cn.code+"",un.code+"";Kt.name+"",Kt.code,Yt.name+"",Yt.code,Jt.name+"",Jt.code,Xt.name+"",Xt.code,Qt.name+"",Qt.code,en.name+"",en.code,tn.name+"",tn.code,nn.name+"",nn.code,rn.name+"",rn.code,an.name+"",an.code,on.name+"",on.code,sn.name+"",sn.code,ln.name+"",ln.code,cn.name+"",cn.code,un.name+"",un.code;ii.map(e=>e.code);function ym(e,t){const n=ii.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}var zr=Symbol.for("vercel.ai.schema");function vm(e,{validate:t}={}){return{[zr]:!0,_type:void 0,[On]:!0,jsonSchema:e,validate:t}}function bm(e){return typeof e=="object"&&e!==null&&zr in e&&e[zr]===!0&&"jsonSchema"in e&&"validate"in e}function mo(e){return bm(e)?e:_m(e)}function _m(e){return vm(hm(e),{validate:t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}}})}var wm=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},ot="1.9.0",go=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function xm(e){var t=new Set([e]),n=new Set,r=e.match(go);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(l){return l===e};function o(i){return n.add(i),!1}function s(i){return t.add(i),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var c=l.match(go);if(!c)return o(l);var u={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return u.prerelease!=null||a.major!==u.major?o(l):a.major===0?a.minor===u.minor&&a.patch<=u.patch?s(l):o(l):a.minor<=u.minor?s(l):o(l)}}var km=xm(ot),Sm=ot.split(".")[0],dn=Symbol.for("opentelemetry.js.api."+Sm),pn=wm;function Aa(e,t,n,r){var a;r===void 0&&(r=!1);var o=pn[dn]=(a=pn[dn])!==null&&a!==void 0?a:{version:ot};if(!r&&o[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(s.stack||s.message),!1}if(o.version!==ot){var s=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+e+" does not match previously registered API v"+ot);return n.error(s.stack||s.message),!1}return o[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+ot+"."),!0}function fn(e){var t,n,r=(t=pn[dn])===null||t===void 0?void 0:t.version;if(!(!r||!km(r)))return(n=pn[dn])===null||n===void 0?void 0:n[e]}function Ta(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+ot+".");var n=pn[dn];n&&delete n[e]}var Em=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,o=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(i){s={error:i}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},Cm=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,o;r<a;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Am=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Rt("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Rt("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Rt("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Rt("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Rt("verbose",this._namespace,t)},e}();function Rt(e,t,n){var r=fn("diag");if(r)return n.unshift(t),r[e].apply(r,Cm([],Em(n),!1))}var Se;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Se||(Se={}));function Tm(e,t){e<Se.NONE?e=Se.NONE:e>Se.ALL&&(e=Se.ALL),t=t||{};function n(r,a){var o=t[r];return typeof o=="function"&&e>=a?o.bind(t):function(){}}return{error:n("error",Se.ERROR),warn:n("warn",Se.WARN),info:n("info",Se.INFO),debug:n("debug",Se.DEBUG),verbose:n("verbose",Se.VERBOSE)}}var Im=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,o=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(i){s={error:i}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},Rm=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,o;r<a;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Nm="diag",Hn=function(){function e(){function t(a){return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var i=fn("diag");if(i)return i[a].apply(i,Rm([],Im(o),!1))}}var n=this,r=function(a,o){var s,i,l;if(o===void 0&&(o={logLevel:Se.INFO}),a===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((s=c.stack)!==null&&s!==void 0?s:c.message),!1}typeof o=="number"&&(o={logLevel:o});var u=fn("diag"),d=Tm((i=o.logLevel)!==null&&i!==void 0?i:Se.INFO,a);if(u&&!o.suppressOverrideMessage){var h=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+h),d.warn("Current logger will overwrite one already registered from "+h)}return Aa("diag",d,n,!0)};n.setLogger=r,n.disable=function(){Ta(Nm,n)},n.createComponentLogger=function(a){return new Am(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function jm(e){return Symbol.for(e)}var Pm=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var o=new e(n._currentContext);return o._currentContext.set(r,a),o},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),Om=new Pm,Mm=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,o=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(i){s={error:i}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},Dm=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,o;r<a;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Fm=function(){function e(){}return e.prototype.active=function(){return Om},e.prototype.with=function(t,n,r){for(var a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];return n.call.apply(n,Dm([r],Mm(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),$m=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,o=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(i){s={error:i}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},Lm=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,o;r<a;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},gr="context",Bm=new Fm,li=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return Aa(gr,t,Hn.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(a=this._getContextManager()).with.apply(a,Lm([t,n,r],$m(o),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return fn(gr)||Bm},e.prototype.disable=function(){this._getContextManager().disable(),Ta(gr,Hn.instance())},e}(),Vr;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(Vr||(Vr={}));var ci="0000000000000000",ui="00000000000000000000000000000000",Um={traceId:ui,spanId:ci,traceFlags:Vr.NONE},Ot=function(){function e(t){t===void 0&&(t=Um),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),Ia=jm("OpenTelemetry Context Key SPAN");function Ra(e){return e.getValue(Ia)||void 0}function Zm(){return Ra(li.getInstance().active())}function Na(e,t){return e.setValue(Ia,t)}function zm(e){return e.deleteValue(Ia)}function Vm(e,t){return Na(e,new Ot(t))}function di(e){var t;return(t=Ra(e))===null||t===void 0?void 0:t.spanContext()}var Gm=/^([0-9a-f]{32})$/i,Hm=/^[0-9a-f]{16}$/i;function qm(e){return Gm.test(e)&&e!==ui}function Wm(e){return Hm.test(e)&&e!==ci}function pi(e){return qm(e.traceId)&&Wm(e.spanId)}function Km(e){return new Ot(e)}var hr=li.getInstance(),fi=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=hr.active());var a=!!(n!=null&&n.root);if(a)return new Ot;var o=r&&di(r);return Ym(o)&&pi(o)?new Ot(o):new Ot},e.prototype.startActiveSpan=function(t,n,r,a){var o,s,i;if(!(arguments.length<2)){arguments.length===2?i=n:arguments.length===3?(o=n,i=r):(o=n,s=r,i=a);var l=s??hr.active(),c=this.startSpan(t,o,l),u=Na(l,c);return hr.with(u,i,void 0,c)}},e}();function Ym(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Jm=new fi,Xm=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Jm},e}(),Qm=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new fi},e}(),eg=new Qm,ho=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new Xm(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:eg},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),qn;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(qn||(qn={}));var yr="trace",tg=function(){function e(){this._proxyTracerProvider=new ho,this.wrapSpanContext=Km,this.isSpanContextValid=pi,this.deleteSpan=zm,this.getSpan=Ra,this.getActiveSpan=Zm,this.getSpanContext=di,this.setSpan=Na,this.setSpanContext=Vm}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=Aa(yr,this._proxyTracerProvider,Hn.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return fn(yr)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){Ta(yr,Hn.instance()),this._proxyTracerProvider=new ho},e}(),ng=tg.getInstance(),rg=Object.defineProperty,mi=(e,t)=>{for(var n in t)rg(e,n,{get:t[n],enumerable:!0})};async function ag(e){return e===void 0?Promise.resolve():new Promise(t=>setTimeout(t,e))}var Gr="AI_RetryError",gi=`vercel.ai.error.${Gr}`,og=Symbol.for(gi),hi,yo=class extends W{constructor({message:e,reason:t,errors:n}){super({name:Gr,message:e}),this[hi]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return W.hasMarker(e,gi)}static isRetryError(e){return e instanceof Error&&e.name===Gr&&typeof e.reason=="string"&&Array.isArray(e.errors)}toJSON(){return{name:this.name,message:this.message,reason:this.reason,lastError:this.lastError,errors:this.errors}}};hi=og;var sg=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>yi(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function yi(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(o){if(Cn(o)||t===0)throw o;const s=Wd(o),i=[...a,o],l=i.length;if(l>t)throw new yo({message:`Failed after ${l} attempts. Last error: ${s}`,reason:"maxRetriesExceeded",errors:i});if(o instanceof Error&&De.isAPICallError(o)&&o.isRetryable===!0&&l<=t)return await ag(n),yi(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},i);throw l===1?o:new yo({message:`Failed after ${l} attempts with non-retryable error: '${s}'`,reason:"errorNotRetryable",errors:i})}}function vr({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function ig({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((o,[s,i])=>(o[`ai.settings.${s}`]=i,o),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((o,[s,i])=>(o[`ai.telemetry.metadata.${s}`]=i,o),{}),...Object.entries(r??{}).reduce((o,[s,i])=>(i!==void 0&&(o[`ai.request.headers.${s}`]=i),o),{})}}var lg={startSpan(){return Sn},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(Sn);if(typeof n=="function")return n(Sn);if(typeof r=="function")return r(Sn)}},Sn={spanContext(){return cg},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},cg={traceId:"",spanId:"",traceFlags:0};function ug({isEnabled:e=!1,tracer:t}={}){return e?t||ng.getTracer("ai"):lg}function br({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async o=>{try{const s=await r(o);return a&&o.end(),s}catch(s){try{s instanceof Error?(o.recordException({name:s.name,message:s.message,stack:s.stack}),o.setStatus({code:qn.ERROR,message:s.message})):o.setStatus({code:qn.ERROR})}finally{o.end()}throw s}})}function gt({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const o=a.input();return o===void 0?n:{...n,[r]:o}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const o=a.output();return o===void 0?n:{...n,[r]:o}}return{...n,[r]:a}},{})}var Hr="AI_DownloadError",vi=`vercel.ai.error.${Hr}`,dg=Symbol.for(vi),bi,_r=class extends W{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:Hr,message:a,cause:r}),this[bi]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return W.hasMarker(e,vi)}static isDownloadError(e){return e instanceof Error&&e.name===Hr&&typeof e.url=="string"&&(e.statusCode==null||typeof e.statusCode=="number")&&(e.statusText==null||typeof e.statusText=="string")}toJSON(){return{name:this.name,message:this.message,url:this.url,statusCode:this.statusCode,statusText:this.statusText,cause:this.cause}}};bi=dg;async function pg({url:e,fetchImplementation:t=fetch}){var n;const r=e.toString();try{const a=await t(r);if(!a.ok)throw new _r({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw _r.isInstance(a)?a:new _r({url:r,cause:a})}}var fg=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function mg(e){for(const{bytes:t,mimeType:n}of fg)if(e.length>=t.length&&t.every((r,a)=>e[a]===r))return n}var qr="AI_InvalidDataContentError",_i=`vercel.ai.error.${qr}`,gg=Symbol.for(_i),wi,vo=class extends W{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:qr,message:n,cause:t}),this[wi]=!0,this.content=e}static isInstance(e){return W.hasMarker(e,_i)}static isInvalidDataContentError(e){return e instanceof Error&&e.name===qr&&e.content!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause,content:this.content}}};wi=gg;var xi=m.union([m.string(),m.instanceof(Uint8Array),m.instanceof(ArrayBuffer),m.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function hg(e){return typeof e=="string"?e:e instanceof ArrayBuffer?Mn(new Uint8Array(e)):Mn(e)}function Wn(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return sp(e)}catch(t){throw new vo({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new vo({content:e})}function yg(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var Wr="AI_InvalidMessageRoleError",ki=`vercel.ai.error.${Wr}`,vg=Symbol.for(ki),Si,bg=class extends W{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:Wr,message:t}),this[Si]=!0,this.role=e}static isInstance(e){return W.hasMarker(e,ki)}static isInvalidMessageRoleError(e){return e instanceof Error&&e.name===Wr&&typeof e.role=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,role:this.role}}};Si=vg;function _g(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function bo({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=pg}){const a=await xg(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(o=>wg(o,a))]}function wg(e,t){const n=e.role;switch(n){case"system":return{role:"system",content:e.content,providerMetadata:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata}:{role:"user",content:e.content.map(r=>kg(r,t)).filter(r=>r.type!=="text"||r.text!==""),providerMetadata:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(r=>r.type!=="text"||r.text!=="").map(r=>{const{experimental_providerMetadata:a,...o}=r;return{...o,providerMetadata:a}}),providerMetadata:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(r=>({type:"tool-result",toolCallId:r.toolCallId,toolName:r.toolName,result:r.result,content:r.experimental_content,isError:r.isError,providerMetadata:r.experimental_providerMetadata})),providerMetadata:e.experimental_providerMetadata};default:{const r=n;throw new bg({role:r})}}}async function xg(e,t,n,r){const a=e.filter(s=>s.role==="user").map(s=>s.content).filter(s=>Array.isArray(s)).flat().filter(s=>s.type==="image"||s.type==="file").filter(s=>!(s.type==="image"&&n===!0)).map(s=>s.type==="image"?s.image:s.data).map(s=>typeof s=="string"&&(s.startsWith("http:")||s.startsWith("https:"))?new URL(s):s).filter(s=>s instanceof URL).filter(s=>!r(s)),o=await Promise.all(a.map(async s=>({url:s,data:await t({url:s})})));return Object.fromEntries(o.map(({url:s,data:i})=>[s.toString(),i]))}function kg(e,t){if(e.type==="text")return{type:"text",text:e.text,providerMetadata:e.experimental_providerMetadata};let n=e.mimeType,r,a,o;const s=e.type;switch(s){case"image":r=e.image;break;case"file":r=e.data;break;default:throw new Error(`Unsupported part type: ${s}`)}try{a=typeof r=="string"?new URL(r):r}catch{a=r}if(a instanceof URL)if(a.protocol==="data:"){const{mimeType:i,base64Content:l}=_g(a.toString());if(i==null||l==null)throw new Error(`Invalid data URL format in part ${s}`);n=i,o=Wn(l)}else{const i=t[a.toString()];i?(o=i.data,n??(n=i.mimeType)):o=a}else o=Wn(a);switch(s){case"image":return n==null&&o instanceof Uint8Array&&(n=mg(o)),{type:"image",image:o,mimeType:n,providerMetadata:e.experimental_providerMetadata};case"file":if(n==null)throw new Error("Mime type is missing for file part");return{type:"file",data:o instanceof Uint8Array?hg(o):o,mimeType:n,providerMetadata:e.experimental_providerMetadata}}}var Kr="AI_InvalidArgumentError",Ei=`vercel.ai.error.${Kr}`,Sg=Symbol.for(Ei),Ci,re=class extends W{constructor({parameter:e,value:t,message:n}){super({name:Kr,message:`Invalid argument for parameter ${e}: ${n}`}),this[Ci]=!0,this.parameter=e,this.value=t}static isInstance(e){return W.hasMarker(e,Ei)}static isInvalidArgumentError(e){return e instanceof Error&&e.name===Kr&&typeof e.parameter=="string"&&typeof e.value=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,parameter:this.parameter,value:this.value}}};Ci=Sg;function _o({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:o,stopSequences:s,seed:i,maxRetries:l}){if(e!=null){if(!Number.isInteger(e))throw new re({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new re({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new re({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new re({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new re({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new re({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(o!=null&&typeof o!="number")throw new re({parameter:"frequencyPenalty",value:o,message:"frequencyPenalty must be a number"});if(i!=null&&!Number.isInteger(i))throw new re({parameter:"seed",value:i,message:"seed must be an integer"});if(l!=null){if(!Number.isInteger(l))throw new re({parameter:"maxRetries",value:l,message:"maxRetries must be an integer"});if(l<0)throw new re({parameter:"maxRetries",value:l,message:"maxRetries must be >= 0"})}return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:o,stopSequences:s!=null&&s.length>0?s:void 0,seed:i,maxRetries:l??2}}var Yr=m.lazy(()=>m.union([m.null(),m.string(),m.number(),m.boolean(),m.record(m.string(),Yr),m.array(Yr)])),nt=m.record(m.string(),m.record(m.string(),Yr)),Eg=m.array(m.union([m.object({type:m.literal("text"),text:m.string()}),m.object({type:m.literal("image"),data:m.string(),mimeType:m.string().optional()})])),Ai=m.object({type:m.literal("text"),text:m.string(),experimental_providerMetadata:nt.optional()}),Cg=m.object({type:m.literal("image"),image:m.union([xi,m.instanceof(URL)]),mimeType:m.string().optional(),experimental_providerMetadata:nt.optional()}),Ag=m.object({type:m.literal("file"),data:m.union([xi,m.instanceof(URL)]),mimeType:m.string(),experimental_providerMetadata:nt.optional()}),Tg=m.object({type:m.literal("tool-call"),toolCallId:m.string(),toolName:m.string(),args:m.unknown()}),Ig=m.object({type:m.literal("tool-result"),toolCallId:m.string(),toolName:m.string(),result:m.unknown(),content:Eg.optional(),isError:m.boolean().optional(),experimental_providerMetadata:nt.optional()}),Rg=m.object({role:m.literal("system"),content:m.string(),experimental_providerMetadata:nt.optional()}),Ng=m.object({role:m.literal("user"),content:m.union([m.string(),m.array(m.union([Ai,Cg,Ag]))]),experimental_providerMetadata:nt.optional()}),jg=m.object({role:m.literal("assistant"),content:m.union([m.string(),m.array(m.union([Ai,Tg]))]),experimental_providerMetadata:nt.optional()}),Pg=m.object({role:m.literal("tool"),content:m.array(Ig),experimental_providerMetadata:nt.optional()}),Og=m.union([Rg,Ng,jg,Pg]);function Mg(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(Dg);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function Dg(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}function Fg(e){var t,n,r;const a=[];for(const o of e){let s;try{s=new URL(o.url)}catch{throw new Error(`Invalid URL: ${o.url}`)}switch(s.protocol){case"http:":case"https:":{if((t=o.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:s});else{if(!o.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:s,mimeType:o.contentType})}break}case"data:":{let i,l,c;try{[i,l]=o.url.split(","),c=i.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${o.url}`)}if(c==null||l==null)throw new Error(`Invalid data URL format: ${o.url}`);if((n=o.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:Wn(l)});else if((r=o.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:yg(Wn(l))});else{if(!o.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:l,mimeType:o.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${s.protocol}`)}}return a}var Ti="AI_MessageConversionError",Ii=`vercel.ai.error.${Ti}`,$g=Symbol.for(Ii),Ri,wo=class extends W{constructor({originalMessage:e,message:t}){super({name:Ti,message:t}),this[Ri]=!0,this.originalMessage=e}static isInstance(e){return W.hasMarker(e,Ii)}};Ri=$g;function Lg(e,t){var n;const r=(n=t==null?void 0:t.tools)!=null?n:{},a=[];for(const o of e){const{role:s,content:i,toolInvocations:l,experimental_attachments:c}=o;switch(s){case"system":{a.push({role:"system",content:i});break}case"user":{a.push({role:"user",content:c?[{type:"text",text:i},...Fg(c)]:i});break}case"assistant":{if(l==null){a.push({role:"assistant",content:i});break}a.push({role:"assistant",content:[{type:"text",text:i},...l.map(({toolCallId:u,toolName:d,args:h})=>({type:"tool-call",toolCallId:u,toolName:d,args:h}))]}),a.push({role:"tool",content:l.map(u=>{if(!("result"in u))throw new wo({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(u)});const{toolCallId:d,toolName:h,result:b}=u,f=r[h];return(f==null?void 0:f.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:d,toolName:h,result:f.experimental_toToolResultContent(b),experimental_content:f.experimental_toToolResultContent(b)}:{type:"tool-result",toolCallId:d,toolName:h,result:b}})});break}case"function":case"data":case"tool":break;default:{const u=s;throw new wo({originalMessage:o,message:`Unsupported role: ${u}`})}}}return a}function xo({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new at({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new at({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new at({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new at({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=Mg(e.messages);if(n==="other")throw new at({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?Lg(e.messages,{tools:t}):e.messages,a=wt({value:r,schema:m.array(Og)});if(!a.success)throw new at({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function Bg(e){return{promptTokens:e.promptTokens,completionTokens:e.completionTokens,totalTokens:e.promptTokens+e.completionTokens}}function ja(e,{contentType:t,dataStreamVersion:n}){var r;const a=new Headers((r=e==null?void 0:e.headers)!=null?r:{});return a.has("Content-Type")||a.set("Content-Type",t),n!==void 0&&a.set("X-Vercel-AI-Data-Stream",n),a}var Ug="JSON schema:",Zg="You MUST answer with a JSON object that matches the JSON schema above.",zg="You MUST answer with JSON.";function ko({prompt:e,schema:t,schemaPrefix:n=t!=null?Ug:void 0,schemaSuffix:r=t!=null?Zg:zg}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}var Jr="AI_NoObjectGeneratedError",Ni=`vercel.ai.error.${Jr}`,Vg=Symbol.for(Ni),ji,Xr=class extends W{constructor({message:e="No object generated."}={}){super({name:Jr,message:e}),this[ji]=!0}static isInstance(e){return W.hasMarker(e,Ni)}static isNoObjectGeneratedError(e){return e instanceof Error&&e.name===Jr}toJSON(){return{name:this.name,cause:this.cause,message:this.message,stack:this.stack}}};ji=Vg;function Gg(e,t){const n=e.pipeThrough(new TransformStream(t));return n[Symbol.asyncIterator]=()=>{const r=n.getReader();return{async next(){const{done:a,value:o}=await r.read();return a?{done:!0,value:void 0}:{done:!1,value:o}}}},n}var Hg={type:"no-schema",jsonSchema:void 0,validatePartialResult({value:e,textDelta:t}){return{success:!0,value:{partial:e,textDelta:t}}},validateFinalResult(e){return e===void 0?{success:!1,error:new Xr}:{success:!0,value:e}},createElementStream(){throw new pe({functionality:"element streams in no-schema mode"})}},qg=e=>({type:"object",jsonSchema:e.jsonSchema,validatePartialResult({value:t,textDelta:n}){return{success:!0,value:{partial:t,textDelta:n}}},validateFinalResult(t){return wt({value:t,schema:e})},createElementStream(){throw new pe({functionality:"element streams in object mode"})}}),Wg=e=>{const{$schema:t,...n}=e.jsonSchema;return{type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:n}},required:["elements"],additionalProperties:!1},validatePartialResult({value:r,latestObject:a,isFirstDelta:o,isFinalDelta:s}){var i;if(!$r(r)||!to(r.elements))return{success:!1,error:new Ke({value:r,cause:"value must be an object that contains an array of elements"})};const l=r.elements,c=[];for(let h=0;h<l.length;h++){const b=l[h],f=wt({value:b,schema:e});if(!(h===l.length-1&&!s)){if(!f.success)return f;c.push(f.value)}}const u=(i=a==null?void 0:a.length)!=null?i:0;let d="";return o&&(d+="["),u>0&&(d+=","),d+=c.slice(u).map(h=>JSON.stringify(h)).join(","),s&&(d+="]"),{success:!0,value:{partial:c,textDelta:d}}},validateFinalResult(r){if(!$r(r)||!to(r.elements))return{success:!1,error:new Ke({value:r,cause:"value must be an object that contains an array of elements"})};const a=r.elements;for(const o of a){const s=wt({value:o,schema:e});if(!s.success)return s}return{success:!0,value:a}},createElementStream(r){let a=0;return Gg(r,{transform(o,s){switch(o.type){case"object":{const i=o.object;for(;a<i.length;a++)s.enqueue(i[a]);break}case"text-delta":case"finish":break;case"error":s.error(o.error);break;default:{const i=o;throw new Error(`Unsupported chunk type: ${i}`)}}}})}}},Kg=e=>({type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},validateFinalResult(t){if(!$r(t)||typeof t.result!="string")return{success:!1,error:new Ke({value:t,cause:'value must be an object that contains a string in the "result" property.'})};const n=t.result;return e.includes(n)?{success:!0,value:n}:{success:!1,error:new Ke({value:t,cause:"value must be a string in the enum"})}},validatePartialResult(){throw new pe({functionality:"partial results in enum mode"})},createElementStream(){throw new pe({functionality:"element streams in enum mode"})}});function Yg({output:e,schema:t,enumValues:n}){switch(e){case"object":return qg(mo(t));case"array":return Wg(mo(t));case"enum":return Kg(n);case"no-schema":return Hg;default:{const r=e;throw new Error(`Unsupported output: ${r}`)}}}function Jg({output:e,mode:t,schema:n,schemaName:r,schemaDescription:a,enumValues:o}){if(e!=null&&e!=="object"&&e!=="array"&&e!=="enum"&&e!=="no-schema")throw new re({parameter:"output",value:e,message:"Invalid output type."});if(e==="no-schema"){if(t==="auto"||t==="tool")throw new re({parameter:"mode",value:t,message:'Mode must be "json" for no-schema output.'});if(n!=null)throw new re({parameter:"schema",value:n,message:"Schema is not supported for no-schema output."});if(a!=null)throw new re({parameter:"schemaDescription",value:a,message:"Schema description is not supported for no-schema output."});if(r!=null)throw new re({parameter:"schemaName",value:r,message:"Schema name is not supported for no-schema output."});if(o!=null)throw new re({parameter:"enumValues",value:o,message:"Enum values are not supported for no-schema output."})}if(e==="object"){if(n==null)throw new re({parameter:"schema",value:n,message:"Schema is required for object output."});if(o!=null)throw new re({parameter:"enumValues",value:o,message:"Enum values are not supported for object output."})}if(e==="array"){if(n==null)throw new re({parameter:"schema",value:n,message:"Element schema is required for array output."});if(o!=null)throw new re({parameter:"enumValues",value:o,message:"Enum values are not supported for array output."})}if(e==="enum"){if(n!=null)throw new re({parameter:"schema",value:n,message:"Schema is not supported for enum output."});if(a!=null)throw new re({parameter:"schemaDescription",value:a,message:"Schema description is not supported for enum output."});if(r!=null)throw new re({parameter:"schemaName",value:r,message:"Schema name is not supported for enum output."});if(o==null)throw new re({parameter:"enumValues",value:o,message:"Enum values are required for enum output."});for(const s of o)if(typeof s!="string")throw new re({parameter:"enumValues",value:s,message:"Enum values must be strings."})}}var Xg=hn({prefix:"aiobj",size:24});async function Qg({model:e,enum:t,schema:n,schemaName:r,schemaDescription:a,mode:o,output:s="object",system:i,prompt:l,messages:c,maxRetries:u,abortSignal:d,headers:h,experimental_telemetry:b,experimental_providerMetadata:f,_internal:{generateId:g=Xg,currentDate:y=()=>new Date}={},...w}){Jg({output:s,mode:o,schema:n,schemaName:r,schemaDescription:a,enumValues:t});const _=Yg({output:s,schema:n,enumValues:t});_.type==="no-schema"&&o===void 0&&(o="json");const x=ig({model:e,telemetry:b,headers:h,settings:{...w,maxRetries:u}}),T=ug(b);return br({name:"ai.generateObject",attributes:gt({telemetry:b,attributes:{...vr({operationId:"ai.generateObject",telemetry:b}),...x,"ai.prompt":{input:()=>JSON.stringify({system:i,prompt:l,messages:c})},"ai.schema":_.jsonSchema!=null?{input:()=>JSON.stringify(_.jsonSchema)}:void 0,"ai.schema.name":r,"ai.schema.description":a,"ai.settings.output":_.type,"ai.settings.mode":o}}),tracer:T,fn:async j=>{var N,M;const O=sg({maxRetries:u});(o==="auto"||o==null)&&(o=e.defaultObjectGenerationMode);let I,F,z,K,me,Y,se,ne,ce;switch(o){case"json":{const D=xo({prompt:{system:_.jsonSchema==null?ko({prompt:i}):e.supportsStructuredOutputs?i:ko({prompt:i,schema:_.jsonSchema}),prompt:l,messages:c},tools:void 0}),V=await bo({prompt:D,modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:e.supportsUrl}),L=await O(()=>br({name:"ai.generateObject.doGenerate",attributes:gt({telemetry:b,attributes:{...vr({operationId:"ai.generateObject.doGenerate",telemetry:b}),...x,"ai.prompt.format":{input:()=>D.type},"ai.prompt.messages":{input:()=>JSON.stringify(V)},"ai.settings.mode":o,"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":w.frequencyPenalty,"gen_ai.request.max_tokens":w.maxTokens,"gen_ai.request.presence_penalty":w.presencePenalty,"gen_ai.request.temperature":w.temperature,"gen_ai.request.top_k":w.topK,"gen_ai.request.top_p":w.topP}}),tracer:T,fn:async J=>{var ee,te,ue,ie,de,oe;const H=await e.doGenerate({mode:{type:"object-json",schema:_.jsonSchema,name:r,description:a},..._o(w),inputFormat:D.type,prompt:V,providerMetadata:f,abortSignal:d,headers:h});if(H.text===void 0)throw new Xr;const ge={id:(te=(ee=H.response)==null?void 0:ee.id)!=null?te:g(),timestamp:(ie=(ue=H.response)==null?void 0:ue.timestamp)!=null?ie:y(),modelId:(oe=(de=H.response)==null?void 0:de.modelId)!=null?oe:e.modelId};return J.setAttributes(gt({telemetry:b,attributes:{"ai.response.finishReason":H.finishReason,"ai.response.object":{output:()=>H.text},"ai.response.id":ge.id,"ai.response.model":ge.modelId,"ai.response.timestamp":ge.timestamp.toISOString(),"ai.usage.promptTokens":H.usage.promptTokens,"ai.usage.completionTokens":H.usage.completionTokens,"ai.finishReason":H.finishReason,"ai.result.object":{output:()=>H.text},"gen_ai.response.finish_reasons":[H.finishReason],"gen_ai.response.id":ge.id,"gen_ai.response.model":ge.modelId,"gen_ai.usage.prompt_tokens":H.usage.promptTokens,"gen_ai.usage.completion_tokens":H.usage.completionTokens}})),{...H,objectText:H.text,responseData:ge}}}));I=L.objectText,F=L.finishReason,z=L.usage,K=L.warnings,me=L.rawResponse,ne=L.logprobs,ce=L.providerMetadata,se=(N=L.request)!=null?N:{},Y=L.responseData;break}case"tool":{const D=xo({prompt:{system:i,prompt:l,messages:c},tools:void 0}),V=await bo({prompt:D,modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:e.supportsUrl}),L=D.type,J=await O(()=>br({name:"ai.generateObject.doGenerate",attributes:gt({telemetry:b,attributes:{...vr({operationId:"ai.generateObject.doGenerate",telemetry:b}),...x,"ai.prompt.format":{input:()=>L},"ai.prompt.messages":{input:()=>JSON.stringify(V)},"ai.settings.mode":o,"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":w.frequencyPenalty,"gen_ai.request.max_tokens":w.maxTokens,"gen_ai.request.presence_penalty":w.presencePenalty,"gen_ai.request.temperature":w.temperature,"gen_ai.request.top_k":w.topK,"gen_ai.request.top_p":w.topP}}),tracer:T,fn:async ee=>{var te,ue,ie,de,oe,H,ge,It;const be=await e.doGenerate({mode:{type:"object-tool",tool:{type:"function",name:r??"json",description:a??"Respond with a JSON object.",parameters:_.jsonSchema}},..._o(w),inputFormat:L,prompt:V,providerMetadata:f,abortSignal:d,headers:h}),mt=(ue=(te=be.toolCalls)==null?void 0:te[0])==null?void 0:ue.args;if(mt===void 0)throw new Xr;const qe={id:(de=(ie=be.response)==null?void 0:ie.id)!=null?de:g(),timestamp:(H=(oe=be.response)==null?void 0:oe.timestamp)!=null?H:y(),modelId:(It=(ge=be.response)==null?void 0:ge.modelId)!=null?It:e.modelId};return ee.setAttributes(gt({telemetry:b,attributes:{"ai.response.finishReason":be.finishReason,"ai.response.object":{output:()=>mt},"ai.response.id":qe.id,"ai.response.model":qe.modelId,"ai.response.timestamp":qe.timestamp.toISOString(),"ai.usage.promptTokens":be.usage.promptTokens,"ai.usage.completionTokens":be.usage.completionTokens,"ai.finishReason":be.finishReason,"ai.result.object":{output:()=>mt},"gen_ai.response.finish_reasons":[be.finishReason],"gen_ai.response.id":qe.id,"gen_ai.response.model":qe.modelId,"gen_ai.usage.input_tokens":be.usage.promptTokens,"gen_ai.usage.output_tokens":be.usage.completionTokens}})),{...be,objectText:mt,responseData:qe}}}));I=J.objectText,F=J.finishReason,z=J.usage,K=J.warnings,me=J.rawResponse,ne=J.logprobs,ce=J.providerMetadata,se=(M=J.request)!=null?M:{},Y=J.responseData;break}case void 0:throw new Error("Model does not have a default object generation mode.");default:{const D=o;throw new Error(`Unsupported mode: ${D}`)}}const G=xa({text:I});if(!G.success)throw G.error;const S=_.validateFinalResult(G.value);if(!S.success)throw S.error;return j.setAttributes(gt({telemetry:b,attributes:{"ai.response.finishReason":F,"ai.response.object":{output:()=>JSON.stringify(S.value)},"ai.usage.promptTokens":z.promptTokens,"ai.usage.completionTokens":z.completionTokens,"ai.finishReason":F,"ai.result.object":{output:()=>JSON.stringify(S.value)}}})),new eh({object:S.value,finishReason:F,usage:Bg(z),warnings:K,request:se,response:{...Y,headers:me==null?void 0:me.headers},logprobs:ne,providerMetadata:ce})}})}var eh=class{constructor(e){this.object=e.object,this.finishReason=e.finishReason,this.usage=e.usage,this.warnings=e.warnings,this.experimental_providerMetadata=e.providerMetadata,this.response=e.response,this.request=e.request,this.rawResponse={headers:e.response.headers},this.logprobs=e.logprobs}toJsonResponse(e){var t;return new Response(JSON.stringify(this.object),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:ja(e,{contentType:"application/json; charset=utf-8"})})}};hn({prefix:"aiobj",size:24});hn({prefix:"aitxt",size:24});function Pi(e,t){const n=e.getReader(),r=t.getReader();let a,o,s=!1,i=!1;async function l(u){try{a==null&&(a=n.read());const d=await a;a=void 0,d.done?u.close():u.enqueue(d.value)}catch(d){u.error(d)}}async function c(u){try{o==null&&(o=r.read());const d=await o;o=void 0,d.done?u.close():u.enqueue(d.value)}catch(d){u.error(d)}}return new ReadableStream({async pull(u){try{if(s){await c(u);return}if(i){await l(u);return}a==null&&(a=n.read()),o==null&&(o=r.read());const{result:d,reader:h}=await Promise.race([a.then(b=>({result:b,reader:n})),o.then(b=>({result:b,reader:r}))]);d.done||u.enqueue(d.value),h===n?(a=void 0,d.done&&(await c(u),s=!0)):(o=void 0,d.done&&(i=!0,await l(u)))}catch(d){u.error(d)}},cancel(){n.cancel(),r.cancel()}})}hn({prefix:"aitxt",size:24});function Oi(e){const t=new TextEncoder;let n="";const r=e||{};return new TransformStream({async start(){r.onStart&&await r.onStart()},async transform(a,o){const s=typeof a=="string"?a:a.content;o.enqueue(t.encode(s)),n+=s,r.onToken&&await r.onToken(s),r.onText&&typeof a=="string"&&await r.onText(a)},async flush(){const a=th(r);r.onCompletion&&await r.onCompletion(n),r.onFinal&&!a&&await r.onFinal(n)}})}function th(e){return"experimental_onFunctionCall"in e}function nh(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}function Mi(){const e=new TextEncoder,t=new TextDecoder;return new TransformStream({transform:async(n,r)=>{const a=t.decode(n);r.enqueue(e.encode(ym("text",a)))}})}new TextDecoder("utf-8");var rh={};mi(rh,{toAIStream:()=>ah,toDataStream:()=>Pa,toDataStreamResponse:()=>oh});function ah(e,t){return Pa(e,t)}function Pa(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&So((a=n.data)==null?void 0:a.chunk,r);return}So(n,r)}})).pipeThrough(Oi(t)).pipeThrough(Mi())}function oh(e,t){var n;const r=Pa(e,t==null?void 0:t.callbacks),a=t==null?void 0:t.data,o=t==null?void 0:t.init,s=a?Pi(a.stream,r):r;return new Response(s,{status:(n=o==null?void 0:o.status)!=null?n:200,statusText:o==null?void 0:o.statusText,headers:ja(o,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function So(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var sh={};mi(sh,{toDataStream:()=>Di,toDataStreamResponse:()=>ih});function Di(e,t){return lh(e).pipeThrough(Oi(t)).pipeThrough(Mi())}function ih(e,t={}){var n;const{init:r,data:a,callbacks:o}=t,s=Di(e,o),i=a?Pi(a.stream,s):s;return new Response(i,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:ja(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function lh(e){const t=e[Symbol.asyncIterator](),n=nh();return new ReadableStream({async pull(r){var a;const{value:o,done:s}=await t.next();if(s){r.close();return}const i=n((a=o.delta)!=null?a:"");i&&r.enqueue(i)}})}const Oa=async({messages:e,systemPrompt:t,prompt:n,extractedCode:r,model:a})=>await Qg({model:a,schema:If,output:"object",messages:[{role:"system",content:t},{role:"system",content:`extractedCode (this code is writen by user): ${r}`},...e,{role:"user",content:n}]});class ch{constructor(){We(this,"name","openai_3.5_turbo");We(this,"apiKey","")}init(t){this.apiKey=t}async generateResponse(t){var n;try{const r=Ca({compatibility:"strict",apiKey:this.apiKey});return{error:null,success:(await Oa({model:r((n=ct.find(o=>o.name===this.name))==null?void 0:n.model),messages:t.messages,systemPrompt:t.systemPrompt,prompt:t.prompt,extractedCode:t.extractedCode})).object}}catch(r){return{error:r,success:null}}}}function Me(e){if(uh(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:o,allOf:s,anyOf:i,oneOf:l,format:c,const:u,minLength:d}=e,h={};return n&&(h.description=n),r&&(h.required=r),c&&(h.format=c),u!==void 0&&(h.enum=[u]),t&&(Array.isArray(t)?t.includes("null")?(h.type=t.filter(b=>b!=="null")[0],h.nullable=!0):h.type=t:t==="null"?h.type="null":h.type=t),a!=null&&(h.properties=Object.entries(a).reduce((b,[f,g])=>(b[f]=Me(g),b),{})),o&&(h.items=Array.isArray(o)?o.map(Me):Me(o)),s&&(h.allOf=s.map(Me)),i&&(h.anyOf=i.map(Me)),l&&(h.oneOf=l.map(Me)),d!==void 0&&(h.minLength=d),h}function uh(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function dh(e){var t,n;const r=[],a=[];let o=!0;for(const{role:s,content:i}of e)switch(s){case"system":{if(!o)throw new pe({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:i});break}case"user":{o=!1;const l=[];for(const c of i)switch(c.type){case"text":{l.push({text:c.text});break}case"image":{l.push(c.image instanceof URL?{fileData:{mimeType:(t=c.mimeType)!=null?t:"image/jpeg",fileUri:c.image.toString()}}:{inlineData:{mimeType:(n=c.mimeType)!=null?n:"image/jpeg",data:Mn(c.image)}});break}case"file":{l.push(c.data instanceof URL?{fileData:{mimeType:c.mimeType,fileUri:c.data.toString()}}:{inlineData:{mimeType:c.mimeType,data:c.data}});break}default:{const u=c;throw new pe({functionality:`prompt part: ${u}`})}}a.push({role:"user",parts:l});break}case"assistant":{o=!1,a.push({role:"model",parts:i.map(l=>{switch(l.type){case"text":return l.text.length===0?void 0:{text:l.text};case"tool-call":return{functionCall:{name:l.toolName,args:l.args}}}}).filter(l=>l!==void 0)});break}case"tool":{o=!1,a.push({role:"user",parts:i.map(l=>({functionResponse:{name:l.toolName,response:l.result}}))});break}default:{const l=s;throw new Error(`Unsupported role: ${l}`)}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function Eo(e){return e.includes("/")?e:`models/${e}`}var ph=m.object({error:m.object({code:m.number().nullable(),message:m.string(),status:m.string()})}),Qr=zs({errorSchema:ph,errorToMessage:e=>e.error.message});function fh(e){var t,n;const r=(t=e.tools)!=null&&t.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,toolConfig:void 0,toolWarnings:a};const o=[];for(const l of r)l.type==="provider-defined"?a.push({type:"unsupported-tool",tool:l}):o.push({name:l.name,description:(n=l.description)!=null?n:"",parameters:Me(l.parameters)});const s=e.toolChoice;if(s==null)return{tools:{functionDeclarations:o},toolConfig:void 0,toolWarnings:a};const i=s.type;switch(i){case"auto":return{tools:{functionDeclarations:o},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:a};case"none":return{tools:{functionDeclarations:o},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:a};case"required":return{tools:{functionDeclarations:o},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:a};case"tool":return{tools:{functionDeclarations:o},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[s.toolName]}},toolWarnings:a};default:{const l=i;throw new pe({functionality:`Unsupported tool choice type: ${l}`})}}}function Co({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"RECITATION":case"SAFETY":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";default:return"unknown"}}var mh=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsObjectGeneration(){return this.settings.structuredOutputs!==!1}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:o,frequencyPenalty:s,presencePenalty:i,stopSequences:l,responseFormat:c,seed:u}){var d;const h=e.type,b=[];u!=null&&b.push({type:"unsupported-setting",setting:"seed"});const f={maxOutputTokens:n,temperature:r,topK:o??this.settings.topK,topP:a,frequencyPenalty:s,presencePenalty:i,stopSequences:l,responseMimeType:(c==null?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(c==null?void 0:c.type)==="json"&&c.schema!=null&&this.supportsObjectGeneration?Me(c.schema):void 0},{contents:g,systemInstruction:y}=dh(t);switch(h){case"regular":{const{tools:w,toolConfig:_,toolWarnings:x}=fh(e);return{args:{generationConfig:f,contents:g,systemInstruction:y,safetySettings:this.settings.safetySettings,tools:w,toolConfig:_,cachedContent:this.settings.cachedContent},warnings:[...b,...x]}}case"object-json":return{args:{generationConfig:{...f,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsObjectGeneration?Me(e.schema):void 0},contents:g,systemInstruction:y,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};case"object-tool":return{args:{generationConfig:f,contents:g,tools:{functionDeclarations:[{name:e.tool.name,description:(d=e.tool.description)!=null?d:"",parameters:Me(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};default:{const w=h;throw new Error(`Unsupported type: ${w}`)}}}supportsUrl(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}async doGenerate(e){var t,n;const{args:r,warnings:a}=await this.getArgs(e),o=JSON.stringify(r),{responseHeaders:s,value:i}=await Je({url:`${this.config.baseURL}/${Eo(this.modelId)}:generateContent`,headers:Ye(this.config.headers(),e.headers),body:r,failedResponseHandler:Qr,successfulResponseHandler:yn(gh),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:l,...c}=r,u=i.candidates[0],d=Ao({parts:u.content.parts,generateId:this.config.generateId}),h=i.usageMetadata;return{text:To(u.content.parts),toolCalls:d,finishReason:Co({finishReason:u.finishReason,hasToolCalls:d!=null&&d.length>0}),usage:{promptTokens:(t=h==null?void 0:h.promptTokenCount)!=null?t:NaN,completionTokens:(n=h==null?void 0:h.candidatesTokenCount)!=null?n:NaN},rawCall:{rawPrompt:l,rawSettings:c},rawResponse:{headers:s},warnings:a,request:{body:o}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),{responseHeaders:a,value:o}=await Je({url:`${this.config.baseURL}/${Eo(this.modelId)}:streamGenerateContent?alt=sse`,headers:Ye(this.config.headers(),e.headers),body:t,failedResponseHandler:Qr,successfulResponseHandler:ka(hh),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:s,...i}=t;let l="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN};const u=this.config.generateId;let d=!1;return{stream:o.pipeThrough(new TransformStream({transform(h,b){var f,g;if(!h.success){b.enqueue({type:"error",error:h.error});return}const y=h.value,w=y.candidates[0];(w==null?void 0:w.finishReason)!=null&&(l=Co({finishReason:w.finishReason,hasToolCalls:d}));const _=y.usageMetadata;_!=null&&(c={promptTokens:(f=_.promptTokenCount)!=null?f:NaN,completionTokens:(g=_.candidatesTokenCount)!=null?g:NaN});const x=w.content;if(x==null)return;const T=To(x.parts);T!=null&&b.enqueue({type:"text-delta",textDelta:T});const j=Ao({parts:x.parts,generateId:u});if(j!=null)for(const N of j)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:N.toolCallId,toolName:N.toolName,argsTextDelta:N.args}),b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:N.toolCallId,toolName:N.toolName,args:N.args}),d=!0},flush(h){h.enqueue({type:"finish",finishReason:l,usage:c})}})),rawCall:{rawPrompt:s,rawSettings:i},rawResponse:{headers:a},warnings:n,request:{body:r}}}};function Ao({parts:e,generateId:t}){const n=e.filter(r=>"functionCall"in r);return n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function To(e){const t=e.filter(n=>"text"in n);return t.length===0?void 0:t.map(n=>n.text).join("")}var Fi=m.object({role:m.string(),parts:m.array(m.union([m.object({text:m.string()}),m.object({functionCall:m.object({name:m.string(),args:m.unknown()})})]))}),gh=m.object({candidates:m.array(m.object({content:Fi,finishReason:m.string().optional()})),usageMetadata:m.object({promptTokenCount:m.number(),candidatesTokenCount:m.number().nullish(),totalTokenCount:m.number()}).optional()}),hh=m.object({candidates:m.array(m.object({content:Fi.optional(),finishReason:m.string().optional()})),usageMetadata:m.object({promptTokenCount:m.number(),candidatesTokenCount:m.number().nullish(),totalTokenCount:m.number()}).optional()}),yh=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new Os({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await Je({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:Ye(this.config.headers(),t),body:{requests:e.map(o=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:o}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:Qr,successfulResponseHandler:yn(vh),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.embeddings.map(o=>o.values),usage:void 0,rawResponse:{headers:r}}}},vh=m.object({embeddings:m.array(m.object({values:m.array(m.number())}))});function $i(e={}){var t,n;const r=(n=Vs((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://generativelanguage.googleapis.com/v1beta",a=()=>({"x-goog-api-key":Zs({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),o=(l,c={})=>{var u;return new mh(l,c,{provider:"google.generative-ai",baseURL:r,headers:a,generateId:(u=e.generateId)!=null?u:ht,fetch:e.fetch})},s=(l,c={})=>new yh(l,c,{provider:"google.generative-ai",baseURL:r,headers:a,fetch:e.fetch}),i=function(l,c){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return o(l,c)};return i.languageModel=o,i.chat=o,i.generativeAI=o,i.embedding=s,i.textEmbedding=s,i.textEmbeddingModel=s,i}$i();class bh{constructor(){We(this,"name","gemini_1.5_pro");We(this,"apiKey","")}init(t){this.apiKey=t}async generateResponse(t){var n;try{const r=$i({apiKey:this.apiKey});return{error:null,success:(await Oa({model:r((n=ct.find(o=>o.name===this.name))==null?void 0:n.model),messages:t.messages,systemPrompt:t.systemPrompt,prompt:t.prompt,extractedCode:t.extractedCode})).object}}catch(r){return{error:r,success:null}}}}class _h{constructor(){We(this,"name","openai_4o");We(this,"apiKey","")}init(t){this.apiKey=t}async generateResponse(t){var n;try{const r=Ca({compatibility:"strict",apiKey:this.apiKey});return{error:null,success:(await Oa({model:r((n=ct.find(o=>o.name===this.name))==null?void 0:n.model),messages:t.messages,systemPrompt:t.systemPrompt,prompt:t.prompt,extractedCode:t.extractedCode})).object}}catch(r){return{error:r,success:null}}}}const Io={"openai_3.5_turbo":new ch,openai_4o:new _h,"gemini_1.5_pro":new bh};class wh{constructor(){We(this,"activeModal",null)}selectModal(t,n){if(Io[t])this.activeModal=Io[t],this.activeModal.init(n);else throw new Error(`Modal "${t}" not found`)}async generate(t){if(!this.activeModal)throw new Error("No modal selected");return this.activeModal.generateResponse(t)}}const xh=e=>e.map(t=>({role:t.role,content:typeof t.content=="string"?t.content:JSON.stringify(t.content)}));function kh(e,t){return v.useReducer((n,r)=>t[n][r]??n,e)}var Ma="ScrollArea",[Li,Nv]=Ct(Ma),[Sh,Ae]=Li(Ma),Bi=v.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:o=600,...s}=e,[i,l]=v.useState(null),[c,u]=v.useState(null),[d,h]=v.useState(null),[b,f]=v.useState(null),[g,y]=v.useState(null),[w,_]=v.useState(0),[x,T]=v.useState(0),[j,N]=v.useState(!1),[M,O]=v.useState(!1),I=xe(t,z=>l(z)),F=Qn(a);return p.jsx(Sh,{scope:n,type:r,dir:F,scrollHideDelay:o,scrollArea:i,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:b,onScrollbarXChange:f,scrollbarXEnabled:j,onScrollbarXEnabledChange:N,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:M,onScrollbarYEnabledChange:O,onCornerWidthChange:_,onCornerHeightChange:T,children:p.jsx(he.div,{dir:F,...s,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":x+"px",...e.style}})})});Bi.displayName=Ma;var Ui="ScrollAreaViewport",Zi=v.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...o}=e,s=Ae(Ui,n),i=v.useRef(null),l=xe(t,i,s.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),p.jsx(he.div,{"data-radix-scroll-area-viewport":"",...o,ref:l,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:p.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Zi.displayName=Ui;var Ze="ScrollAreaScrollbar",Da=v.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ae(Ze,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:s}=a,i=e.orientation==="horizontal";return v.useEffect(()=>(i?o(!0):s(!0),()=>{i?o(!1):s(!1)}),[i,o,s]),a.type==="hover"?p.jsx(Eh,{...r,ref:t,forceMount:n}):a.type==="scroll"?p.jsx(Ch,{...r,ref:t,forceMount:n}):a.type==="auto"?p.jsx(zi,{...r,ref:t,forceMount:n}):a.type==="always"?p.jsx(Fa,{...r,ref:t}):null});Da.displayName=Ze;var Eh=v.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ae(Ze,e.__scopeScrollArea),[o,s]=v.useState(!1);return v.useEffect(()=>{const i=a.scrollArea;let l=0;if(i){const c=()=>{window.clearTimeout(l),s(!0)},u=()=>{l=window.setTimeout(()=>s(!1),a.scrollHideDelay)};return i.addEventListener("pointerenter",c),i.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),i.removeEventListener("pointerenter",c),i.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),p.jsx(Ue,{present:n||o,children:p.jsx(zi,{"data-state":o?"visible":"hidden",...r,ref:t})})}),Ch=v.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ae(Ze,e.__scopeScrollArea),o=e.orientation==="horizontal",s=ir(()=>l("SCROLL_END"),100),[i,l]=kh("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return v.useEffect(()=>{if(i==="idle"){const c=window.setTimeout(()=>l("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(c)}},[i,a.scrollHideDelay,l]),v.useEffect(()=>{const c=a.viewport,u=o?"scrollLeft":"scrollTop";if(c){let d=c[u];const h=()=>{const b=c[u];d!==b&&(l("SCROLL"),s()),d=b};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[a.viewport,o,l,s]),p.jsx(Ue,{present:n||i!=="hidden",children:p.jsx(Fa,{"data-state":i==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:U(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:U(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),zi=v.forwardRef((e,t)=>{const n=Ae(Ze,e.__scopeScrollArea),{forceMount:r,...a}=e,[o,s]=v.useState(!1),i=e.orientation==="horizontal",l=ir(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;s(i?c:u)}},10);return Et(n.viewport,l),Et(n.content,l),p.jsx(Ue,{present:r||o,children:p.jsx(Fa,{"data-state":o?"visible":"hidden",...a,ref:t})})}),Fa=v.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Ae(Ze,e.__scopeScrollArea),o=v.useRef(null),s=v.useRef(0),[i,l]=v.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Wi(i.viewport,i.content),u={...r,sizes:i,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:h=>s.current=h};function d(h,b){return jh(h,s.current,i,b)}return n==="horizontal"?p.jsx(Ah,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const h=a.viewport.scrollLeft,b=Ro(h,i,a.dir);o.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=d(h,a.dir))}}):n==="vertical"?p.jsx(Th,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const h=a.viewport.scrollTop,b=Ro(h,i);o.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=d(h))}}):null}),Ah=v.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,o=Ae(Ze,e.__scopeScrollArea),[s,i]=v.useState(),l=v.useRef(null),c=xe(t,l,o.onScrollbarXChange);return v.useEffect(()=>{l.current&&i(getComputedStyle(l.current))},[l]),p.jsx(Gi,{"data-orientation":"horizontal",...a,ref:c,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":sr(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),Yi(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&o.viewport&&s&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Yn(s.paddingLeft),paddingEnd:Yn(s.paddingRight)}})}})}),Th=v.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,o=Ae(Ze,e.__scopeScrollArea),[s,i]=v.useState(),l=v.useRef(null),c=xe(t,l,o.onScrollbarYChange);return v.useEffect(()=>{l.current&&i(getComputedStyle(l.current))},[l]),p.jsx(Gi,{"data-orientation":"vertical",...a,ref:c,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":sr(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(o.viewport){const h=o.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),Yi(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&o.viewport&&s&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Yn(s.paddingTop),paddingEnd:Yn(s.paddingBottom)}})}})}),[Ih,Vi]=Li(Ze),Gi=v.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:o,onThumbPointerUp:s,onThumbPointerDown:i,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...h}=e,b=Ae(Ze,n),[f,g]=v.useState(null),y=xe(t,I=>g(I)),w=v.useRef(null),_=v.useRef(""),x=b.viewport,T=r.content-r.viewport,j=Re(u),N=Re(l),M=ir(d,10);function O(I){if(w.current){const F=I.clientX-w.current.left,z=I.clientY-w.current.top;c({x:F,y:z})}}return v.useEffect(()=>{const I=F=>{const z=F.target;(f==null?void 0:f.contains(z))&&j(F,T)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[x,f,T,j]),v.useEffect(N,[r,N]),Et(f,M),Et(b.content,M),p.jsx(Ih,{scope:n,scrollbar:f,hasThumb:a,onThumbChange:Re(o),onThumbPointerUp:Re(s),onThumbPositionChange:N,onThumbPointerDown:Re(i),children:p.jsx(he.div,{...h,ref:y,style:{position:"absolute",...h.style},onPointerDown:U(e.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),w.current=f.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),O(I))}),onPointerMove:U(e.onPointerMove,O),onPointerUp:U(e.onPointerUp,I=>{const F=I.target;F.hasPointerCapture(I.pointerId)&&F.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=_.current,b.viewport&&(b.viewport.style.scrollBehavior=""),w.current=null})})})}),Kn="ScrollAreaThumb",Hi=v.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Vi(Kn,e.__scopeScrollArea);return p.jsx(Ue,{present:n||a.hasThumb,children:p.jsx(Rh,{ref:t,...r})})}),Rh=v.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,o=Ae(Kn,n),s=Vi(Kn,n),{onThumbPositionChange:i}=s,l=xe(t,d=>s.onThumbChange(d)),c=v.useRef(void 0),u=ir(()=>{c.current&&(c.current(),c.current=void 0)},100);return v.useEffect(()=>{const d=o.viewport;if(d){const h=()=>{if(u(),!c.current){const b=Ph(d,i);c.current=b,i()}};return i(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[o.viewport,u,i]),p.jsx(he.div,{"data-state":s.hasThumb?"visible":"hidden",...a,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:U(e.onPointerDownCapture,d=>{const b=d.target.getBoundingClientRect(),f=d.clientX-b.left,g=d.clientY-b.top;s.onThumbPointerDown({x:f,y:g})}),onPointerUp:U(e.onPointerUp,s.onThumbPointerUp)})});Hi.displayName=Kn;var $a="ScrollAreaCorner",qi=v.forwardRef((e,t)=>{const n=Ae($a,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(Nh,{...e,ref:t}):null});qi.displayName=$a;var Nh=v.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Ae($a,n),[o,s]=v.useState(0),[i,l]=v.useState(0),c=!!(o&&i);return Et(a.scrollbarX,()=>{var d;const u=((d=a.scrollbarX)==null?void 0:d.offsetHeight)||0;a.onCornerHeightChange(u),l(u)}),Et(a.scrollbarY,()=>{var d;const u=((d=a.scrollbarY)==null?void 0:d.offsetWidth)||0;a.onCornerWidthChange(u),s(u)}),c?p.jsx(he.div,{...r,ref:t,style:{width:o,height:i,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Yn(e){return e?parseInt(e,10):0}function Wi(e,t){const n=e/t;return isNaN(n)?0:n}function sr(e){const t=Wi(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function jh(e,t,n,r="ltr"){const a=sr(n),o=a/2,s=t||o,i=a-s,l=n.scrollbar.paddingStart+s,c=n.scrollbar.size-n.scrollbar.paddingEnd-i,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return Ki([l,c],d)(e)}function Ro(e,t,n="ltr"){const r=sr(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-a,s=t.content-t.viewport,i=o-r,l=n==="ltr"?[0,s]:[s*-1,0],c=gc(e,l);return Ki([0,s],[0,i])(c)}function Ki(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Yi(e,t){return e>0&&e<t}var Ph=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const o={left:e.scrollLeft,top:e.scrollTop},s=n.left!==o.left,i=n.top!==o.top;(s||i)&&t(),n=o,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function ir(e,t){const n=Re(e),r=v.useRef(0);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),v.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Et(e,t){const n=Re(t);An(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var Ji=Bi,Oh=Zi,Mh=qi;const Xi=v.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(Ji,{ref:r,className:fe("relative overflow-hidden",e),...n,children:[p.jsx(Oh,{className:"h-full w-full rounded-[inherit]",children:t}),p.jsx(Qi,{}),p.jsx(Mh,{})]}));Xi.displayName=Ji.displayName;const Qi=v.forwardRef(({className:e,orientation:t="vertical",...n},r)=>p.jsx(Da,{ref:r,orientation:t,className:fe("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:p.jsx(Hi,{className:"relative flex-1 rounded-full bg-border"})}));Qi.displayName=Da.displayName;const ea=(e,t)=>t.some(n=>e instanceof n);let No,jo;function Dh(){return No||(No=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fh(){return jo||(jo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ta=new WeakMap,wr=new WeakMap,lr=new WeakMap;function $h(e){const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(it(e.result)),a()},s=()=>{r(e.error),a()};e.addEventListener("success",o),e.addEventListener("error",s)});return lr.set(t,e),t}function Lh(e){if(ta.has(e))return;const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),a()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});ta.set(e,t)}let na={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ta.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return it(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function el(e){na=e(na)}function Bh(e){return Fh().includes(e)?function(...t){return e.apply(ra(this),t),it(this.request)}:function(...t){return it(e.apply(ra(this),t))}}function Uh(e){return typeof e=="function"?Bh(e):(e instanceof IDBTransaction&&Lh(e),ea(e,Dh())?new Proxy(e,na):e)}function it(e){if(e instanceof IDBRequest)return $h(e);if(wr.has(e))return wr.get(e);const t=Uh(e);return t!==e&&(wr.set(e,t),lr.set(t,e)),t}const ra=e=>lr.get(e);function Zh(e,t,{blocked:n,upgrade:r,blocking:a,terminated:o}={}){const s=indexedDB.open(e,t),i=it(s);return r&&s.addEventListener("upgradeneeded",l=>{r(it(s.result),l.oldVersion,l.newVersion,it(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),i.then(l=>{o&&l.addEventListener("close",()=>o()),a&&l.addEventListener("versionchange",c=>a(c.oldVersion,c.newVersion,c))}).catch(()=>{}),i}const zh=["get","getKey","getAll","getAllKeys","count"],Vh=["put","add","delete","clear"],xr=new Map;function Po(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(xr.get(t))return xr.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=Vh.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||zh.includes(n)))return;const o=async function(s,...i){const l=this.transaction(s,a?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(i.shift())),(await Promise.all([c[n](...i),a&&l.done]))[0]};return xr.set(t,o),o}el(e=>({...e,get:(t,n,r)=>Po(t,n)||e.get(t,n,r),has:(t,n)=>!!Po(t,n)||e.has(t,n)}));const Gh=["continue","continuePrimaryKey","advance"],Oo={},aa=new WeakMap,tl=new WeakMap,Hh={get(e,t){if(!Gh.includes(t))return e[t];let n=Oo[t];return n||(n=Oo[t]=function(...r){aa.set(this,tl.get(this)[t](...r))}),n}};async function*qh(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,Hh);for(tl.set(n,t),lr.set(n,ra(t));t;)yield n,t=await(aa.get(n)||t.continue()),aa.delete(n)}function Mo(e,t){return t===Symbol.asyncIterator&&ea(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&ea(e,[IDBIndex,IDBObjectStore])}el(e=>({...e,get(t,n,r){return Mo(t,n)?qh:e.get(t,n,r)},has(t,n){return Mo(t,n)||e.has(t,n)}}));const La=Zh("chat-db",1,{upgrade(e){e.createObjectStore("chats",{keyPath:"problemName"})}}),Wh=async(e,t)=>{await(await La).put("chats",{problemName:e,chatHistory:t})},Kh=async(e,t,n)=>{const a=await(await La).get("chats",e);if(!a)return{totalMessageCount:0,chatHistory:[]};const{chatHistory:o}=a,s=o.length,i=o.slice(Math.max(s-n-t,0),s-n);return{totalMessageCount:s,chatHistory:i,allChatHistory:o||[]}},Yh=async e=>{await(await La).delete("chats",e)},En=10,Do=()=>({saveChatHistory:async(e,t)=>{await Wh(e,t)},fetchChatHistory:async(e,t,n)=>await Kh(e,t,n),clearChatHistory:async e=>{await Yh(e)}});var kr="rovingFocusGroup.onEntryFocus",Jh={bubbles:!1,cancelable:!0},cr="RovingFocusGroup",[oa,nl,Xh]=ca(cr),[Qh,rl]=Ct(cr,[Xh]),[ey,ty]=Qh(cr),al=v.forwardRef((e,t)=>p.jsx(oa.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(oa.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(ny,{...e,ref:t})})}));al.displayName=cr;var ny=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:o,currentTabStopId:s,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=v.useRef(null),b=xe(t,h),f=Qn(o),[g=null,y]=At({prop:s,defaultProp:i,onChange:l}),[w,_]=v.useState(!1),x=Re(c),T=nl(n),j=v.useRef(!1),[N,M]=v.useState(0);return v.useEffect(()=>{const O=h.current;if(O)return O.addEventListener(kr,x),()=>O.removeEventListener(kr,x)},[x]),p.jsx(ey,{scope:n,orientation:r,dir:f,loop:a,currentTabStopId:g,onItemFocus:v.useCallback(O=>y(O),[y]),onItemShiftTab:v.useCallback(()=>_(!0),[]),onFocusableItemAdd:v.useCallback(()=>M(O=>O+1),[]),onFocusableItemRemove:v.useCallback(()=>M(O=>O-1),[]),children:p.jsx(he.div,{tabIndex:w||N===0?-1:0,"data-orientation":r,...d,ref:b,style:{outline:"none",...e.style},onMouseDown:U(e.onMouseDown,()=>{j.current=!0}),onFocus:U(e.onFocus,O=>{const I=!j.current;if(O.target===O.currentTarget&&I&&!w){const F=new CustomEvent(kr,Jh);if(O.currentTarget.dispatchEvent(F),!F.defaultPrevented){const z=T().filter(ne=>ne.focusable),K=z.find(ne=>ne.active),me=z.find(ne=>ne.id===g),se=[K,me,...z].filter(Boolean).map(ne=>ne.ref.current);il(se,u)}}j.current=!1}),onBlur:U(e.onBlur,()=>_(!1))})})}),ol="RovingFocusGroupItem",sl=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:o,...s}=e,i=lt(),l=o||i,c=ty(ol,n),u=c.currentTabStopId===l,d=nl(n),{onFocusableItemAdd:h,onFocusableItemRemove:b}=c;return v.useEffect(()=>{if(r)return h(),()=>b()},[r,h,b]),p.jsx(oa.ItemSlot,{scope:n,id:l,focusable:r,active:a,children:p.jsx(he.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...s,ref:t,onMouseDown:U(e.onMouseDown,f=>{r?c.onItemFocus(l):f.preventDefault()}),onFocus:U(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:U(e.onKeyDown,f=>{if(f.key==="Tab"&&f.shiftKey){c.onItemShiftTab();return}if(f.target!==f.currentTarget)return;const g=oy(f,c.orientation,c.dir);if(g!==void 0){if(f.metaKey||f.ctrlKey||f.altKey||f.shiftKey)return;f.preventDefault();let w=d().filter(_=>_.focusable).map(_=>_.ref.current);if(g==="last")w.reverse();else if(g==="prev"||g==="next"){g==="prev"&&w.reverse();const _=w.indexOf(f.currentTarget);w=c.loop?sy(w,_+1):w.slice(_+1)}setTimeout(()=>il(w))}})})})});sl.displayName=ol;var ry={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ay(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function oy(e,t,n){const r=ay(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ry[r]}function il(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function sy(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var iy=al,ly=sl,sa=["Enter"," "],cy=["ArrowDown","PageUp","Home"],ll=["ArrowUp","PageDown","End"],uy=[...cy,...ll],dy={ltr:[...sa,"ArrowRight"],rtl:[...sa,"ArrowLeft"]},py={ltr:["ArrowLeft"],rtl:["ArrowRight"]},bn="Menu",[mn,fy,my]=ca(bn),[ft,cl]=Ct(bn,[my,Lo,rl]),_n=Lo(),ul=rl(),[dl,rt]=ft(bn),[gy,wn]=ft(bn),pl=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:o,modal:s=!0}=e,i=_n(t),[l,c]=v.useState(null),u=v.useRef(!1),d=Re(o),h=Qn(a);return v.useEffect(()=>{const b=()=>{u.current=!0,document.addEventListener("pointerdown",f,{capture:!0,once:!0}),document.addEventListener("pointermove",f,{capture:!0,once:!0})},f=()=>u.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",f,{capture:!0}),document.removeEventListener("pointermove",f,{capture:!0})}},[]),p.jsx(Uo,{...i,children:p.jsx(dl,{scope:t,open:n,onOpenChange:d,content:l,onContentChange:c,children:p.jsx(gy,{scope:t,onClose:v.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:s,children:r})})})};pl.displayName=bn;var hy="MenuAnchor",Ba=v.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=_n(n);return p.jsx(yc,{...a,...r,ref:t})});Ba.displayName=hy;var Ua="MenuPortal",[yy,fl]=ft(Ua,{forceMount:void 0}),ml=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,o=rt(Ua,t);return p.jsx(yy,{scope:t,forceMount:n,children:p.jsx(Ue,{present:n||o.open,children:p.jsx(hc,{asChild:!0,container:a,children:r})})})};ml.displayName=Ua;var Ce="MenuContent",[vy,Za]=ft(Ce),gl=v.forwardRef((e,t)=>{const n=fl(Ce,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,o=rt(Ce,e.__scopeMenu),s=wn(Ce,e.__scopeMenu);return p.jsx(mn.Provider,{scope:e.__scopeMenu,children:p.jsx(Ue,{present:r||o.open,children:p.jsx(mn.Slot,{scope:e.__scopeMenu,children:s.modal?p.jsx(by,{...a,ref:t}):p.jsx(_y,{...a,ref:t})})})})}),by=v.forwardRef((e,t)=>{const n=rt(Ce,e.__scopeMenu),r=v.useRef(null),a=xe(t,r);return v.useEffect(()=>{const o=r.current;if(o)return Sc(o)},[]),p.jsx(za,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:U(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),_y=v.forwardRef((e,t)=>{const n=rt(Ce,e.__scopeMenu);return p.jsx(za,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),za=v.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:b,disableOutsideScroll:f,...g}=e,y=rt(Ce,n),w=wn(Ce,n),_=_n(n),x=ul(n),T=fy(n),[j,N]=v.useState(null),M=v.useRef(null),O=xe(t,M,y.onContentChange),I=v.useRef(0),F=v.useRef(""),z=v.useRef(0),K=v.useRef(null),me=v.useRef("right"),Y=v.useRef(0),se=f?bc:v.Fragment,ne=f?{as:_c,allowPinchZoom:!0}:void 0,ce=S=>{var ie,de;const D=F.current+S,V=T().filter(oe=>!oe.disabled),L=document.activeElement,J=(ie=V.find(oe=>oe.ref.current===L))==null?void 0:ie.textValue,ee=V.map(oe=>oe.textValue),te=jy(ee,D,J),ue=(de=V.find(oe=>oe.textValue===te))==null?void 0:de.ref.current;(function oe(H){F.current=H,window.clearTimeout(I.current),H!==""&&(I.current=window.setTimeout(()=>oe(""),1e3))})(D),ue&&setTimeout(()=>ue.focus())};v.useEffect(()=>()=>window.clearTimeout(I.current),[]),vc();const G=v.useCallback(S=>{var V,L;return me.current===((V=K.current)==null?void 0:V.side)&&Oy(S,(L=K.current)==null?void 0:L.area)},[]);return p.jsx(vy,{scope:n,searchRef:F,onItemEnter:v.useCallback(S=>{G(S)&&S.preventDefault()},[G]),onItemLeave:v.useCallback(S=>{var D;G(S)||((D=M.current)==null||D.focus(),N(null))},[G]),onTriggerLeave:v.useCallback(S=>{G(S)&&S.preventDefault()},[G]),pointerGraceTimerRef:z,onPointerGraceIntentChange:v.useCallback(S=>{K.current=S},[]),children:p.jsx(se,{...ne,children:p.jsx(wc,{asChild:!0,trapped:a,onMountAutoFocus:U(o,S=>{var D;S.preventDefault(),(D=M.current)==null||D.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:p.jsx(xc,{asChild:!0,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:b,children:p.jsx(iy,{asChild:!0,...x,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:j,onCurrentTabStopIdChange:N,onEntryFocus:U(l,S=>{w.isUsingKeyboardRef.current||S.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(kc,{role:"menu","aria-orientation":"vertical","data-state":jl(y.open),"data-radix-menu-content":"",dir:w.dir,..._,...g,ref:O,style:{outline:"none",...g.style},onKeyDown:U(g.onKeyDown,S=>{const V=S.target.closest("[data-radix-menu-content]")===S.currentTarget,L=S.ctrlKey||S.altKey||S.metaKey,J=S.key.length===1;V&&(S.key==="Tab"&&S.preventDefault(),!L&&J&&ce(S.key));const ee=M.current;if(S.target!==ee||!uy.includes(S.key))return;S.preventDefault();const ue=T().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);ll.includes(S.key)&&ue.reverse(),Ry(ue)}),onBlur:U(e.onBlur,S=>{S.currentTarget.contains(S.target)||(window.clearTimeout(I.current),F.current="")}),onPointerMove:U(e.onPointerMove,gn(S=>{const D=S.target,V=Y.current!==S.clientX;if(S.currentTarget.contains(D)&&V){const L=S.clientX>Y.current?"right":"left";me.current=L,Y.current=S.clientX}}))})})})})})})});gl.displayName=Ce;var wy="MenuGroup",Va=v.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(he.div,{role:"group",...r,ref:t})});Va.displayName=wy;var xy="MenuLabel",hl=v.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(he.div,{...r,ref:t})});hl.displayName=xy;var Jn="MenuItem",Fo="menu.itemSelect",ur=v.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,o=v.useRef(null),s=wn(Jn,e.__scopeMenu),i=Za(Jn,e.__scopeMenu),l=xe(t,o),c=v.useRef(!1),u=()=>{const d=o.current;if(!n&&d){const h=new CustomEvent(Fo,{bubbles:!0,cancelable:!0});d.addEventListener(Fo,b=>r==null?void 0:r(b),{once:!0}),Ec(d,h),h.defaultPrevented?c.current=!1:s.onClose()}};return p.jsx(yl,{...a,ref:l,disabled:n,onClick:U(e.onClick,u),onPointerDown:d=>{var h;(h=e.onPointerDown)==null||h.call(e,d),c.current=!0},onPointerUp:U(e.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:U(e.onKeyDown,d=>{const h=i.searchRef.current!=="";n||h&&d.key===" "||sa.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});ur.displayName=Jn;var yl=v.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...o}=e,s=Za(Jn,n),i=ul(n),l=v.useRef(null),c=xe(t,l),[u,d]=v.useState(!1),[h,b]=v.useState("");return v.useEffect(()=>{const f=l.current;f&&b((f.textContent??"").trim())},[o.children]),p.jsx(mn.ItemSlot,{scope:n,disabled:r,textValue:a??h,children:p.jsx(ly,{asChild:!0,...i,focusable:!r,children:p.jsx(he.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:c,onPointerMove:U(e.onPointerMove,gn(f=>{r?s.onItemLeave(f):(s.onItemEnter(f),f.defaultPrevented||f.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:U(e.onPointerLeave,gn(f=>s.onItemLeave(f))),onFocus:U(e.onFocus,()=>d(!0)),onBlur:U(e.onBlur,()=>d(!1))})})})}),ky="MenuCheckboxItem",vl=v.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return p.jsx(kl,{scope:e.__scopeMenu,checked:n,children:p.jsx(ur,{role:"menuitemcheckbox","aria-checked":Xn(n)?"mixed":n,...a,ref:t,"data-state":qa(n),onSelect:U(a.onSelect,()=>r==null?void 0:r(Xn(n)?!0:!n),{checkForDefaultPrevented:!1})})})});vl.displayName=ky;var bl="MenuRadioGroup",[Sy,Ey]=ft(bl,{value:void 0,onValueChange:()=>{}}),_l=v.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,o=Re(r);return p.jsx(Sy,{scope:e.__scopeMenu,value:n,onValueChange:o,children:p.jsx(Va,{...a,ref:t})})});_l.displayName=bl;var wl="MenuRadioItem",xl=v.forwardRef((e,t)=>{const{value:n,...r}=e,a=Ey(wl,e.__scopeMenu),o=n===a.value;return p.jsx(kl,{scope:e.__scopeMenu,checked:o,children:p.jsx(ur,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":qa(o),onSelect:U(r.onSelect,()=>{var s;return(s=a.onValueChange)==null?void 0:s.call(a,n)},{checkForDefaultPrevented:!1})})})});xl.displayName=wl;var Ga="MenuItemIndicator",[kl,Cy]=ft(Ga,{checked:!1}),Sl=v.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,o=Cy(Ga,n);return p.jsx(Ue,{present:r||Xn(o.checked)||o.checked===!0,children:p.jsx(he.span,{...a,ref:t,"data-state":qa(o.checked)})})});Sl.displayName=Ga;var Ay="MenuSeparator",El=v.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(he.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});El.displayName=Ay;var Ty="MenuArrow",Cl=v.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=_n(n);return p.jsx(Cc,{...a,...r,ref:t})});Cl.displayName=Ty;var Ha="MenuSub",[Iy,Al]=ft(Ha),Tl=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:a}=e,o=rt(Ha,t),s=_n(t),[i,l]=v.useState(null),[c,u]=v.useState(null),d=Re(a);return v.useEffect(()=>(o.open===!1&&d(!1),()=>d(!1)),[o.open,d]),p.jsx(Uo,{...s,children:p.jsx(dl,{scope:t,open:r,onOpenChange:d,content:c,onContentChange:u,children:p.jsx(Iy,{scope:t,contentId:lt(),triggerId:lt(),trigger:i,onTriggerChange:l,children:n})})})};Tl.displayName=Ha;var Pt="MenuSubTrigger",Il=v.forwardRef((e,t)=>{const n=rt(Pt,e.__scopeMenu),r=wn(Pt,e.__scopeMenu),a=Al(Pt,e.__scopeMenu),o=Za(Pt,e.__scopeMenu),s=v.useRef(null),{pointerGraceTimerRef:i,onPointerGraceIntentChange:l}=o,c={__scopeMenu:e.__scopeMenu},u=v.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return v.useEffect(()=>u,[u]),v.useEffect(()=>{const d=i.current;return()=>{window.clearTimeout(d),l(null)}},[i,l]),p.jsx(Ba,{asChild:!0,...c,children:p.jsx(yl,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":jl(n.open),...e,ref:Bo(t,a.onTriggerChange),onClick:d=>{var h;(h=e.onClick)==null||h.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:U(e.onPointerMove,gn(d=>{o.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(o.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:U(e.onPointerLeave,gn(d=>{var b,f;u();const h=(b=n.content)==null?void 0:b.getBoundingClientRect();if(h){const g=(f=n.content)==null?void 0:f.dataset.side,y=g==="right",w=y?-5:5,_=h[y?"left":"right"],x=h[y?"right":"left"];o.onPointerGraceIntentChange({area:[{x:d.clientX+w,y:d.clientY},{x:_,y:h.top},{x,y:h.top},{x,y:h.bottom},{x:_,y:h.bottom}],side:g}),window.clearTimeout(i.current),i.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(d),d.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:U(e.onKeyDown,d=>{var b;const h=o.searchRef.current!=="";e.disabled||h&&d.key===" "||dy[r.dir].includes(d.key)&&(n.onOpenChange(!0),(b=n.content)==null||b.focus(),d.preventDefault())})})})});Il.displayName=Pt;var Rl="MenuSubContent",Nl=v.forwardRef((e,t)=>{const n=fl(Ce,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,o=rt(Ce,e.__scopeMenu),s=wn(Ce,e.__scopeMenu),i=Al(Rl,e.__scopeMenu),l=v.useRef(null),c=xe(t,l);return p.jsx(mn.Provider,{scope:e.__scopeMenu,children:p.jsx(Ue,{present:r||o.open,children:p.jsx(mn.Slot,{scope:e.__scopeMenu,children:p.jsx(za,{id:i.contentId,"aria-labelledby":i.triggerId,...a,ref:c,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;s.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:U(e.onFocusOutside,u=>{u.target!==i.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:U(e.onEscapeKeyDown,u=>{s.onClose(),u.preventDefault()}),onKeyDown:U(e.onKeyDown,u=>{var b;const d=u.currentTarget.contains(u.target),h=py[s.dir].includes(u.key);d&&h&&(o.onOpenChange(!1),(b=i.trigger)==null||b.focus(),u.preventDefault())})})})})})});Nl.displayName=Rl;function jl(e){return e?"open":"closed"}function Xn(e){return e==="indeterminate"}function qa(e){return Xn(e)?"indeterminate":e?"checked":"unchecked"}function Ry(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Ny(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function jy(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let s=Ny(e,Math.max(o,0));a.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function Py(e,t){const{x:n,y:r}=e;let a=!1;for(let o=0,s=t.length-1;o<t.length;s=o++){const i=t[o].x,l=t[o].y,c=t[s].x,u=t[s].y;l>r!=u>r&&n<(c-i)*(r-l)/(u-l)+i&&(a=!a)}return a}function Oy(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Py(n,t)}function gn(e){return t=>t.pointerType==="mouse"?e(t):void 0}var My=pl,Dy=Ba,Fy=ml,$y=gl,Ly=Va,By=hl,Uy=ur,Zy=vl,zy=_l,Vy=xl,Gy=Sl,Hy=El,qy=Cl,Wy=Tl,Ky=Il,Yy=Nl,Wa="DropdownMenu",[Jy,jv]=Ct(Wa,[cl]),ve=cl(),[Xy,Pl]=Jy(Wa),Ol=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:o,onOpenChange:s,modal:i=!0}=e,l=ve(t),c=v.useRef(null),[u=!1,d]=At({prop:a,defaultProp:o,onChange:s});return p.jsx(Xy,{scope:t,triggerId:lt(),triggerRef:c,contentId:lt(),open:u,onOpenChange:d,onOpenToggle:v.useCallback(()=>d(h=>!h),[d]),modal:i,children:p.jsx(My,{...l,open:u,onOpenChange:d,dir:r,modal:i,children:n})})};Ol.displayName=Wa;var Ml="DropdownMenuTrigger",Dl=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,o=Pl(Ml,n),s=ve(n);return p.jsx(Dy,{asChild:!0,...s,children:p.jsx(he.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Bo(t,o.triggerRef),onPointerDown:U(e.onPointerDown,i=>{!r&&i.button===0&&i.ctrlKey===!1&&(o.onOpenToggle(),o.open||i.preventDefault())}),onKeyDown:U(e.onKeyDown,i=>{r||(["Enter"," "].includes(i.key)&&o.onOpenToggle(),i.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(i.key)&&i.preventDefault())})})})});Dl.displayName=Ml;var Qy="DropdownMenuPortal",Fl=e=>{const{__scopeDropdownMenu:t,...n}=e,r=ve(t);return p.jsx(Fy,{...r,...n})};Fl.displayName=Qy;var $l="DropdownMenuContent",Ll=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Pl($l,n),o=ve(n),s=v.useRef(!1);return p.jsx($y,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...r,ref:t,onCloseAutoFocus:U(e.onCloseAutoFocus,i=>{var l;s.current||(l=a.triggerRef.current)==null||l.focus(),s.current=!1,i.preventDefault()}),onInteractOutside:U(e.onInteractOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!a.modal||u)&&(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ll.displayName=$l;var ev="DropdownMenuGroup",Bl=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ve(n);return p.jsx(Ly,{...a,...r,ref:t})});Bl.displayName=ev;var tv="DropdownMenuLabel",Ul=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ve(n);return p.jsx(By,{...a,...r,ref:t})});Ul.displayName=tv;var nv="DropdownMenuItem",Zl=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ve(n);return p.jsx(Uy,{...a,...r,ref:t})});Zl.displayName=nv;var rv="DropdownMenuCheckboxItem",zl=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ve(n);return p.jsx(Zy,{...a,...r,ref:t})});zl.displayName=rv;var av="DropdownMenuRadioGroup",Vl=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ve(n);return p.jsx(zy,{...a,...r,ref:t})});Vl.displayName=av;var ov="DropdownMenuRadioItem",Gl=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ve(n);return p.jsx(Vy,{...a,...r,ref:t})});Gl.displayName=ov;var sv="DropdownMenuItemIndicator",Hl=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ve(n);return p.jsx(Gy,{...a,...r,ref:t})});Hl.displayName=sv;var iv="DropdownMenuSeparator",ql=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ve(n);return p.jsx(Hy,{...a,...r,ref:t})});ql.displayName=iv;var lv="DropdownMenuArrow",cv=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ve(n);return p.jsx(qy,{...a,...r,ref:t})});cv.displayName=lv;var uv=e=>{const{__scopeDropdownMenu:t,children:n,open:r,onOpenChange:a,defaultOpen:o}=e,s=ve(t),[i=!1,l]=At({prop:r,defaultProp:o,onChange:a});return p.jsx(Wy,{...s,open:i,onOpenChange:l,children:n})},dv="DropdownMenuSubTrigger",Wl=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ve(n);return p.jsx(Ky,{...a,...r,ref:t})});Wl.displayName=dv;var pv="DropdownMenuSubContent",Kl=v.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ve(n);return p.jsx(Yy,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Kl.displayName=pv;var fv=Ol,mv=Dl,Yl=Fl,Jl=Ll,gv=Bl,Xl=Ul,Ql=Zl,ec=zl,hv=Vl,tc=Gl,nc=Hl,rc=ql,yv=uv,ac=Wl,oc=Kl;const vv=fv,bv=mv,_v=gv,wv=Yl,xv=yv,kv=hv,sc=v.forwardRef(({className:e,inset:t,children:n,...r},a)=>p.jsxs(ac,{ref:a,className:fe("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,p.jsx(Zc,{className:"ml-auto"})]}));sc.displayName=ac.displayName;const ic=v.forwardRef(({className:e,...t},n)=>p.jsx(oc,{ref:n,className:fe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));ic.displayName=oc.displayName;const lc=v.forwardRef(({className:e,sideOffset:t=4,...n},r)=>p.jsx(Yl,{children:p.jsx(Jl,{ref:r,sideOffset:t,className:fe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));lc.displayName=Jl.displayName;const ia=v.forwardRef(({className:e,inset:t,...n},r)=>p.jsx(Ql,{ref:r,className:fe("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",e),...n}));ia.displayName=Ql.displayName;const Sv=v.forwardRef(({className:e,children:t,checked:n,...r},a)=>p.jsxs(ec,{ref:a,className:fe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(nc,{children:p.jsx(Bc,{className:"h-4 w-4"})})}),t]}));Sv.displayName=ec.displayName;const cc=v.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(tc,{ref:r,className:fe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(nc,{children:p.jsx(zc,{className:"h-2 w-2 fill-current"})})}),t]}));cc.displayName=tc.displayName;const uc=v.forwardRef(({className:e,inset:t,...n},r)=>p.jsx(Xl,{ref:r,className:fe("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));uc.displayName=Xl.displayName;const la=v.forwardRef(({className:e,...t},n)=>p.jsx(rc,{ref:n,className:fe("-mx-1 my-1 h-px bg-muted",e),...t}));la.displayName=rc.displayName;const Ev=({context:e,visible:t,model:n,apikey:r,heandelModel:a,selectedModel:o})=>{var G;const[s,i]=ae.useState(""),[l,c]=ae.useState([]),[u,d]=ae.useState([]),[h,b]=ae.useState(!1),f=v.useRef(null),g=v.useRef(null),[y,w]=ae.useState(0),[_,x]=ae.useState(0),[T,j]=ae.useState(!1),{fetchChatHistory:N,saveChatHistory:M}=Do(),I=(()=>{const S=window.location.href,D=/\/problems\/([^/]+)/.exec(S);return D?D[1]:"Unknown Problem"})(),F=v.useRef(null);v.useEffect(()=>{g.current&&!T&&g.current.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{var S;(S=F.current)==null||S.focus()},0)},[l,h,t]);const z=async()=>{const{clearChatHistory:S}=Do();await S(I),c([]),d([])},K=async()=>{var de,oe;const S=new wh;S.selectModal(n,r);let D="UNKNOWN";const V=document.querySelector("button.rounded.items-center.whitespace-nowrap.inline-flex.bg-transparent.dark\\:bg-dark-transparent.text-text-secondary.group");V&&V.textContent&&(D=V.textContent);const L=document.querySelectorAll(".view-line"),J=Qu(L),ee=Xu.replace(/{{problem_statement}}/gi,e.problemStatement).replace(/{{programming_language}}/g,D).replace(/{{user_code}}/g,J),te=xh(l),{error:ue,success:ie}=await S.generate({prompt:`${s}`,systemPrompt:ee,messages:te,extractedCode:J});if(ue){const H={role:"assistant",content:ue.message};await M(I,[...u,{role:"user",content:s},H]),d(ge=>[...ge,H]),c(ge=>[...ge,H]),(de=g.current)==null||de.scrollIntoView({behavior:"smooth"})}if(ie){const H={role:"assistant",content:ie};await M(I,[...u,{role:"user",content:s},H]),d(ge=>[...ge,H]),c(ge=>[...ge,H]),i(""),(oe=g.current)==null||oe.scrollIntoView({behavior:"smooth"})}b(!1),setTimeout(()=>{var H;(H=F.current)==null||H.focus()},0)},me=async()=>{const{totalMessageCount:S,chatHistory:D,allChatHistory:V}=await N(I,En,0);d(V||[]),x(S),c(D),w(En)};v.useEffect(()=>{me()},[I]);const Y=async()=>{if(_<y)return;j(!0);const{chatHistory:S}=await N(I,En,y);S.length>0&&(c(D=>[...S,...D]),w(D=>D+En)),setTimeout(()=>{j(!1)},500)},se=S=>{S.currentTarget.scrollTop===0&&(console.log("Reached the top, loading more messages..."),Y())},ne=async S=>{var V;b(!0);const D={role:"user",content:S};d(L=>[...L,D]),c([...l,D]),(V=g.current)==null||V.scrollIntoView({behavior:"smooth"}),K()},ce=()=>{chrome.runtime.openOptionsPage?chrome.runtime.openOptionsPage():window.open(chrome.runtime.getURL("index.html"))};return t?p.jsxs(va,{className:"mb-2 ",children:[p.jsxs("div",{className:"flex gap-2 items-center justify-between h-20 rounded-t-lg p-4",children:[p.jsxs("div",{className:"flex gap-2 items-center justify-start",children:[p.jsx("div",{className:"bg-white rounded-full p-2",children:p.jsx(Tn,{color:"#000",className:"h-6 w-6"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-lg",children:"CodeSmart"}),p.jsx("h6",{className:"font-normal text-xs",children:"Always online"})]})]}),p.jsxs(vv,{children:[p.jsx(bv,{asChild:!0,children:p.jsx(bt,{variant:"tertiary",size:"icon",children:p.jsx(Gc,{size:18})})}),p.jsxs(lc,{className:"w-56",children:[p.jsxs(uc,{className:"flex items-center",children:[p.jsx(In,{size:16,strokeWidth:1.5,className:"mr-2"})," ",(G=ct.find(S=>S.name===o))==null?void 0:G.display]}),p.jsx(la,{}),p.jsx(_v,{children:p.jsxs(xv,{children:[p.jsxs(sc,{children:[p.jsx(Tn,{size:16,strokeWidth:1.5})," Change Model"]}),p.jsx(wv,{children:p.jsx(ic,{children:p.jsx(kv,{value:o,onValueChange:S=>a(S),children:ct.map(S=>p.jsx(cc,{value:S.name,children:S.display},S.name))})})})]})}),p.jsx(la,{}),p.jsxs(ia,{onClick:ce,onMouseEnter:S=>S.currentTarget.style.backgroundColor="rgb(185 28 28 / 0.35)",onMouseLeave:S=>S.currentTarget.style.backgroundColor="",children:[p.jsx(In,{size:14,strokeWidth:1.5})," Configure API Key"]}),p.jsxs(ia,{onClick:z,onMouseEnter:S=>S.currentTarget.style.backgroundColor="rgb(185 28 28 / 0.35)",onMouseLeave:S=>S.currentTarget.style.backgroundColor="",children:[p.jsx(Hc,{size:14,strokeWidth:1.5})," Clear Chat"]})]})]})]}),p.jsx(ba,{className:"p-2",children:l.length>0?p.jsxs(Xi,{className:"space-y-4 h-[500px] w-[400px] p-2",ref:f,onScroll:se,children:[_>y&&p.jsx("div",{className:"flex w-full items-center justify-center",children:p.jsx(bt,{className:"text-sm p-1 m-x-auto bg-transpernent text-white hover:bg-transpernent",onClick:Y,children:"Load Previous Messages"})}),l.map((S,D)=>{var V,L,J,ee,te,ue,ie;return p.jsx("div",{className:fe("flex w-max max-w-[75%] flex-col gap-2 px-3 py-2 text-sm my-4",S.role==="user"?"ml-auto bg-primary text-primary-foreground rounded-bl-lg rounded-tl-lg rounded-tr-lg ":"bg-muted rounded-br-lg rounded-tl-lg rounded-tr-lg"),children:p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"max-w-80",children:typeof S.content=="string"?S.content:S.content.feedback}),typeof S.content!="string"&&p.jsxs(wd,{type:"multiple",children:[((V=S.content)==null?void 0:V.hints)&&S.content.hints.length>0&&p.jsxs(Er,{value:"item-1",className:"max-w-80",children:[p.jsx(Cr,{children:"Hints 👀"}),p.jsx(Ar,{children:p.jsx("ul",{className:"space-y-4",children:(J=(L=S.content)==null?void 0:L.hints)==null?void 0:J.map(de=>p.jsx("li",{children:de},de))})})]}),((ee=S.content)==null?void 0:ee.snippet)&&p.jsxs(Er,{value:"item-2",className:"max-w-80",children:[p.jsx(Cr,{children:"Code 🧑🏻‍💻"}),p.jsx(Ar,{children:p.jsx("div",{className:"mt-4 rounded-md",children:p.jsxs("div",{className:"relative",children:[p.jsx(Vc,{onClick:()=>{var de;typeof S.content!="string"&&navigator.clipboard.writeText(`${(de=S.content)==null?void 0:de.snippet}`)},className:"absolute right-2 top-2 h-4 w-4"}),p.jsx(Ju,{theme:Ho.dracula,code:((te=S.content)==null?void 0:te.snippet)||"",language:((ie=(ue=S.content)==null?void 0:ue.programmingLanguage)==null?void 0:ie.toLowerCase())||"javascript",children:({className:de,style:oe,tokens:H,getLineProps:ge,getTokenProps:It})=>p.jsx("pre",{style:oe,className:fe(de,"p-3 rounded-md"),children:H.map((be,mt)=>p.jsx("div",{...ge({line:be}),children:be.map((qe,dc)=>p.jsx("span",{...It({token:qe})},dc))},mt))})})]})})})]})]})]})},D)}),h&&p.jsx("div",{className:"flex w-max max-w-[75%] flex-col my-2",children:p.jsx("div",{className:"w-5 h-5 rounded-full animate-pulse bg-primary"})}),p.jsx("div",{ref:g})]}):p.jsx("div",{children:p.jsx("p",{className:"flex items-center justify-center h-[510px] w-[400px] text-center space-y-4",children:"No messages yet."})})}),p.jsx(ps,{children:p.jsxs("form",{onSubmit:S=>{S.preventDefault(),s.trim().length!==0&&(ne(s),i(""))},className:"flex w-full items-center space-x-2",children:[p.jsx(Mc,{id:"message",placeholder:"Type your message...",className:"flex-1",autoComplete:"off",value:s,onChange:S=>i(S.target.value),disabled:h,required:!0,ref:F}),p.jsxs(bt,{type:"submit",className:"bg-[#fafafa] rounded-lg text-black",size:"icon",disabled:s.length===0,children:[p.jsx(qc,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Send"})]})]})})]}):p.jsx(p.Fragment,{})},Cv=()=>{var g;const[e,t]=ae.useState(!1),n=document.querySelector("meta[name=description]"),r=n==null?void 0:n.getAttribute("content"),[a,o]=ae.useState(null),[s,i]=ae.useState(null),[l,c]=ae.useState(),u=v.useRef(null),d=y=>{u.current&&y.target instanceof Node&&u.current.contains(y.target)},h=()=>{chrome.runtime.openOptionsPage?chrome.runtime.openOptionsPage():window.open(chrome.runtime.getURL("index.html"))};ae.useEffect(()=>(document.addEventListener("click",d),()=>{document.removeEventListener("click",d)}),[]);const b=async()=>{try{const{getKeyModel:y,selectModel:w}=Ya(),_=await w();if(!_){o(null),i(null),c(void 0);return}const{model:x,apiKey:T}=await y(_);o(x),i(T),c(_)}catch(y){console.error("Failed to load configuration:",y),o(null),i(null),c(void 0)}};ae.useEffect(()=>{let y=!0;return(async()=>{y&&await b()})(),()=>{y=!1}},[]);const f=async y=>{if(y)try{const{setSelectModel:w,getKeyModel:_}=Ya();await w(y),c(y);const{apiKey:x}=await _(y);i(x)}catch(w){console.error("Failed to change model:",w)}};return p.jsxs("div",{ref:u,className:"dark z-50",style:{position:"fixed",bottom:"30px",right:"30px"},children:[!a||!s?p.jsx(va,{className:"mb-5 w-[400px]",children:p.jsx(ba,{className:"p-6",children:p.jsxs("div",{className:"grid place-items-center gap-4",children:[p.jsx(Tn,{className:"w-12 h-12 text-primary"}),p.jsx("h2",{className:"text-xl font-bold text-center",children:"CodeSmart Bot Setup"}),l?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"text-center space-y-2",children:[p.jsxs("p",{className:"text-muted-foreground",children:["No API key found for ",p.jsx("span",{className:"font-semibold",children:(g=ct.find(y=>y.name===l))==null?void 0:g.display})]}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"You can either configure this model or select another one:"})]}),p.jsxs("div",{className:"w-full space-y-4",children:[p.jsxs(Ac,{value:l,onValueChange:y=>f(y),children:[p.jsx(Tc,{className:"w-full",children:p.jsx(Ic,{placeholder:"Select a model"})}),p.jsx(Rc,{children:p.jsxs(Nc,{children:[p.jsx(jc,{children:"Available Models"}),p.jsx(Pc,{}),ct.map(y=>p.jsx(Oc,{value:y.name,children:y.display},y.name))]})})]}),p.jsxs(bt,{onClick:h,className:"w-full",variant:"outline",children:[p.jsx(In,{className:"w-4 h-4 mr-2"}),"Configure API Key"]})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"text-center text-muted-foreground",children:"Please configure the extension to start using AI assistance."}),p.jsxs(bt,{onClick:h,className:"w-full",size:"default",children:[p.jsx(In,{className:"w-4 h-4 mr-2"}),"Configure Extension"]})]}),p.jsxs("p",{className:"text-xs text-center text-muted-foreground mt-4",children:["Need help?"," ",p.jsx("a",{href:"https://github.com/piyushgarg-dev/leetcode-whisper-chrome-extension#readme",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"View setup guide"})]})]})})}):p.jsx(Ev,{visible:e,context:{problemStatement:r},model:a,apikey:s,heandelModel:f,selectedModel:l}),p.jsx("div",{className:"flex justify-end",children:p.jsx(bt,{size:"icon",onClick:()=>t(!e),className:"shadow-lg",children:p.jsx(Tn,{className:"w-5 h-5"})})})]})},Ka=document.createElement("div");Ka.id="__codesmart_bot_container";document.body.append(Ka);Dc(Ka).render(p.jsx(v.StrictMode,{children:p.jsx(Cv,{})}));
